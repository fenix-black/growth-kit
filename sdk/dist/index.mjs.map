{"version":3,"sources":["../../node_modules/next/src/shared/lib/i18n/detect-domain-locale.ts","../../node_modules/next/src/shared/lib/router/utils/remove-trailing-slash.ts","../../node_modules/next/src/shared/lib/router/utils/parse-path.ts","../../node_modules/next/src/shared/lib/router/utils/add-path-prefix.ts","../../node_modules/next/src/shared/lib/router/utils/add-path-suffix.ts","../../node_modules/next/src/shared/lib/router/utils/path-has-prefix.ts","../../node_modules/next/src/shared/lib/router/utils/add-locale.ts","../../node_modules/next/src/shared/lib/router/utils/format-next-pathname-info.ts","../../node_modules/next/src/shared/lib/get-hostname.ts","../../node_modules/next/src/shared/lib/i18n/normalize-locale-path.ts","../../node_modules/next/src/shared/lib/router/utils/remove-path-prefix.ts","../../node_modules/next/src/shared/lib/router/utils/get-next-pathname-info.ts","../../node_modules/next/src/server/web/next-url.ts","../../node_modules/next/src/lib/constants.ts","../../node_modules/next/src/server/web/utils.ts","../../node_modules/next/src/server/web/error.ts","../../node_modules/next/dist/compiled/@edge-runtime/cookies/index.js","../../node_modules/next/src/server/web/spec-extension/cookies.ts","../../node_modules/next/src/server/web/spec-extension/request.ts","../../node_modules/next/src/server/web/spec-extension/adapters/reflect.ts","../../node_modules/next/src/server/web/spec-extension/response.ts","../../node_modules/next/src/server/web/spec-extension/image-response.ts","../../node_modules/next/dist/compiled/ua-parser-js/ua-parser.js","../../node_modules/next/src/server/web/spec-extension/user-agent.ts","../../node_modules/next/src/server/web/spec-extension/url-pattern.ts","../../node_modules/next/src/server/app-render/async-local-storage.ts","../../node_modules/next/src/server/app-render/work-async-storage-instance.ts","../../node_modules/next/src/server/app-render/work-async-storage.external.ts","../../node_modules/next/src/server/after/after.ts","../../node_modules/next/src/server/after/index.ts","../../node_modules/next/src/server/app-render/work-unit-async-storage-instance.ts","../../node_modules/next/src/client/components/app-router-headers.ts","../../node_modules/next/src/shared/lib/invariant-error.ts","../../node_modules/next/src/server/app-render/work-unit-async-storage.external.ts","../../node_modules/next/src/client/components/hooks-server-context.ts","../../node_modules/next/src/client/components/static-generation-bailout.ts","../../node_modules/next/src/server/dynamic-rendering-utils.ts","../../node_modules/next/src/lib/framework/boundary-constants.tsx","../../node_modules/next/src/lib/scheduler.ts","../../node_modules/next/src/shared/lib/lazy-dynamic/bailout-to-csr.ts","../../node_modules/next/src/server/app-render/dynamic-rendering.ts","../../node_modules/next/src/server/app-render/after-task-async-storage-instance.ts","../../node_modules/next/src/server/app-render/after-task-async-storage.external.ts","../../node_modules/next/src/server/request/utils.ts","../../node_modules/next/src/server/request/connection.ts","../../node_modules/next/src/shared/lib/utils/reflect-utils.ts","../../node_modules/next/src/server/app-render/action-async-storage-instance.ts","../../node_modules/next/src/server/app-render/action-async-storage.external.ts","../../node_modules/next/src/lib/picocolors.ts","../../node_modules/next/src/server/lib/lru-cache.ts","../../node_modules/next/src/build/output/log.ts","../../node_modules/next/src/server/request/root-params.ts","../../node_modules/next/server.js","../src/useGrowthKit.ts","../src/context.ts","../src/api.ts","../src/fingerprint.ts","../src/components/GrowthKitProvider.tsx","../src/components/GrowthKitStateProvider.tsx","../src/localization.ts","../src/theme.ts","../src/components/GrowthKitGate.tsx","../src/components/WaitlistForm.tsx","../src/components/CreditExhaustionModal.tsx","../src/components/GrowthKitAccountWidget.tsx","../src/assets.ts","../src/middleware.ts","../src/server.ts","../src/index.ts"],"sourcesContent":["import type { DomainLocale } from '../../../server/config-shared'\n\nexport function detectDomainLocale(\n  domainItems?: readonly DomainLocale[],\n  hostname?: string,\n  detectedLocale?: string\n) {\n  if (!domainItems) return\n\n  if (detectedLocale) {\n    detectedLocale = detectedLocale.toLowerCase()\n  }\n\n  for (const item of domainItems) {\n    // remove port if present\n    const domainHostname = item.domain?.split(':', 1)[0].toLowerCase()\n    if (\n      hostname === domainHostname ||\n      detectedLocale === item.defaultLocale.toLowerCase() ||\n      item.locales?.some((locale) => locale.toLowerCase() === detectedLocale)\n    ) {\n      return item\n    }\n  }\n}\n","/**\n * Removes the trailing slash for a given route or page path. Preserves the\n * root page. Examples:\n *   - `/foo/bar/` -> `/foo/bar`\n *   - `/foo/bar` -> `/foo/bar`\n *   - `/` -> `/`\n */\nexport function removeTrailingSlash(route: string) {\n  return route.replace(/\\/$/, '') || '/'\n}\n","/**\n * Given a path this function will find the pathname, query and hash and return\n * them. This is useful to parse full paths on the client side.\n * @param path A path to parse e.g. /foo/bar?id=1#hash\n */\nexport function parsePath(path: string) {\n  const hashIndex = path.indexOf('#')\n  const queryIndex = path.indexOf('?')\n  const hasQuery = queryIndex > -1 && (hashIndex < 0 || queryIndex < hashIndex)\n\n  if (hasQuery || hashIndex > -1) {\n    return {\n      pathname: path.substring(0, hasQuery ? queryIndex : hashIndex),\n      query: hasQuery\n        ? path.substring(queryIndex, hashIndex > -1 ? hashIndex : undefined)\n        : '',\n      hash: hashIndex > -1 ? path.slice(hashIndex) : '',\n    }\n  }\n\n  return { pathname: path, query: '', hash: '' }\n}\n","import { parsePath } from './parse-path'\n\n/**\n * Adds the provided prefix to the given path. It first ensures that the path\n * is indeed starting with a slash.\n */\nexport function addPathPrefix(path: string, prefix?: string) {\n  if (!path.startsWith('/') || !prefix) {\n    return path\n  }\n\n  const { pathname, query, hash } = parsePath(path)\n  return `${prefix}${pathname}${query}${hash}`\n}\n","import { parsePath } from './parse-path'\n\n/**\n * Similarly to `addPathPrefix`, this function adds a suffix at the end on the\n * provided path. It also works only for paths ensuring the argument starts\n * with a slash.\n */\nexport function addPathSuffix(path: string, suffix?: string) {\n  if (!path.startsWith('/') || !suffix) {\n    return path\n  }\n\n  const { pathname, query, hash } = parsePath(path)\n  return `${pathname}${suffix}${query}${hash}`\n}\n","import { parsePath } from './parse-path'\n\n/**\n * Checks if a given path starts with a given prefix. It ensures it matches\n * exactly without containing extra chars. e.g. prefix /docs should replace\n * for /docs, /docs/, /docs/a but not /docsss\n * @param path The path to check.\n * @param prefix The prefix to check against.\n */\nexport function pathHasPrefix(path: string, prefix: string) {\n  if (typeof path !== 'string') {\n    return false\n  }\n\n  const { pathname } = parsePath(path)\n  return pathname === prefix || pathname.startsWith(prefix + '/')\n}\n","import { addPathPrefix } from './add-path-prefix'\nimport { pathHasPrefix } from './path-has-prefix'\n\n/**\n * For a given path and a locale, if the locale is given, it will prefix the\n * locale. The path shouldn't be an API path. If a default locale is given the\n * prefix will be omitted if the locale is already the default locale.\n */\nexport function addLocale(\n  path: string,\n  locale?: string | false,\n  defaultLocale?: string,\n  ignorePrefix?: boolean\n) {\n  // If no locale was given or the locale is the default locale, we don't need\n  // to prefix the path.\n  if (!locale || locale === defaultLocale) return path\n\n  const lower = path.toLowerCase()\n\n  // If the path is an API path or the path already has the locale prefix, we\n  // don't need to prefix the path.\n  if (!ignorePrefix) {\n    if (pathHasPrefix(lower, '/api')) return path\n    if (pathHasPrefix(lower, `/${locale.toLowerCase()}`)) return path\n  }\n\n  // Add the locale prefix to the path.\n  return addPathPrefix(path, `/${locale}`)\n}\n","import type { NextPathnameInfo } from './get-next-pathname-info'\nimport { removeTrailingSlash } from './remove-trailing-slash'\nimport { addPathPrefix } from './add-path-prefix'\nimport { addPathSuffix } from './add-path-suffix'\nimport { addLocale } from './add-locale'\n\ninterface ExtendedInfo extends NextPathnameInfo {\n  defaultLocale?: string\n  ignorePrefix?: boolean\n}\n\nexport function formatNextPathnameInfo(info: ExtendedInfo) {\n  let pathname = addLocale(\n    info.pathname,\n    info.locale,\n    info.buildId ? undefined : info.defaultLocale,\n    info.ignorePrefix\n  )\n\n  if (info.buildId || !info.trailingSlash) {\n    pathname = removeTrailingSlash(pathname)\n  }\n\n  if (info.buildId) {\n    pathname = addPathSuffix(\n      addPathPrefix(pathname, `/_next/data/${info.buildId}`),\n      info.pathname === '/' ? 'index.json' : '.json'\n    )\n  }\n\n  pathname = addPathPrefix(pathname, info.basePath)\n  return !info.buildId && info.trailingSlash\n    ? !pathname.endsWith('/')\n      ? addPathSuffix(pathname, '/')\n      : pathname\n    : removeTrailingSlash(pathname)\n}\n","import type { OutgoingHttpHeaders } from 'http'\n\n/**\n * Takes an object with a hostname property (like a parsed URL) and some\n * headers that may contain Host and returns the preferred hostname.\n * @param parsed An object containing a hostname property.\n * @param headers A dictionary with headers containing a `host`.\n */\nexport function getHostname(\n  parsed: { hostname?: string | null },\n  headers?: OutgoingHttpHeaders\n): string | undefined {\n  // Get the hostname from the headers if it exists, otherwise use the parsed\n  // hostname.\n  let hostname: string\n  if (headers?.host && !Array.isArray(headers.host)) {\n    hostname = headers.host.toString().split(':', 1)[0]\n  } else if (parsed.hostname) {\n    hostname = parsed.hostname\n  } else return\n\n  return hostname.toLowerCase()\n}\n","export interface PathLocale {\n  detectedLocale?: string\n  pathname: string\n}\n\n/**\n * A cache of lowercased locales for each list of locales. This is stored as a\n * WeakMap so if the locales are garbage collected, the cache entry will be\n * removed as well.\n */\nconst cache = new WeakMap<readonly string[], readonly string[]>()\n\n/**\n * For a pathname that may include a locale from a list of locales, it\n * removes the locale from the pathname returning it alongside with the\n * detected locale.\n *\n * @param pathname A pathname that may include a locale.\n * @param locales A list of locales.\n * @returns The detected locale and pathname without locale\n */\nexport function normalizeLocalePath(\n  pathname: string,\n  locales?: readonly string[]\n): PathLocale {\n  // If locales is undefined, return the pathname as is.\n  if (!locales) return { pathname }\n\n  // Get the cached lowercased locales or create a new cache entry.\n  let lowercasedLocales = cache.get(locales)\n  if (!lowercasedLocales) {\n    lowercasedLocales = locales.map((locale) => locale.toLowerCase())\n    cache.set(locales, lowercasedLocales)\n  }\n\n  let detectedLocale: string | undefined\n\n  // The first segment will be empty, because it has a leading `/`. If\n  // there is no further segment, there is no locale (or it's the default).\n  const segments = pathname.split('/', 2)\n\n  // If there's no second segment (ie, the pathname is just `/`), there's no\n  // locale.\n  if (!segments[1]) return { pathname }\n\n  // The second segment will contain the locale part if any.\n  const segment = segments[1].toLowerCase()\n\n  // See if the segment matches one of the locales. If it doesn't, there is\n  // no locale (or it's the default).\n  const index = lowercasedLocales.indexOf(segment)\n  if (index < 0) return { pathname }\n\n  // Return the case-sensitive locale.\n  detectedLocale = locales[index]\n\n  // Remove the `/${locale}` part of the pathname.\n  pathname = pathname.slice(detectedLocale.length + 1) || '/'\n\n  return { pathname, detectedLocale }\n}\n","import { pathHasPrefix } from './path-has-prefix'\n\n/**\n * Given a path and a prefix it will remove the prefix when it exists in the\n * given path. It ensures it matches exactly without containing extra chars\n * and if the prefix is not there it will be noop.\n *\n * @param path The path to remove the prefix from.\n * @param prefix The prefix to be removed.\n */\nexport function removePathPrefix(path: string, prefix: string): string {\n  // If the path doesn't start with the prefix we can return it as is. This\n  // protects us from situations where the prefix is a substring of the path\n  // prefix such as:\n  //\n  // For prefix: /blog\n  //\n  //   /blog -> true\n  //   /blog/ -> true\n  //   /blog/1 -> true\n  //   /blogging -> false\n  //   /blogging/ -> false\n  //   /blogging/1 -> false\n  if (!pathHasPrefix(path, prefix)) {\n    return path\n  }\n\n  // Remove the prefix from the path via slicing.\n  const withoutPrefix = path.slice(prefix.length)\n\n  // If the path without the prefix starts with a `/` we can return it as is.\n  if (withoutPrefix.startsWith('/')) {\n    return withoutPrefix\n  }\n\n  // If the path without the prefix doesn't start with a `/` we need to add it\n  // back to the path to make sure it's a valid path.\n  return `/${withoutPrefix}`\n}\n","import { normalizeLocalePath } from '../../i18n/normalize-locale-path'\nimport { removePathPrefix } from './remove-path-prefix'\nimport { pathHasPrefix } from './path-has-prefix'\nimport type { I18NProvider } from '../../../../server/lib/i18n-provider'\n\nexport interface NextPathnameInfo {\n  /**\n   * The base path in case the pathname included it.\n   */\n  basePath?: string\n  /**\n   * The buildId for when the parsed URL is a data URL. Parsing it can be\n   * disabled with the `parseData` option.\n   */\n  buildId?: string\n  /**\n   * If there was a locale in the pathname, this will hold its value.\n   */\n  locale?: string\n  /**\n   * The processed pathname without a base path, locale, or data URL elements\n   * when parsing it is enabled.\n   */\n  pathname: string\n  /**\n   * A boolean telling if the pathname had a trailingSlash. This can be only\n   * true if trailingSlash is enabled.\n   */\n  trailingSlash?: boolean\n}\n\ninterface Options {\n  /**\n   * When passed to true, this function will also parse Nextjs data URLs.\n   */\n  parseData?: boolean\n  /**\n   * A partial of the Next.js configuration to parse the URL.\n   */\n  nextConfig?: {\n    basePath?: string\n    i18n?: { locales?: readonly string[] } | null\n    trailingSlash?: boolean\n  }\n\n  /**\n   * If provided, this normalizer will be used to detect the locale instead of\n   * the default locale detection.\n   */\n  i18nProvider?: I18NProvider\n}\n\nexport function getNextPathnameInfo(\n  pathname: string,\n  options: Options\n): NextPathnameInfo {\n  const { basePath, i18n, trailingSlash } = options.nextConfig ?? {}\n  const info: NextPathnameInfo = {\n    pathname,\n    trailingSlash: pathname !== '/' ? pathname.endsWith('/') : trailingSlash,\n  }\n\n  if (basePath && pathHasPrefix(info.pathname, basePath)) {\n    info.pathname = removePathPrefix(info.pathname, basePath)\n    info.basePath = basePath\n  }\n  let pathnameNoDataPrefix = info.pathname\n\n  if (\n    info.pathname.startsWith('/_next/data/') &&\n    info.pathname.endsWith('.json')\n  ) {\n    const paths = info.pathname\n      .replace(/^\\/_next\\/data\\//, '')\n      .replace(/\\.json$/, '')\n      .split('/')\n\n    const buildId = paths[0]\n    info.buildId = buildId\n    pathnameNoDataPrefix =\n      paths[1] !== 'index' ? `/${paths.slice(1).join('/')}` : '/'\n\n    // update pathname with normalized if enabled although\n    // we use normalized to populate locale info still\n    if (options.parseData === true) {\n      info.pathname = pathnameNoDataPrefix\n    }\n  }\n\n  // If provided, use the locale route normalizer to detect the locale instead\n  // of the function below.\n  if (i18n) {\n    let result = options.i18nProvider\n      ? options.i18nProvider.analyze(info.pathname)\n      : normalizeLocalePath(info.pathname, i18n.locales)\n\n    info.locale = result.detectedLocale\n    info.pathname = result.pathname ?? info.pathname\n\n    if (!result.detectedLocale && info.buildId) {\n      result = options.i18nProvider\n        ? options.i18nProvider.analyze(pathnameNoDataPrefix)\n        : normalizeLocalePath(pathnameNoDataPrefix, i18n.locales)\n\n      if (result.detectedLocale) {\n        info.locale = result.detectedLocale\n      }\n    }\n  }\n  return info\n}\n","import type { OutgoingHttpHeaders } from 'http'\nimport type { DomainLocale, I18NConfig } from '../config-shared'\nimport type { I18NProvider } from '../lib/i18n-provider'\n\nimport { detectDomainLocale } from '../../shared/lib/i18n/detect-domain-locale'\nimport { formatNextPathnameInfo } from '../../shared/lib/router/utils/format-next-pathname-info'\nimport { getHostname } from '../../shared/lib/get-hostname'\nimport { getNextPathnameInfo } from '../../shared/lib/router/utils/get-next-pathname-info'\n\ninterface Options {\n  base?: string | URL\n  headers?: OutgoingHttpHeaders\n  forceLocale?: boolean\n  nextConfig?: {\n    basePath?: string\n    i18n?: I18NConfig | null\n    trailingSlash?: boolean\n  }\n  i18nProvider?: I18NProvider\n}\n\nconst REGEX_LOCALHOST_HOSTNAME =\n  /(?!^https?:\\/\\/)(127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\\[::1\\]|localhost)/\n\nfunction parseURL(url: string | URL, base?: string | URL) {\n  return new URL(\n    String(url).replace(REGEX_LOCALHOST_HOSTNAME, 'localhost'),\n    base && String(base).replace(REGEX_LOCALHOST_HOSTNAME, 'localhost')\n  )\n}\n\nconst Internal = Symbol('NextURLInternal')\n\nexport class NextURL {\n  private [Internal]: {\n    basePath: string\n    buildId?: string\n    flightSearchParameters?: Record<string, string>\n    defaultLocale?: string\n    domainLocale?: DomainLocale\n    locale?: string\n    options: Options\n    trailingSlash?: boolean\n    url: URL\n  }\n\n  constructor(input: string | URL, base?: string | URL, opts?: Options)\n  constructor(input: string | URL, opts?: Options)\n  constructor(\n    input: string | URL,\n    baseOrOpts?: string | URL | Options,\n    opts?: Options\n  ) {\n    let base: undefined | string | URL\n    let options: Options\n\n    if (\n      (typeof baseOrOpts === 'object' && 'pathname' in baseOrOpts) ||\n      typeof baseOrOpts === 'string'\n    ) {\n      base = baseOrOpts\n      options = opts || {}\n    } else {\n      options = opts || baseOrOpts || {}\n    }\n\n    this[Internal] = {\n      url: parseURL(input, base ?? options.base),\n      options: options,\n      basePath: '',\n    }\n\n    this.analyze()\n  }\n\n  private analyze() {\n    const info = getNextPathnameInfo(this[Internal].url.pathname, {\n      nextConfig: this[Internal].options.nextConfig,\n      parseData: !process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE,\n      i18nProvider: this[Internal].options.i18nProvider,\n    })\n\n    const hostname = getHostname(\n      this[Internal].url,\n      this[Internal].options.headers\n    )\n    this[Internal].domainLocale = this[Internal].options.i18nProvider\n      ? this[Internal].options.i18nProvider.detectDomainLocale(hostname)\n      : detectDomainLocale(\n          this[Internal].options.nextConfig?.i18n?.domains,\n          hostname\n        )\n\n    const defaultLocale =\n      this[Internal].domainLocale?.defaultLocale ||\n      this[Internal].options.nextConfig?.i18n?.defaultLocale\n\n    this[Internal].url.pathname = info.pathname\n    this[Internal].defaultLocale = defaultLocale\n    this[Internal].basePath = info.basePath ?? ''\n    this[Internal].buildId = info.buildId\n    this[Internal].locale = info.locale ?? defaultLocale\n    this[Internal].trailingSlash = info.trailingSlash\n  }\n\n  private formatPathname() {\n    return formatNextPathnameInfo({\n      basePath: this[Internal].basePath,\n      buildId: this[Internal].buildId,\n      defaultLocale: !this[Internal].options.forceLocale\n        ? this[Internal].defaultLocale\n        : undefined,\n      locale: this[Internal].locale,\n      pathname: this[Internal].url.pathname,\n      trailingSlash: this[Internal].trailingSlash,\n    })\n  }\n\n  private formatSearch() {\n    return this[Internal].url.search\n  }\n\n  public get buildId() {\n    return this[Internal].buildId\n  }\n\n  public set buildId(buildId: string | undefined) {\n    this[Internal].buildId = buildId\n  }\n\n  public get locale() {\n    return this[Internal].locale ?? ''\n  }\n\n  public set locale(locale: string) {\n    if (\n      !this[Internal].locale ||\n      !this[Internal].options.nextConfig?.i18n?.locales.includes(locale)\n    ) {\n      throw new TypeError(\n        `The NextURL configuration includes no locale \"${locale}\"`\n      )\n    }\n\n    this[Internal].locale = locale\n  }\n\n  get defaultLocale() {\n    return this[Internal].defaultLocale\n  }\n\n  get domainLocale() {\n    return this[Internal].domainLocale\n  }\n\n  get searchParams() {\n    return this[Internal].url.searchParams\n  }\n\n  get host() {\n    return this[Internal].url.host\n  }\n\n  set host(value: string) {\n    this[Internal].url.host = value\n  }\n\n  get hostname() {\n    return this[Internal].url.hostname\n  }\n\n  set hostname(value: string) {\n    this[Internal].url.hostname = value\n  }\n\n  get port() {\n    return this[Internal].url.port\n  }\n\n  set port(value: string) {\n    this[Internal].url.port = value\n  }\n\n  get protocol() {\n    return this[Internal].url.protocol\n  }\n\n  set protocol(value: string) {\n    this[Internal].url.protocol = value\n  }\n\n  get href() {\n    const pathname = this.formatPathname()\n    const search = this.formatSearch()\n    return `${this.protocol}//${this.host}${pathname}${search}${this.hash}`\n  }\n\n  set href(url: string) {\n    this[Internal].url = parseURL(url)\n    this.analyze()\n  }\n\n  get origin() {\n    return this[Internal].url.origin\n  }\n\n  get pathname() {\n    return this[Internal].url.pathname\n  }\n\n  set pathname(value: string) {\n    this[Internal].url.pathname = value\n  }\n\n  get hash() {\n    return this[Internal].url.hash\n  }\n\n  set hash(value: string) {\n    this[Internal].url.hash = value\n  }\n\n  get search() {\n    return this[Internal].url.search\n  }\n\n  set search(value: string) {\n    this[Internal].url.search = value\n  }\n\n  get password() {\n    return this[Internal].url.password\n  }\n\n  set password(value: string) {\n    this[Internal].url.password = value\n  }\n\n  get username() {\n    return this[Internal].url.username\n  }\n\n  set username(value: string) {\n    this[Internal].url.username = value\n  }\n\n  get basePath() {\n    return this[Internal].basePath\n  }\n\n  set basePath(value: string) {\n    this[Internal].basePath = value.startsWith('/') ? value : `/${value}`\n  }\n\n  toString() {\n    return this.href\n  }\n\n  toJSON() {\n    return this.href\n  }\n\n  [Symbol.for('edge-runtime.inspect.custom')]() {\n    return {\n      href: this.href,\n      origin: this.origin,\n      protocol: this.protocol,\n      username: this.username,\n      password: this.password,\n      host: this.host,\n      hostname: this.hostname,\n      port: this.port,\n      pathname: this.pathname,\n      search: this.search,\n      searchParams: this.searchParams,\n      hash: this.hash,\n    }\n  }\n\n  clone() {\n    return new NextURL(String(this), this[Internal].options)\n  }\n}\n","import type { ServerRuntime } from '../types'\n\nexport const TEXT_PLAIN_CONTENT_TYPE_HEADER = 'text/plain'\nexport const HTML_CONTENT_TYPE_HEADER = 'text/html; charset=utf-8'\nexport const JSON_CONTENT_TYPE_HEADER = 'application/json; charset=utf-8'\nexport const NEXT_QUERY_PARAM_PREFIX = 'nxtP'\nexport const NEXT_INTERCEPTION_MARKER_PREFIX = 'nxtI'\n\nexport const MATCHED_PATH_HEADER = 'x-matched-path'\nexport const PRERENDER_REVALIDATE_HEADER = 'x-prerender-revalidate'\nexport const PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER =\n  'x-prerender-revalidate-if-generated'\n\nexport const RSC_PREFETCH_SUFFIX = '.prefetch.rsc'\nexport const RSC_SEGMENTS_DIR_SUFFIX = '.segments'\nexport const RSC_SEGMENT_SUFFIX = '.segment.rsc'\nexport const RSC_SUFFIX = '.rsc'\nexport const ACTION_SUFFIX = '.action'\nexport const NEXT_DATA_SUFFIX = '.json'\nexport const NEXT_META_SUFFIX = '.meta'\nexport const NEXT_BODY_SUFFIX = '.body'\n\nexport const NEXT_CACHE_TAGS_HEADER = 'x-next-cache-tags'\nexport const NEXT_CACHE_REVALIDATED_TAGS_HEADER = 'x-next-revalidated-tags'\nexport const NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER =\n  'x-next-revalidate-tag-token'\n\nexport const NEXT_RESUME_HEADER = 'next-resume'\n\n// if these change make sure we update the related\n// documentation as well\nexport const NEXT_CACHE_TAG_MAX_ITEMS = 128\nexport const NEXT_CACHE_TAG_MAX_LENGTH = 256\nexport const NEXT_CACHE_SOFT_TAG_MAX_LENGTH = 1024\nexport const NEXT_CACHE_IMPLICIT_TAG_ID = '_N_T_'\n\n// in seconds\nexport const CACHE_ONE_YEAR = 31536000\n\n// in seconds, represents revalidate=false. I.e. never revaliate.\n// We use this value since it can be represented as a V8 SMI for optimal performance.\n// It can also be serialized as JSON if it ever leaks accidentally as an actual value.\nexport const INFINITE_CACHE = 0xfffffffe\n\n// Patterns to detect middleware files\nexport const MIDDLEWARE_FILENAME = 'middleware'\nexport const MIDDLEWARE_LOCATION_REGEXP = `(?:src/)?${MIDDLEWARE_FILENAME}`\n\n// Pattern to detect instrumentation hooks file\nexport const INSTRUMENTATION_HOOK_FILENAME = 'instrumentation'\n\n// Because on Windows absolute paths in the generated code can break because of numbers, eg 1 in the path,\n// we have to use a private alias\nexport const PAGES_DIR_ALIAS = 'private-next-pages'\nexport const DOT_NEXT_ALIAS = 'private-dot-next'\nexport const ROOT_DIR_ALIAS = 'private-next-root-dir'\nexport const APP_DIR_ALIAS = 'private-next-app-dir'\nexport const RSC_MOD_REF_PROXY_ALIAS = 'private-next-rsc-mod-ref-proxy'\nexport const RSC_ACTION_VALIDATE_ALIAS = 'private-next-rsc-action-validate'\nexport const RSC_ACTION_PROXY_ALIAS = 'private-next-rsc-server-reference'\nexport const RSC_CACHE_WRAPPER_ALIAS = 'private-next-rsc-cache-wrapper'\nexport const RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS =\n  'private-next-rsc-track-dynamic-import'\nexport const RSC_ACTION_ENCRYPTION_ALIAS = 'private-next-rsc-action-encryption'\nexport const RSC_ACTION_CLIENT_WRAPPER_ALIAS =\n  'private-next-rsc-action-client-wrapper'\n\nexport const PUBLIC_DIR_MIDDLEWARE_CONFLICT = `You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict`\n\nexport const SSG_GET_INITIAL_PROPS_CONFLICT = `You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps`\n\nexport const SERVER_PROPS_GET_INIT_PROPS_CONFLICT = `You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.`\n\nexport const SERVER_PROPS_SSG_CONFLICT = `You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps`\n\nexport const STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR = `can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props`\n\nexport const SERVER_PROPS_EXPORT_ERROR = `pages with \\`getServerSideProps\\` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export`\n\nexport const GSP_NO_RETURNED_VALUE =\n  'Your `getStaticProps` function did not return an object. Did you forget to add a `return`?'\nexport const GSSP_NO_RETURNED_VALUE =\n  'Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?'\n\nexport const UNSTABLE_REVALIDATE_RENAME_ERROR =\n  'The `unstable_revalidate` property is available for general use.\\n' +\n  'Please use `revalidate` instead.'\n\nexport const GSSP_COMPONENT_MEMBER_ERROR = `can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member`\n\nexport const NON_STANDARD_NODE_ENV = `You are using a non-standard \"NODE_ENV\" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env`\n\nexport const SSG_FALLBACK_EXPORT_ERROR = `Pages with \\`fallback\\` enabled in \\`getStaticPaths\\` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export`\n\nexport const ESLINT_DEFAULT_DIRS = ['app', 'pages', 'components', 'lib', 'src']\n\nexport const SERVER_RUNTIME: Record<string, ServerRuntime> = {\n  edge: 'edge',\n  experimentalEdge: 'experimental-edge',\n  nodejs: 'nodejs',\n}\n\n/**\n * The names of the webpack layers. These layers are the primitives for the\n * webpack chunks.\n */\nconst WEBPACK_LAYERS_NAMES = {\n  /**\n   * The layer for the shared code between the client and server bundles.\n   */\n  shared: 'shared',\n  /**\n   * The layer for server-only runtime and picking up `react-server` export conditions.\n   * Including app router RSC pages and app router custom routes and metadata routes.\n   */\n  reactServerComponents: 'rsc',\n  /**\n   * Server Side Rendering layer for app (ssr).\n   */\n  serverSideRendering: 'ssr',\n  /**\n   * The browser client bundle layer for actions.\n   */\n  actionBrowser: 'action-browser',\n  /**\n   * The Node.js bundle layer for the API routes.\n   */\n  apiNode: 'api-node',\n  /**\n   * The Edge Lite bundle layer for the API routes.\n   */\n  apiEdge: 'api-edge',\n  /**\n   * The layer for the middleware code.\n   */\n  middleware: 'middleware',\n  /**\n   * The layer for the instrumentation hooks.\n   */\n  instrument: 'instrument',\n  /**\n   * The layer for assets on the edge.\n   */\n  edgeAsset: 'edge-asset',\n  /**\n   * The browser client bundle layer for App directory.\n   */\n  appPagesBrowser: 'app-pages-browser',\n  /**\n   * The browser client bundle layer for Pages directory.\n   */\n  pagesDirBrowser: 'pages-dir-browser',\n  /**\n   * The Edge Lite bundle layer for Pages directory.\n   */\n  pagesDirEdge: 'pages-dir-edge',\n  /**\n   * The Node.js bundle layer for Pages directory.\n   */\n  pagesDirNode: 'pages-dir-node',\n} as const\n\nexport type WebpackLayerName =\n  (typeof WEBPACK_LAYERS_NAMES)[keyof typeof WEBPACK_LAYERS_NAMES]\n\nconst WEBPACK_LAYERS = {\n  ...WEBPACK_LAYERS_NAMES,\n  GROUP: {\n    builtinReact: [\n      WEBPACK_LAYERS_NAMES.reactServerComponents,\n      WEBPACK_LAYERS_NAMES.actionBrowser,\n    ],\n    serverOnly: [\n      WEBPACK_LAYERS_NAMES.reactServerComponents,\n      WEBPACK_LAYERS_NAMES.actionBrowser,\n      WEBPACK_LAYERS_NAMES.instrument,\n      WEBPACK_LAYERS_NAMES.middleware,\n    ],\n    neutralTarget: [\n      // pages api\n      WEBPACK_LAYERS_NAMES.apiNode,\n      WEBPACK_LAYERS_NAMES.apiEdge,\n    ],\n    clientOnly: [\n      WEBPACK_LAYERS_NAMES.serverSideRendering,\n      WEBPACK_LAYERS_NAMES.appPagesBrowser,\n    ],\n    bundled: [\n      WEBPACK_LAYERS_NAMES.reactServerComponents,\n      WEBPACK_LAYERS_NAMES.actionBrowser,\n      WEBPACK_LAYERS_NAMES.serverSideRendering,\n      WEBPACK_LAYERS_NAMES.appPagesBrowser,\n      WEBPACK_LAYERS_NAMES.shared,\n      WEBPACK_LAYERS_NAMES.instrument,\n      WEBPACK_LAYERS_NAMES.middleware,\n    ],\n    appPages: [\n      // app router pages and layouts\n      WEBPACK_LAYERS_NAMES.reactServerComponents,\n      WEBPACK_LAYERS_NAMES.serverSideRendering,\n      WEBPACK_LAYERS_NAMES.appPagesBrowser,\n      WEBPACK_LAYERS_NAMES.actionBrowser,\n    ],\n  },\n}\n\nconst WEBPACK_RESOURCE_QUERIES = {\n  edgeSSREntry: '__next_edge_ssr_entry__',\n  metadata: '__next_metadata__',\n  metadataRoute: '__next_metadata_route__',\n  metadataImageMeta: '__next_metadata_image_meta__',\n}\n\nexport { WEBPACK_LAYERS, WEBPACK_RESOURCE_QUERIES }\n","import type { OutgoingHttpHeaders } from 'http'\nimport {\n  NEXT_INTERCEPTION_MARKER_PREFIX,\n  NEXT_QUERY_PARAM_PREFIX,\n} from '../../lib/constants'\n\n/**\n * Converts a Node.js IncomingHttpHeaders object to a Headers object. Any\n * headers with multiple values will be joined with a comma and space. Any\n * headers that have an undefined value will be ignored and others will be\n * coerced to strings.\n *\n * @param nodeHeaders the headers object to convert\n * @returns the converted headers object\n */\nexport function fromNodeOutgoingHttpHeaders(\n  nodeHeaders: OutgoingHttpHeaders\n): Headers {\n  const headers = new Headers()\n  for (let [key, value] of Object.entries(nodeHeaders)) {\n    const values = Array.isArray(value) ? value : [value]\n    for (let v of values) {\n      if (typeof v === 'undefined') continue\n      if (typeof v === 'number') {\n        v = v.toString()\n      }\n\n      headers.append(key, v)\n    }\n  }\n  return headers\n}\n\n/*\n  Set-Cookie header field-values are sometimes comma joined in one string. This splits them without choking on commas\n  that are within a single set-cookie field-value, such as in the Expires portion.\n  This is uncommon, but explicitly allowed - see https://tools.ietf.org/html/rfc2616#section-4.2\n  Node.js does this for every header *except* set-cookie - see https://github.com/nodejs/node/blob/d5e363b77ebaf1caf67cd7528224b651c86815c1/lib/_http_incoming.js#L128\n  React Native's fetch does this for *every* header, including set-cookie.\n  \n  Based on: https://github.com/google/j2objc/commit/16820fdbc8f76ca0c33472810ce0cb03d20efe25\n  Credits to: https://github.com/tomball for original and https://github.com/chrusart for JavaScript implementation\n*/\nexport function splitCookiesString(cookiesString: string) {\n  var cookiesStrings = []\n  var pos = 0\n  var start\n  var ch\n  var lastComma\n  var nextStart\n  var cookiesSeparatorFound\n\n  function skipWhitespace() {\n    while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n      pos += 1\n    }\n    return pos < cookiesString.length\n  }\n\n  function notSpecialChar() {\n    ch = cookiesString.charAt(pos)\n\n    return ch !== '=' && ch !== ';' && ch !== ','\n  }\n\n  while (pos < cookiesString.length) {\n    start = pos\n    cookiesSeparatorFound = false\n\n    while (skipWhitespace()) {\n      ch = cookiesString.charAt(pos)\n      if (ch === ',') {\n        // ',' is a cookie separator if we have later first '=', not ';' or ','\n        lastComma = pos\n        pos += 1\n\n        skipWhitespace()\n        nextStart = pos\n\n        while (pos < cookiesString.length && notSpecialChar()) {\n          pos += 1\n        }\n\n        // currently special character\n        if (pos < cookiesString.length && cookiesString.charAt(pos) === '=') {\n          // we found cookies separator\n          cookiesSeparatorFound = true\n          // pos is inside the next cookie, so back up and return it.\n          pos = nextStart\n          cookiesStrings.push(cookiesString.substring(start, lastComma))\n          start = pos\n        } else {\n          // in param ',' or param separator ';',\n          // we continue from that comma\n          pos = lastComma + 1\n        }\n      } else {\n        pos += 1\n      }\n    }\n\n    if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n      cookiesStrings.push(cookiesString.substring(start, cookiesString.length))\n    }\n  }\n\n  return cookiesStrings\n}\n\n/**\n * Converts a Headers object to a Node.js OutgoingHttpHeaders object. This is\n * required to support the set-cookie header, which may have multiple values.\n *\n * @param headers the headers object to convert\n * @returns the converted headers object\n */\nexport function toNodeOutgoingHttpHeaders(\n  headers: Headers\n): OutgoingHttpHeaders {\n  const nodeHeaders: OutgoingHttpHeaders = {}\n  const cookies: string[] = []\n  if (headers) {\n    for (const [key, value] of headers.entries()) {\n      if (key.toLowerCase() === 'set-cookie') {\n        // We may have gotten a comma joined string of cookies, or multiple\n        // set-cookie headers. We need to merge them into one header array\n        // to represent all the cookies.\n        cookies.push(...splitCookiesString(value))\n        nodeHeaders[key] = cookies.length === 1 ? cookies[0] : cookies\n      } else {\n        nodeHeaders[key] = value\n      }\n    }\n  }\n  return nodeHeaders\n}\n\n/**\n * Validate the correctness of a user-provided URL.\n */\nexport function validateURL(url: string | URL): string {\n  try {\n    return String(new URL(String(url)))\n  } catch (error: any) {\n    throw new Error(\n      `URL is malformed \"${String(\n        url\n      )}\". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,\n      { cause: error }\n    )\n  }\n}\n\n/**\n * Normalizes `nxtP` and `nxtI` query param values to remove the prefix.\n * This function does not mutate the input key.\n */\nexport function normalizeNextQueryParam(key: string): null | string {\n  const prefixes = [NEXT_QUERY_PARAM_PREFIX, NEXT_INTERCEPTION_MARKER_PREFIX]\n  for (const prefix of prefixes) {\n    if (key !== prefix && key.startsWith(prefix)) {\n      return key.substring(prefix.length)\n    }\n  }\n  return null\n}\n","export class PageSignatureError extends Error {\n  constructor({ page }: { page: string }) {\n    super(`The middleware \"${page}\" accepts an async API directly with the form:\n  \n  export function middleware(request, event) {\n    return NextResponse.redirect('/new-location')\n  }\n  \n  Read more: https://nextjs.org/docs/messages/middleware-new-signature\n  `)\n  }\n}\n\nexport class RemovedPageError extends Error {\n  constructor() {\n    super(`The request.page has been deprecated in favour of \\`URLPattern\\`.\n  Read more: https://nextjs.org/docs/messages/middleware-request-page\n  `)\n  }\n}\n\nexport class RemovedUAError extends Error {\n  constructor() {\n    super(`The request.ua has been removed in favour of \\`userAgent\\` function.\n  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  `)\n  }\n}\n","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  RequestCookies: () => RequestCookies,\n  ResponseCookies: () => ResponseCookies,\n  parseCookie: () => parseCookie,\n  parseSetCookie: () => parseSetCookie,\n  stringifyCookie: () => stringifyCookie\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/serialize.ts\nfunction stringifyCookie(c) {\n  var _a;\n  const attrs = [\n    \"path\" in c && c.path && `Path=${c.path}`,\n    \"expires\" in c && (c.expires || c.expires === 0) && `Expires=${(typeof c.expires === \"number\" ? new Date(c.expires) : c.expires).toUTCString()}`,\n    \"maxAge\" in c && typeof c.maxAge === \"number\" && `Max-Age=${c.maxAge}`,\n    \"domain\" in c && c.domain && `Domain=${c.domain}`,\n    \"secure\" in c && c.secure && \"Secure\",\n    \"httpOnly\" in c && c.httpOnly && \"HttpOnly\",\n    \"sameSite\" in c && c.sameSite && `SameSite=${c.sameSite}`,\n    \"partitioned\" in c && c.partitioned && \"Partitioned\",\n    \"priority\" in c && c.priority && `Priority=${c.priority}`\n  ].filter(Boolean);\n  const stringified = `${c.name}=${encodeURIComponent((_a = c.value) != null ? _a : \"\")}`;\n  return attrs.length === 0 ? stringified : `${stringified}; ${attrs.join(\"; \")}`;\n}\nfunction parseCookie(cookie) {\n  const map = /* @__PURE__ */ new Map();\n  for (const pair of cookie.split(/; */)) {\n    if (!pair)\n      continue;\n    const splitAt = pair.indexOf(\"=\");\n    if (splitAt === -1) {\n      map.set(pair, \"true\");\n      continue;\n    }\n    const [key, value] = [pair.slice(0, splitAt), pair.slice(splitAt + 1)];\n    try {\n      map.set(key, decodeURIComponent(value != null ? value : \"true\"));\n    } catch {\n    }\n  }\n  return map;\n}\nfunction parseSetCookie(setCookie) {\n  if (!setCookie) {\n    return void 0;\n  }\n  const [[name, value], ...attributes] = parseCookie(setCookie);\n  const {\n    domain,\n    expires,\n    httponly,\n    maxage,\n    path,\n    samesite,\n    secure,\n    partitioned,\n    priority\n  } = Object.fromEntries(\n    attributes.map(([key, value2]) => [\n      key.toLowerCase().replace(/-/g, \"\"),\n      value2\n    ])\n  );\n  const cookie = {\n    name,\n    value: decodeURIComponent(value),\n    domain,\n    ...expires && { expires: new Date(expires) },\n    ...httponly && { httpOnly: true },\n    ...typeof maxage === \"string\" && { maxAge: Number(maxage) },\n    path,\n    ...samesite && { sameSite: parseSameSite(samesite) },\n    ...secure && { secure: true },\n    ...priority && { priority: parsePriority(priority) },\n    ...partitioned && { partitioned: true }\n  };\n  return compact(cookie);\n}\nfunction compact(t) {\n  const newT = {};\n  for (const key in t) {\n    if (t[key]) {\n      newT[key] = t[key];\n    }\n  }\n  return newT;\n}\nvar SAME_SITE = [\"strict\", \"lax\", \"none\"];\nfunction parseSameSite(string) {\n  string = string.toLowerCase();\n  return SAME_SITE.includes(string) ? string : void 0;\n}\nvar PRIORITY = [\"low\", \"medium\", \"high\"];\nfunction parsePriority(string) {\n  string = string.toLowerCase();\n  return PRIORITY.includes(string) ? string : void 0;\n}\nfunction splitCookiesString(cookiesString) {\n  if (!cookiesString)\n    return [];\n  var cookiesStrings = [];\n  var pos = 0;\n  var start;\n  var ch;\n  var lastComma;\n  var nextStart;\n  var cookiesSeparatorFound;\n  function skipWhitespace() {\n    while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n      pos += 1;\n    }\n    return pos < cookiesString.length;\n  }\n  function notSpecialChar() {\n    ch = cookiesString.charAt(pos);\n    return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n  }\n  while (pos < cookiesString.length) {\n    start = pos;\n    cookiesSeparatorFound = false;\n    while (skipWhitespace()) {\n      ch = cookiesString.charAt(pos);\n      if (ch === \",\") {\n        lastComma = pos;\n        pos += 1;\n        skipWhitespace();\n        nextStart = pos;\n        while (pos < cookiesString.length && notSpecialChar()) {\n          pos += 1;\n        }\n        if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n          cookiesSeparatorFound = true;\n          pos = nextStart;\n          cookiesStrings.push(cookiesString.substring(start, lastComma));\n          start = pos;\n        } else {\n          pos = lastComma + 1;\n        }\n      } else {\n        pos += 1;\n      }\n    }\n    if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n      cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n    }\n  }\n  return cookiesStrings;\n}\n\n// src/request-cookies.ts\nvar RequestCookies = class {\n  constructor(requestHeaders) {\n    /** @internal */\n    this._parsed = /* @__PURE__ */ new Map();\n    this._headers = requestHeaders;\n    const header = requestHeaders.get(\"cookie\");\n    if (header) {\n      const parsed = parseCookie(header);\n      for (const [name, value] of parsed) {\n        this._parsed.set(name, { name, value });\n      }\n    }\n  }\n  [Symbol.iterator]() {\n    return this._parsed[Symbol.iterator]();\n  }\n  /**\n   * The amount of cookies received from the client\n   */\n  get size() {\n    return this._parsed.size;\n  }\n  get(...args) {\n    const name = typeof args[0] === \"string\" ? args[0] : args[0].name;\n    return this._parsed.get(name);\n  }\n  getAll(...args) {\n    var _a;\n    const all = Array.from(this._parsed);\n    if (!args.length) {\n      return all.map(([_, value]) => value);\n    }\n    const name = typeof args[0] === \"string\" ? args[0] : (_a = args[0]) == null ? void 0 : _a.name;\n    return all.filter(([n]) => n === name).map(([_, value]) => value);\n  }\n  has(name) {\n    return this._parsed.has(name);\n  }\n  set(...args) {\n    const [name, value] = args.length === 1 ? [args[0].name, args[0].value] : args;\n    const map = this._parsed;\n    map.set(name, { name, value });\n    this._headers.set(\n      \"cookie\",\n      Array.from(map).map(([_, value2]) => stringifyCookie(value2)).join(\"; \")\n    );\n    return this;\n  }\n  /**\n   * Delete the cookies matching the passed name or names in the request.\n   */\n  delete(names) {\n    const map = this._parsed;\n    const result = !Array.isArray(names) ? map.delete(names) : names.map((name) => map.delete(name));\n    this._headers.set(\n      \"cookie\",\n      Array.from(map).map(([_, value]) => stringifyCookie(value)).join(\"; \")\n    );\n    return result;\n  }\n  /**\n   * Delete all the cookies in the cookies in the request.\n   */\n  clear() {\n    this.delete(Array.from(this._parsed.keys()));\n    return this;\n  }\n  /**\n   * Format the cookies in the request as a string for logging\n   */\n  [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n    return `RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`;\n  }\n  toString() {\n    return [...this._parsed.values()].map((v) => `${v.name}=${encodeURIComponent(v.value)}`).join(\"; \");\n  }\n};\n\n// src/response-cookies.ts\nvar ResponseCookies = class {\n  constructor(responseHeaders) {\n    /** @internal */\n    this._parsed = /* @__PURE__ */ new Map();\n    var _a, _b, _c;\n    this._headers = responseHeaders;\n    const setCookie = (_c = (_b = (_a = responseHeaders.getSetCookie) == null ? void 0 : _a.call(responseHeaders)) != null ? _b : responseHeaders.get(\"set-cookie\")) != null ? _c : [];\n    const cookieStrings = Array.isArray(setCookie) ? setCookie : splitCookiesString(setCookie);\n    for (const cookieString of cookieStrings) {\n      const parsed = parseSetCookie(cookieString);\n      if (parsed)\n        this._parsed.set(parsed.name, parsed);\n    }\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-get CookieStore#get} without the Promise.\n   */\n  get(...args) {\n    const key = typeof args[0] === \"string\" ? args[0] : args[0].name;\n    return this._parsed.get(key);\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-getAll CookieStore#getAll} without the Promise.\n   */\n  getAll(...args) {\n    var _a;\n    const all = Array.from(this._parsed.values());\n    if (!args.length) {\n      return all;\n    }\n    const key = typeof args[0] === \"string\" ? args[0] : (_a = args[0]) == null ? void 0 : _a.name;\n    return all.filter((c) => c.name === key);\n  }\n  has(name) {\n    return this._parsed.has(name);\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-set CookieStore#set} without the Promise.\n   */\n  set(...args) {\n    const [name, value, cookie] = args.length === 1 ? [args[0].name, args[0].value, args[0]] : args;\n    const map = this._parsed;\n    map.set(name, normalizeCookie({ name, value, ...cookie }));\n    replace(map, this._headers);\n    return this;\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-delete CookieStore#delete} without the Promise.\n   */\n  delete(...args) {\n    const [name, options] = typeof args[0] === \"string\" ? [args[0]] : [args[0].name, args[0]];\n    return this.set({ ...options, name, value: \"\", expires: /* @__PURE__ */ new Date(0) });\n  }\n  [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n    return `ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`;\n  }\n  toString() {\n    return [...this._parsed.values()].map(stringifyCookie).join(\"; \");\n  }\n};\nfunction replace(bag, headers) {\n  headers.delete(\"set-cookie\");\n  for (const [, value] of bag) {\n    const serialized = stringifyCookie(value);\n    headers.append(\"set-cookie\", serialized);\n  }\n}\nfunction normalizeCookie(cookie = { name: \"\", value: \"\" }) {\n  if (typeof cookie.expires === \"number\") {\n    cookie.expires = new Date(cookie.expires);\n  }\n  if (cookie.maxAge) {\n    cookie.expires = new Date(Date.now() + cookie.maxAge * 1e3);\n  }\n  if (cookie.path === null || cookie.path === void 0) {\n    cookie.path = \"/\";\n  }\n  return cookie;\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  RequestCookies,\n  ResponseCookies,\n  parseCookie,\n  parseSetCookie,\n  stringifyCookie\n});\n","export {\n  RequestCookies,\n  ResponseCookies,\n  stringifyCookie,\n} from 'next/dist/compiled/@edge-runtime/cookies'\n","import type { I18NConfig } from '../../config-shared'\nimport { NextURL } from '../next-url'\nimport { toNodeOutgoingHttpHeaders, validateURL } from '../utils'\nimport { RemovedUAError, RemovedPageError } from '../error'\nimport { RequestCookies } from './cookies'\n\nexport const INTERNALS = Symbol('internal request')\n\n/**\n * This class extends the [Web `Request` API](https://developer.mozilla.org/docs/Web/API/Request) with additional convenience methods.\n *\n * Read more: [Next.js Docs: `NextRequest`](https://nextjs.org/docs/app/api-reference/functions/next-request)\n */\nexport class NextRequest extends Request {\n  /** @internal */\n  [INTERNALS]: {\n    cookies: RequestCookies\n    url: string\n    nextUrl: NextURL\n  }\n\n  constructor(input: URL | RequestInfo, init: RequestInit = {}) {\n    const url =\n      typeof input !== 'string' && 'url' in input ? input.url : String(input)\n\n    validateURL(url)\n\n    // node Request instance requires duplex option when a body\n    // is present or it errors, we don't handle this for\n    // Request being passed in since it would have already\n    // errored if this wasn't configured\n    if (process.env.NEXT_RUNTIME !== 'edge') {\n      if (init.body && init.duplex !== 'half') {\n        init.duplex = 'half'\n      }\n    }\n\n    if (input instanceof Request) super(input, init)\n    else super(url, init)\n\n    const nextUrl = new NextURL(url, {\n      headers: toNodeOutgoingHttpHeaders(this.headers),\n      nextConfig: init.nextConfig,\n    })\n    this[INTERNALS] = {\n      cookies: new RequestCookies(this.headers),\n      nextUrl,\n      url: process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE\n        ? url\n        : nextUrl.toString(),\n    }\n  }\n\n  [Symbol.for('edge-runtime.inspect.custom')]() {\n    return {\n      cookies: this.cookies,\n      nextUrl: this.nextUrl,\n      url: this.url,\n      // rest of props come from Request\n      bodyUsed: this.bodyUsed,\n      cache: this.cache,\n      credentials: this.credentials,\n      destination: this.destination,\n      headers: Object.fromEntries(this.headers),\n      integrity: this.integrity,\n      keepalive: this.keepalive,\n      method: this.method,\n      mode: this.mode,\n      redirect: this.redirect,\n      referrer: this.referrer,\n      referrerPolicy: this.referrerPolicy,\n      signal: this.signal,\n    }\n  }\n\n  public get cookies() {\n    return this[INTERNALS].cookies\n  }\n\n  public get nextUrl() {\n    return this[INTERNALS].nextUrl\n  }\n\n  /**\n   * @deprecated\n   * `page` has been deprecated in favour of `URLPattern`.\n   * Read more: https://nextjs.org/docs/messages/middleware-request-page\n   */\n  public get page() {\n    throw new RemovedPageError()\n  }\n\n  /**\n   * @deprecated\n   * `ua` has been removed in favour of \\`userAgent\\` function.\n   * Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n   */\n  public get ua() {\n    throw new RemovedUAError()\n  }\n\n  public get url() {\n    return this[INTERNALS].url\n  }\n}\n\nexport interface RequestInit extends globalThis.RequestInit {\n  nextConfig?: {\n    basePath?: string\n    i18n?: I18NConfig | null\n    trailingSlash?: boolean\n  }\n  signal?: AbortSignal\n  // see https://github.com/whatwg/fetch/pull/1457\n  duplex?: 'half'\n}\n","export class ReflectAdapter {\n  static get<T extends object>(\n    target: T,\n    prop: string | symbol,\n    receiver: unknown\n  ): any {\n    const value = Reflect.get(target, prop, receiver)\n    if (typeof value === 'function') {\n      return value.bind(target)\n    }\n\n    return value\n  }\n\n  static set<T extends object>(\n    target: T,\n    prop: string | symbol,\n    value: any,\n    receiver: any\n  ): boolean {\n    return Reflect.set(target, prop, value, receiver)\n  }\n\n  static has<T extends object>(target: T, prop: string | symbol): boolean {\n    return Reflect.has(target, prop)\n  }\n\n  static deleteProperty<T extends object>(\n    target: T,\n    prop: string | symbol\n  ): boolean {\n    return Reflect.deleteProperty(target, prop)\n  }\n}\n","import { stringifyCookie } from '../../web/spec-extension/cookies'\nimport type { I18NConfig } from '../../config-shared'\nimport { NextURL } from '../next-url'\nimport { toNodeOutgoingHttpHeaders, validateURL } from '../utils'\nimport { ReflectAdapter } from './adapters/reflect'\n\nimport { ResponseCookies } from './cookies'\n\nconst INTERNALS = Symbol('internal response')\nconst REDIRECTS = new Set([301, 302, 303, 307, 308])\n\nfunction handleMiddlewareField(\n  init: MiddlewareResponseInit | undefined,\n  headers: Headers\n) {\n  if (init?.request?.headers) {\n    if (!(init.request.headers instanceof Headers)) {\n      throw new Error('request.headers must be an instance of Headers')\n    }\n\n    const keys = []\n    for (const [key, value] of init.request.headers) {\n      headers.set('x-middleware-request-' + key, value)\n      keys.push(key)\n    }\n\n    headers.set('x-middleware-override-headers', keys.join(','))\n  }\n}\n\n/**\n * This class extends the [Web `Response` API](https://developer.mozilla.org/docs/Web/API/Response) with additional convenience methods.\n *\n * Read more: [Next.js Docs: `NextResponse`](https://nextjs.org/docs/app/api-reference/functions/next-response)\n */\nexport class NextResponse<Body = unknown> extends Response {\n  [INTERNALS]: {\n    cookies: ResponseCookies\n    url?: NextURL\n    body?: Body\n  }\n\n  constructor(body?: BodyInit | null, init: ResponseInit = {}) {\n    super(body, init)\n\n    const headers = this.headers\n    const cookies = new ResponseCookies(headers)\n\n    const cookiesProxy = new Proxy(cookies, {\n      get(target, prop, receiver) {\n        switch (prop) {\n          case 'delete':\n          case 'set': {\n            return (...args: [string, string]) => {\n              const result = Reflect.apply(target[prop], target, args)\n              const newHeaders = new Headers(headers)\n\n              if (result instanceof ResponseCookies) {\n                headers.set(\n                  'x-middleware-set-cookie',\n                  result\n                    .getAll()\n                    .map((cookie) => stringifyCookie(cookie))\n                    .join(',')\n                )\n              }\n\n              handleMiddlewareField(init, newHeaders)\n              return result\n            }\n          }\n          default:\n            return ReflectAdapter.get(target, prop, receiver)\n        }\n      },\n    })\n\n    this[INTERNALS] = {\n      cookies: cookiesProxy,\n      url: init.url\n        ? new NextURL(init.url, {\n            headers: toNodeOutgoingHttpHeaders(headers),\n            nextConfig: init.nextConfig,\n          })\n        : undefined,\n    }\n  }\n\n  [Symbol.for('edge-runtime.inspect.custom')]() {\n    return {\n      cookies: this.cookies,\n      url: this.url,\n      // rest of props come from Response\n      body: this.body,\n      bodyUsed: this.bodyUsed,\n      headers: Object.fromEntries(this.headers),\n      ok: this.ok,\n      redirected: this.redirected,\n      status: this.status,\n      statusText: this.statusText,\n      type: this.type,\n    }\n  }\n\n  public get cookies() {\n    return this[INTERNALS].cookies\n  }\n\n  static json<JsonBody>(\n    body: JsonBody,\n    init?: ResponseInit\n  ): NextResponse<JsonBody> {\n    const response: Response = Response.json(body, init)\n    return new NextResponse(response.body, response)\n  }\n\n  static redirect(url: string | NextURL | URL, init?: number | ResponseInit) {\n    const status = typeof init === 'number' ? init : init?.status ?? 307\n    if (!REDIRECTS.has(status)) {\n      throw new RangeError(\n        'Failed to execute \"redirect\" on \"response\": Invalid status code'\n      )\n    }\n    const initObj = typeof init === 'object' ? init : {}\n    const headers = new Headers(initObj?.headers)\n    headers.set('Location', validateURL(url))\n\n    return new NextResponse(null, {\n      ...initObj,\n      headers,\n      status,\n    })\n  }\n\n  static rewrite(\n    destination: string | NextURL | URL,\n    init?: MiddlewareResponseInit\n  ) {\n    const headers = new Headers(init?.headers)\n    headers.set('x-middleware-rewrite', validateURL(destination))\n\n    handleMiddlewareField(init, headers)\n    return new NextResponse(null, { ...init, headers })\n  }\n\n  static next(init?: MiddlewareResponseInit) {\n    const headers = new Headers(init?.headers)\n    headers.set('x-middleware-next', '1')\n\n    handleMiddlewareField(init, headers)\n    return new NextResponse(null, { ...init, headers })\n  }\n}\n\ninterface ResponseInit extends globalThis.ResponseInit {\n  nextConfig?: {\n    basePath?: string\n    i18n?: I18NConfig\n    trailingSlash?: boolean\n  }\n  url?: string\n}\n\ninterface ModifiedRequest {\n  /**\n   * If this is set, the request headers will be overridden with this value.\n   */\n  headers?: Headers\n}\n\ninterface MiddlewareResponseInit extends globalThis.ResponseInit {\n  /**\n   * These fields will override the request from clients.\n   */\n  request?: ModifiedRequest\n}\n","/**\n * @deprecated ImageResponse moved from \"next/server\" to \"next/og\" since Next.js 14, please import from \"next/og\" instead.\n * Migration with codemods: https://nextjs.org/docs/app/building-your-application/upgrading/codemods#next-og-import\n */\nexport function ImageResponse(): never {\n  throw new Error(\n    'ImageResponse moved from \"next/server\" to \"next/og\" since Next.js 14, please import from \"next/og\" instead'\n  )\n}\n","(()=>{var i={226:function(i,e){(function(o,a){\"use strict\";var r=\"1.0.35\",t=\"\",n=\"?\",s=\"function\",b=\"undefined\",w=\"object\",l=\"string\",d=\"major\",c=\"model\",u=\"name\",p=\"type\",m=\"vendor\",f=\"version\",h=\"architecture\",v=\"console\",g=\"mobile\",k=\"tablet\",x=\"smarttv\",_=\"wearable\",y=\"embedded\",q=350;var T=\"Amazon\",S=\"Apple\",z=\"ASUS\",N=\"BlackBerry\",A=\"Browser\",C=\"Chrome\",E=\"Edge\",O=\"Firefox\",U=\"Google\",j=\"Huawei\",P=\"LG\",R=\"Microsoft\",M=\"Motorola\",B=\"Opera\",V=\"Samsung\",D=\"Sharp\",I=\"Sony\",W=\"Viera\",F=\"Xiaomi\",G=\"Zebra\",H=\"Facebook\",L=\"Chromium OS\",Z=\"Mac OS\";var extend=function(i,e){var o={};for(var a in i){if(e[a]&&e[a].length%2===0){o[a]=e[a].concat(i[a])}else{o[a]=i[a]}}return o},enumerize=function(i){var e={};for(var o=0;o<i.length;o++){e[i[o].toUpperCase()]=i[o]}return e},has=function(i,e){return typeof i===l?lowerize(e).indexOf(lowerize(i))!==-1:false},lowerize=function(i){return i.toLowerCase()},majorize=function(i){return typeof i===l?i.replace(/[^\\d\\.]/g,t).split(\".\")[0]:a},trim=function(i,e){if(typeof i===l){i=i.replace(/^\\s\\s*/,t);return typeof e===b?i:i.substring(0,q)}};var rgxMapper=function(i,e){var o=0,r,t,n,b,l,d;while(o<e.length&&!l){var c=e[o],u=e[o+1];r=t=0;while(r<c.length&&!l){if(!c[r]){break}l=c[r++].exec(i);if(!!l){for(n=0;n<u.length;n++){d=l[++t];b=u[n];if(typeof b===w&&b.length>0){if(b.length===2){if(typeof b[1]==s){this[b[0]]=b[1].call(this,d)}else{this[b[0]]=b[1]}}else if(b.length===3){if(typeof b[1]===s&&!(b[1].exec&&b[1].test)){this[b[0]]=d?b[1].call(this,d,b[2]):a}else{this[b[0]]=d?d.replace(b[1],b[2]):a}}else if(b.length===4){this[b[0]]=d?b[3].call(this,d.replace(b[1],b[2])):a}}else{this[b]=d?d:a}}}}o+=2}},strMapper=function(i,e){for(var o in e){if(typeof e[o]===w&&e[o].length>0){for(var r=0;r<e[o].length;r++){if(has(e[o][r],i)){return o===n?a:o}}}else if(has(e[o],i)){return o===n?a:o}}return i};var $={\"1.0\":\"/8\",1.2:\"/1\",1.3:\"/3\",\"2.0\":\"/412\",\"2.0.2\":\"/416\",\"2.0.3\":\"/417\",\"2.0.4\":\"/419\",\"?\":\"/\"},X={ME:\"4.90\",\"NT 3.11\":\"NT3.51\",\"NT 4.0\":\"NT4.0\",2e3:\"NT 5.0\",XP:[\"NT 5.1\",\"NT 5.2\"],Vista:\"NT 6.0\",7:\"NT 6.1\",8:\"NT 6.2\",8.1:\"NT 6.3\",10:[\"NT 6.4\",\"NT 10.0\"],RT:\"ARM\"};var K={browser:[[/\\b(?:crmo|crios)\\/([\\w\\.]+)/i],[f,[u,\"Chrome\"]],[/edg(?:e|ios|a)?\\/([\\w\\.]+)/i],[f,[u,\"Edge\"]],[/(opera mini)\\/([-\\w\\.]+)/i,/(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,/(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i],[u,f],[/opios[\\/ ]+([\\w\\.]+)/i],[f,[u,B+\" Mini\"]],[/\\bopr\\/([\\w\\.]+)/i],[f,[u,B]],[/(kindle)\\/([\\w\\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,/(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,/(?:ms|\\()(ie) ([\\w\\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,/(heytap|ovi)browser\\/([\\d\\.]+)/i,/(weibo)__([\\d\\.]+)/i],[u,f],[/(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i],[f,[u,\"UC\"+A]],[/microm.+\\bqbcore\\/([\\w\\.]+)/i,/\\bqbcore\\/([\\w\\.]+).+microm/i],[f,[u,\"WeChat(Win) Desktop\"]],[/micromessenger\\/([\\w\\.]+)/i],[f,[u,\"WeChat\"]],[/konqueror\\/([\\w\\.]+)/i],[f,[u,\"Konqueror\"]],[/trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i],[f,[u,\"IE\"]],[/ya(?:search)?browser\\/([\\w\\.]+)/i],[f,[u,\"Yandex\"]],[/(avast|avg)\\/([\\w\\.]+)/i],[[u,/(.+)/,\"$1 Secure \"+A],f],[/\\bfocus\\/([\\w\\.]+)/i],[f,[u,O+\" Focus\"]],[/\\bopt\\/([\\w\\.]+)/i],[f,[u,B+\" Touch\"]],[/coc_coc\\w+\\/([\\w\\.]+)/i],[f,[u,\"Coc Coc\"]],[/dolfin\\/([\\w\\.]+)/i],[f,[u,\"Dolphin\"]],[/coast\\/([\\w\\.]+)/i],[f,[u,B+\" Coast\"]],[/miuibrowser\\/([\\w\\.]+)/i],[f,[u,\"MIUI \"+A]],[/fxios\\/([-\\w\\.]+)/i],[f,[u,O]],[/\\bqihu|(qi?ho?o?|360)browser/i],[[u,\"360 \"+A]],[/(oculus|samsung|sailfish|huawei)browser\\/([\\w\\.]+)/i],[[u,/(.+)/,\"$1 \"+A],f],[/(comodo_dragon)\\/([\\w\\.]+)/i],[[u,/_/g,\" \"],f],[/(electron)\\/([\\w\\.]+) safari/i,/(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i],[u,f],[/(metasr)[\\/ ]?([\\w\\.]+)/i,/(lbbrowser)/i,/\\[(linkedin)app\\]/i],[u],[/((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i],[[u,H],f],[/(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,/(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,/safari (line)\\/([\\w\\.]+)/i,/\\b(line)\\/([\\w\\.]+)\\/iab/i,/(chromium|instagram)[\\/ ]([-\\w\\.]+)/i],[u,f],[/\\bgsa\\/([\\w\\.]+) .*safari\\//i],[f,[u,\"GSA\"]],[/musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i],[f,[u,\"TikTok\"]],[/headlesschrome(?:\\/([\\w\\.]+)| )/i],[f,[u,C+\" Headless\"]],[/ wv\\).+(chrome)\\/([\\w\\.]+)/i],[[u,C+\" WebView\"],f],[/droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i],[f,[u,\"Android \"+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i],[u,f],[/version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i],[f,[u,\"Mobile Safari\"]],[/version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i],[f,u],[/webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i],[u,[f,strMapper,$]],[/(webkit|khtml)\\/([\\w\\.]+)/i],[u,f],[/(navigator|netscape\\d?)\\/([-\\w\\.]+)/i],[[u,\"Netscape\"],f],[/mobile vr; rv:([\\w\\.]+)\\).+firefox/i],[f,[u,O+\" Reality\"]],[/ekiohf.+(flow)\\/([\\w\\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,/(firefox)\\/([\\w\\.]+)/i,/(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,/(links) \\(([\\w\\.]+)/i,/panasonic;(viera)/i],[u,f],[/(cobalt)\\/([\\w\\.]+)/i],[u,[f,/master.|lts./,\"\"]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i],[[h,\"amd64\"]],[/(ia32(?=;))/i],[[h,lowerize]],[/((?:i[346]|x)86)[;\\)]/i],[[h,\"ia32\"]],[/\\b(aarch64|arm(v?8e?l?|_?64))\\b/i],[[h,\"arm64\"]],[/\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i],[[h,\"armhf\"]],[/windows (ce|mobile); ppc;/i],[[h,\"arm\"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i],[[h,/ower/,t,lowerize]],[/(sun4\\w)[;\\)]/i],[[h,\"sparc\"]],[/((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i],[[h,lowerize]]],device:[[/\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[m,V],[p,k]],[/\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,/samsung[- ]([-\\w]+)/i,/sec-(sgh\\w+)/i],[c,[m,V],[p,g]],[/(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i],[c,[m,S],[p,g]],[/\\((ipad);[-\\w\\),; ]+apple/i,/applecoremedia\\/[\\w\\.]+ \\((ipad)/i,/\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i],[c,[m,S],[p,k]],[/(macintosh);/i],[c,[m,S]],[/\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i],[c,[m,D],[p,g]],[/\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i],[c,[m,j],[p,k]],[/(?:huawei|honor)([-\\w ]+)[;\\)]/i,/\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i],[c,[m,j],[p,g]],[/\\b(poco[\\w ]+)(?: bui|\\))/i,/\\b; (\\w+) build\\/hm\\1/i,/\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,/\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,/\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i],[[c,/_/g,\" \"],[m,F],[p,g]],[/\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i],[[c,/_/g,\" \"],[m,F],[p,k]],[/; (\\w+) bui.+ oppo/i,/\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i],[c,[m,\"OPPO\"],[p,g]],[/vivo (\\w+)(?: bui|\\))/i,/\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i],[c,[m,\"Vivo\"],[p,g]],[/\\b(rmx[12]\\d{3})(?: bui|;|\\))/i],[c,[m,\"Realme\"],[p,g]],[/\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,/\\bmot(?:orola)?[- ](\\w*)/i,/((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i],[c,[m,M],[p,g]],[/\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i],[c,[m,M],[p,k]],[/((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[m,P],[p,k]],[/(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,/\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,/\\blg-?([\\d\\w]+) bui/i],[c,[m,P],[p,g]],[/(ideatab[-\\w ]+)/i,/lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i],[c,[m,\"Lenovo\"],[p,k]],[/(?:maemo|nokia).*(n900|lumia \\d+)/i,/nokia[-_ ]?([-\\w\\.]*)/i],[[c,/_/g,\" \"],[m,\"Nokia\"],[p,g]],[/(pixel c)\\b/i],[c,[m,U],[p,k]],[/droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i],[c,[m,U],[p,g]],[/droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i],[c,[m,I],[p,g]],[/sony tablet [ps]/i,/\\b(?:sony)?sgp\\w+(?: bui|\\))/i],[[c,\"Xperia Tablet\"],[m,I],[p,k]],[/ (kb2005|in20[12]5|be20[12][59])\\b/i,/(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i],[c,[m,\"OnePlus\"],[p,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\\))/i,/(kf[a-z]+)( bui|\\)).+silk\\//i],[c,[m,T],[p,k]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i],[[c,/(.+)/g,\"Fire Phone $1\"],[m,T],[p,g]],[/(playbook);[-\\w\\),; ]+(rim)/i],[c,m,[p,k]],[/\\b((?:bb[a-f]|st[hv])100-\\d)/i,/\\(bb10; (\\w+)/i],[c,[m,N],[p,g]],[/(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i],[c,[m,z],[p,k]],[/ (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i],[c,[m,z],[p,g]],[/(nexus 9)/i],[c,[m,\"HTC\"],[p,k]],[/(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,/(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i],[m,[c,/_/g,\" \"],[p,g]],[/droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i],[c,[m,\"Acer\"],[p,k]],[/droid.+; (m[1-5] note) bui/i,/\\bmz-([-\\w]{2,})/i],[c,[m,\"Meizu\"],[p,g]],[/(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,/(hp) ([\\w ]+\\w)/i,/(asus)-?(\\w+)/i,/(microsoft); (lumia[\\w ]+)/i,/(lenovo)[-_ ]?([-\\w]+)/i,/(jolla)/i,/(oppo) ?([\\w ]+) bui/i],[m,c,[p,g]],[/(kobo)\\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\\/([\\w\\.]+)/i,/(nook)[\\w ]+build\\/(\\w+)/i,/(dell) (strea[kpr\\d ]*[\\dko])/i,/(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,/(trinity)[- ]*(t\\d{3}) bui/i,/(gigaset)[- ]+(q\\w{1,9}) bui/i,/(vodafone) ([\\w ]+)(?:\\)| bui)/i],[m,c,[p,k]],[/(surface duo)/i],[c,[m,R],[p,k]],[/droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i],[c,[m,\"Fairphone\"],[p,g]],[/(u304aa)/i],[c,[m,\"AT&T\"],[p,g]],[/\\bsie-(\\w*)/i],[c,[m,\"Siemens\"],[p,g]],[/\\b(rct\\w+) b/i],[c,[m,\"RCA\"],[p,k]],[/\\b(venue[\\d ]{2,7}) b/i],[c,[m,\"Dell\"],[p,k]],[/\\b(q(?:mv|ta)\\w+) b/i],[c,[m,\"Verizon\"],[p,k]],[/\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i],[c,[m,\"Barnes & Noble\"],[p,k]],[/\\b(tm\\d{3}\\w+) b/i],[c,[m,\"NuVision\"],[p,k]],[/\\b(k88) b/i],[c,[m,\"ZTE\"],[p,k]],[/\\b(nx\\d{3}j) b/i],[c,[m,\"ZTE\"],[p,g]],[/\\b(gen\\d{3}) b.+49h/i],[c,[m,\"Swiss\"],[p,g]],[/\\b(zur\\d{3}) b/i],[c,[m,\"Swiss\"],[p,k]],[/\\b((zeki)?tb.*\\b) b/i],[c,[m,\"Zeki\"],[p,k]],[/\\b([yr]\\d{2}) b/i,/\\b(dragon[- ]+touch |dt)(\\w{5}) b/i],[[m,\"Dragon Touch\"],c,[p,k]],[/\\b(ns-?\\w{0,9}) b/i],[c,[m,\"Insignia\"],[p,k]],[/\\b((nxa|next)-?\\w{0,9}) b/i],[c,[m,\"NextBook\"],[p,k]],[/\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,\"Voice\"],c,[p,g]],[/\\b(lvtel\\-)?(v1[12]) b/i],[[m,\"LvTel\"],c,[p,g]],[/\\b(ph-1) /i],[c,[m,\"Essential\"],[p,g]],[/\\b(v(100md|700na|7011|917g).*\\b) b/i],[c,[m,\"Envizen\"],[p,k]],[/\\b(trio[-\\w\\. ]+) b/i],[c,[m,\"MachSpeed\"],[p,k]],[/\\btu_(1491) b/i],[c,[m,\"Rotor\"],[p,k]],[/(shield[\\w ]+) b/i],[c,[m,\"Nvidia\"],[p,k]],[/(sprint) (\\w+)/i],[m,c,[p,g]],[/(kin\\.[onetw]{3})/i],[[c,/\\./g,\" \"],[m,R],[p,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i],[c,[m,G],[p,k]],[/droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i],[c,[m,G],[p,g]],[/smart-tv.+(samsung)/i],[m,[p,x]],[/hbbtv.+maple;(\\d+)/i],[[c,/^/,\"SmartTV\"],[m,V],[p,x]],[/(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i],[[m,P],[p,x]],[/(apple) ?tv/i],[m,[c,S+\" TV\"],[p,x]],[/crkey/i],[[c,C+\"cast\"],[m,U],[p,x]],[/droid.+aft(\\w)( bui|\\))/i],[c,[m,T],[p,x]],[/\\(dtv[\\);].+(aquos)/i,/(aquos-tv[\\w ]+)\\)/i],[c,[m,D],[p,x]],[/(bravia[\\w ]+)( bui|\\))/i],[c,[m,I],[p,x]],[/(mitv-\\w{5}) bui/i],[c,[m,F],[p,x]],[/Hbbtv.*(technisat) (.*);/i],[m,c,[p,x]],[/\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,/hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i],[[m,trim],[c,trim],[p,x]],[/\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i],[[p,x]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,c,[p,v]],[/droid.+; (shield) bui/i],[c,[m,\"Nvidia\"],[p,v]],[/(playstation [345portablevi]+)/i],[c,[m,I],[p,v]],[/\\b(xbox(?: one)?(?!; xbox))[\\); ]/i],[c,[m,R],[p,v]],[/((pebble))app/i],[m,c,[p,_]],[/(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i],[c,[m,S],[p,_]],[/droid.+; (glass) \\d/i],[c,[m,U],[p,_]],[/droid.+; (wt63?0{2,3})\\)/i],[c,[m,G],[p,_]],[/(quest( 2| pro)?)/i],[c,[m,H],[p,_]],[/(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i],[m,[p,y]],[/(aeobc)\\b/i],[c,[m,T],[p,y]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i],[c,[p,g]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i],[c,[p,k]],[/\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i],[[p,k]],[/(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i],[[p,g]],[/(android[-\\w\\. ]{0,9});.+buil/i],[c,[m,\"Generic\"]]],engine:[[/windows.+ edge\\/([\\w\\.]+)/i],[f,[u,E+\"HTML\"]],[/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i],[f,[u,\"Blink\"]],[/(presto)\\/([\\w\\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i,/ekioh(flow)\\/([\\w\\.]+)/i,/(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,/(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,/\\b(libweb)/i],[u,f],[/rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i],[f,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,f],[/(windows) nt 6\\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,/(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i],[u,[f,strMapper,X]],[/(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i],[[u,\"Windows\"],[f,strMapper,X]],[/ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,/ios;fbsv\\/([\\d\\.]+)/i,/cfnetwork\\/.+darwin/i],[[f,/_/g,\".\"],[u,\"iOS\"]],[/(mac os x) ?([\\w\\. ]*)/i,/(macintosh|mac_powerpc\\b)(?!.+haiku)/i],[[u,Z],[f,/_/g,\".\"]],[/droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i],[f,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,/(blackberry)\\w*\\/([\\w\\.]*)/i,/(tizen|kaios)[\\/ ]([\\w\\.]+)/i,/\\((series40);/i],[u,f],[/\\(bb(10);/i],[f,[u,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i],[f,[u,\"Symbian\"]],[/mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i],[f,[u,O+\" OS\"]],[/web0s;.+rt(tv)/i,/\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i],[f,[u,\"webOS\"]],[/watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i],[f,[u,\"watchOS\"]],[/crkey\\/([\\d\\.]+)/i],[f,[u,C+\"cast\"]],[/(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i],[[u,L],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\\/(\\d+\\.[\\w\\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\\);]+)/i,/\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,/(mint)[\\/\\(\\) ]?(\\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,/(hurd|linux) ?([\\w\\.]*)/i,/(gnu) ?([\\w\\.]*)/i,/\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i,/(haiku) (\\w+)/i],[u,f],[/(sunos) ?([\\w\\.\\d]*)/i],[[u,\"Solaris\"],f],[/((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,/(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,/\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\\w\\.]*)/i],[u,f]]};var UAParser=function(i,e){if(typeof i===w){e=i;i=a}if(!(this instanceof UAParser)){return new UAParser(i,e).getResult()}var r=typeof o!==b&&o.navigator?o.navigator:a;var n=i||(r&&r.userAgent?r.userAgent:t);var v=r&&r.userAgentData?r.userAgentData:a;var x=e?extend(K,e):K;var _=r&&r.userAgent==n;this.getBrowser=function(){var i={};i[u]=a;i[f]=a;rgxMapper.call(i,n,x.browser);i[d]=majorize(i[f]);if(_&&r&&r.brave&&typeof r.brave.isBrave==s){i[u]=\"Brave\"}return i};this.getCPU=function(){var i={};i[h]=a;rgxMapper.call(i,n,x.cpu);return i};this.getDevice=function(){var i={};i[m]=a;i[c]=a;i[p]=a;rgxMapper.call(i,n,x.device);if(_&&!i[p]&&v&&v.mobile){i[p]=g}if(_&&i[c]==\"Macintosh\"&&r&&typeof r.standalone!==b&&r.maxTouchPoints&&r.maxTouchPoints>2){i[c]=\"iPad\";i[p]=k}return i};this.getEngine=function(){var i={};i[u]=a;i[f]=a;rgxMapper.call(i,n,x.engine);return i};this.getOS=function(){var i={};i[u]=a;i[f]=a;rgxMapper.call(i,n,x.os);if(_&&!i[u]&&v&&v.platform!=\"Unknown\"){i[u]=v.platform.replace(/chrome os/i,L).replace(/macos/i,Z)}return i};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return n};this.setUA=function(i){n=typeof i===l&&i.length>q?trim(i,q):i;return this};this.setUA(n);return this};UAParser.VERSION=r;UAParser.BROWSER=enumerize([u,f,d]);UAParser.CPU=enumerize([h]);UAParser.DEVICE=enumerize([c,m,p,v,g,x,k,_,y]);UAParser.ENGINE=UAParser.OS=enumerize([u,f]);if(typeof e!==b){if(\"object\"!==b&&i.exports){e=i.exports=UAParser}e.UAParser=UAParser}else{if(typeof define===s&&define.amd){define((function(){return UAParser}))}else if(typeof o!==b){o.UAParser=UAParser}}var Q=typeof o!==b&&(o.jQuery||o.Zepto);if(Q&&!Q.ua){var Y=new UAParser;Q.ua=Y.getResult();Q.ua.get=function(){return Y.getUA()};Q.ua.set=function(i){Y.setUA(i);var e=Y.getResult();for(var o in e){Q.ua[o]=e[o]}}}})(typeof window===\"object\"?window:this)}};var e={};function __nccwpck_require__(o){var a=e[o];if(a!==undefined){return a.exports}var r=e[o]={exports:{}};var t=true;try{i[o].call(r.exports,r,r.exports,__nccwpck_require__);t=false}finally{if(t)delete e[o]}return r.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var o=__nccwpck_require__(226);module.exports=o})();","import parseua from 'next/dist/compiled/ua-parser-js'\n\ninterface UserAgent {\n  isBot: boolean\n  ua: string\n  browser: {\n    name?: string\n    version?: string\n    major?: string\n  }\n  device: {\n    model?: string\n    type?: string\n    vendor?: string\n  }\n  engine: {\n    name?: string\n    version?: string\n  }\n  os: {\n    name?: string\n    version?: string\n  }\n  cpu: {\n    architecture?: string\n  }\n}\n\nexport function isBot(input: string): boolean {\n  return /Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(\n    input\n  )\n}\n\nexport function userAgentFromString(input: string | undefined): UserAgent {\n  return {\n    ...parseua(input),\n    isBot: input === undefined ? false : isBot(input),\n  }\n}\n\nexport function userAgent({ headers }: { headers: Headers }): UserAgent {\n  return userAgentFromString(headers.get('user-agent') || undefined)\n}\n","const GlobalURLPattern =\n  // @ts-expect-error: URLPattern is not available in Node.js\n  typeof URLPattern === 'undefined' ? undefined : URLPattern\n\nexport { GlobalURLPattern as URLPattern }\n","import type { AsyncLocalStorage } from 'async_hooks'\n\nconst sharedAsyncLocalStorageNotAvailableError = new Error(\n  'Invariant: AsyncLocalStorage accessed in runtime where it is not available'\n)\n\nclass FakeAsyncLocalStorage<Store extends {}>\n  implements AsyncLocalStorage<Store>\n{\n  disable(): void {\n    throw sharedAsyncLocalStorageNotAvailableError\n  }\n\n  getStore(): Store | undefined {\n    // This fake implementation of AsyncLocalStorage always returns `undefined`.\n    return undefined\n  }\n\n  run<R>(): R {\n    throw sharedAsyncLocalStorageNotAvailableError\n  }\n\n  exit<R>(): R {\n    throw sharedAsyncLocalStorageNotAvailableError\n  }\n\n  enterWith(): void {\n    throw sharedAsyncLocalStorageNotAvailableError\n  }\n\n  static bind<T>(fn: T): T {\n    return fn\n  }\n}\n\nconst maybeGlobalAsyncLocalStorage =\n  typeof globalThis !== 'undefined' && (globalThis as any).AsyncLocalStorage\n\nexport function createAsyncLocalStorage<\n  Store extends {},\n>(): AsyncLocalStorage<Store> {\n  if (maybeGlobalAsyncLocalStorage) {\n    return new maybeGlobalAsyncLocalStorage()\n  }\n  return new FakeAsyncLocalStorage()\n}\n\nexport function bindSnapshot<T>(fn: T): T {\n  if (maybeGlobalAsyncLocalStorage) {\n    return maybeGlobalAsyncLocalStorage.bind(fn)\n  }\n  return FakeAsyncLocalStorage.bind(fn)\n}\n\nexport function createSnapshot(): <R, TArgs extends any[]>(\n  fn: (...args: TArgs) => R,\n  ...args: TArgs\n) => R {\n  if (maybeGlobalAsyncLocalStorage) {\n    return maybeGlobalAsyncLocalStorage.snapshot()\n  }\n  return function (fn: any, ...args: any[]) {\n    return fn(...args)\n  }\n}\n","import type { WorkAsyncStorage } from './work-async-storage.external'\nimport { createAsyncLocalStorage } from './async-local-storage'\n\nexport const workAsyncStorageInstance: WorkAsyncStorage =\n  createAsyncLocalStorage()\n","import type { AsyncLocalStorage } from 'async_hooks'\nimport type { IncrementalCache } from '../lib/incremental-cache'\nimport type { FetchMetrics } from '../base-http'\nimport type { DeepReadonly } from '../../shared/lib/deep-readonly'\nimport type { AppSegmentConfig } from '../../build/segment-config/app/app-segment-config'\nimport type { AfterContext } from '../after/after-context'\nimport type { CacheLife } from '../use-cache/cache-life'\n\n// Share the instance module in the next-shared layer\nimport { workAsyncStorageInstance } from './work-async-storage-instance' with { 'turbopack-transition': 'next-shared' }\nimport type { LazyResult } from '../lib/lazy-result'\n\nexport interface WorkStore {\n  readonly isStaticGeneration: boolean\n\n  /**\n   * The page that is being rendered. This relates to the path to the page file.\n   */\n  readonly page: string\n\n  /**\n   * The route that is being rendered. This is the page property without the\n   * trailing `/page` or `/route` suffix.\n   */\n  readonly route: string\n\n  readonly incrementalCache?: IncrementalCache\n  readonly cacheLifeProfiles?: { [profile: string]: CacheLife }\n\n  readonly isOnDemandRevalidate?: boolean\n  readonly isBuildTimePrerendering?: boolean\n\n  /**\n   * This is true when:\n   * - source maps are generated\n   * - source maps are applied\n   * - minification is disabled\n   */\n  readonly hasReadableErrorStacks?: boolean\n\n  readonly isRevalidate?: boolean\n\n  forceDynamic?: boolean\n  fetchCache?: AppSegmentConfig['fetchCache']\n\n  forceStatic?: boolean\n  dynamicShouldError?: boolean\n  pendingRevalidates?: Record<string, Promise<any>>\n  pendingRevalidateWrites?: Array<Promise<void>> // This is like pendingRevalidates but isn't used for deduping.\n  readonly afterContext: AfterContext\n\n  dynamicUsageDescription?: string\n  dynamicUsageStack?: string\n\n  /**\n   * Invalid dynamic usage errors might be caught in userland. We attach them to\n   * the work store to ensure we can still fail the build, or show en error in\n   * dev mode.\n   */\n  // TODO: Collect an array of errors, and throw as AggregateError when\n  // `serializeError` and the Dev Overlay support it.\n  invalidDynamicUsageError?: Error\n\n  nextFetchId?: number\n  pathWasRevalidated?: boolean\n\n  /**\n   * Tags that were revalidated during the current request. They need to be sent\n   * to cache handlers to propagate their revalidation.\n   */\n  pendingRevalidatedTags?: string[]\n\n  /**\n   * Tags that were previously revalidated (e.g. by a redirecting server action)\n   * and have already been sent to cache handlers. Retrieved cache entries that\n   * include any of these tags must be discarded.\n   */\n  readonly previouslyRevalidatedTags: readonly string[]\n\n  /**\n   * This map contains lazy results so that we can evaluate them when the first\n   * cache entry is read. It allows us to skip refreshing tags if no caches are\n   * read at all.\n   */\n  readonly refreshTagsByCacheKind: Map<string, LazyResult<void>>\n\n  fetchMetrics?: FetchMetrics\n  shouldTrackFetchMetrics: boolean\n\n  isDraftMode?: boolean\n  isUnstableNoStore?: boolean\n  isPrefetchRequest?: boolean\n\n  buildId: string\n\n  readonly reactLoadableManifest?: DeepReadonly<\n    Record<string, { files: string[] }>\n  >\n  readonly assetPrefix?: string\n\n  cacheComponentsEnabled: boolean\n  dev: boolean\n\n  /**\n   * Run the given function inside a clean AsyncLocalStorage snapshot. This is\n   * useful when generating cache entries, to ensure that the cache generation\n   * cannot read anything from the context we're currently executing in, which\n   * might include request-specific things like `cookies()` inside a\n   * `React.cache()`.\n   */\n  runInCleanSnapshot: <R, TArgs extends any[]>(\n    fn: (...args: TArgs) => R,\n    ...args: TArgs\n  ) => R\n}\n\nexport type WorkAsyncStorage = AsyncLocalStorage<WorkStore>\n\nexport { workAsyncStorageInstance as workAsyncStorage }\n","import { workAsyncStorage } from '../app-render/work-async-storage.external'\n\nexport type AfterTask<T = unknown> = Promise<T> | AfterCallback<T>\nexport type AfterCallback<T = unknown> = () => T | Promise<T>\n\n/**\n * This function allows you to schedule callbacks to be executed after the current request finishes.\n */\nexport function after<T>(task: AfterTask<T>): void {\n  const workStore = workAsyncStorage.getStore()\n\n  if (!workStore) {\n    // TODO(after): the linked docs page talks about *dynamic* APIs, which after soon won't be anymore\n    throw new Error(\n      '`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context'\n    )\n  }\n\n  const { afterContext } = workStore\n  return afterContext.after(task)\n}\n","export * from './after'\n","import { createAsyncLocalStorage } from './async-local-storage'\nimport type { WorkUnitAsyncStorage } from './work-unit-async-storage.external'\n\nexport const workUnitAsyncStorageInstance: WorkUnitAsyncStorage =\n  createAsyncLocalStorage()\n","export const RSC_HEADER = 'rsc' as const\nexport const ACTION_HEADER = 'next-action' as const\n// TODO: Instead of sending the full router state, we only need to send the\n// segment path. Saves bytes. Then we could also use this field for segment\n// prefetches, which also need to specify a particular segment.\nexport const NEXT_ROUTER_STATE_TREE_HEADER = 'next-router-state-tree' as const\nexport const NEXT_ROUTER_PREFETCH_HEADER = 'next-router-prefetch' as const\n// This contains the path to the segment being prefetched.\n// TODO: If we change next-router-state-tree to be a segment path, we can use\n// that instead. Then next-router-prefetch and next-router-segment-prefetch can\n// be merged into a single enum.\nexport const NEXT_ROUTER_SEGMENT_PREFETCH_HEADER =\n  'next-router-segment-prefetch' as const\nexport const NEXT_HMR_REFRESH_HEADER = 'next-hmr-refresh' as const\nexport const NEXT_HMR_REFRESH_HASH_COOKIE = '__next_hmr_refresh_hash__' as const\nexport const NEXT_URL = 'next-url' as const\nexport const RSC_CONTENT_TYPE_HEADER = 'text/x-component' as const\n\nexport const FLIGHT_HEADERS = [\n  RSC_HEADER,\n  NEXT_ROUTER_STATE_TREE_HEADER,\n  NEXT_ROUTER_PREFETCH_HEADER,\n  NEXT_HMR_REFRESH_HEADER,\n  NEXT_ROUTER_SEGMENT_PREFETCH_HEADER,\n] as const\n\nexport const NEXT_RSC_UNION_QUERY = '_rsc' as const\n\nexport const NEXT_ROUTER_STALE_TIME_HEADER = 'x-nextjs-stale-time' as const\nexport const NEXT_DID_POSTPONE_HEADER = 'x-nextjs-postponed' as const\nexport const NEXT_REWRITTEN_PATH_HEADER = 'x-nextjs-rewritten-path' as const\nexport const NEXT_REWRITTEN_QUERY_HEADER = 'x-nextjs-rewritten-query' as const\nexport const NEXT_IS_PRERENDER_HEADER = 'x-nextjs-prerender' as const\nexport const NEXT_ACTION_NOT_FOUND_HEADER = 'x-nextjs-action-not-found' as const\n","export class InvariantError extends Error {\n  constructor(message: string, options?: ErrorOptions) {\n    super(\n      `Invariant: ${message.endsWith('.') ? message : message + '.'} This is a bug in Next.js.`,\n      options\n    )\n    this.name = 'InvariantError'\n  }\n}\n","import type { AsyncLocalStorage } from 'async_hooks'\nimport type { DraftModeProvider } from '../async-storage/draft-mode-provider'\nimport type { ResponseCookies } from '../web/spec-extension/cookies'\nimport type { ReadonlyHeaders } from '../web/spec-extension/adapters/headers'\nimport type { ReadonlyRequestCookies } from '../web/spec-extension/adapters/request-cookies'\nimport type { CacheSignal } from './cache-signal'\nimport type { DynamicTrackingState } from './dynamic-rendering'\nimport type { FallbackRouteParams } from '../request/fallback-params'\n\n// Share the instance module in the next-shared layer\nimport { workUnitAsyncStorageInstance } from './work-unit-async-storage-instance' with { 'turbopack-transition': 'next-shared' }\nimport type { ServerComponentsHmrCache } from '../response-cache'\nimport type {\n  RenderResumeDataCache,\n  PrerenderResumeDataCache,\n} from '../resume-data-cache/resume-data-cache'\nimport type { Params } from '../request/params'\nimport type { ImplicitTags } from '../lib/implicit-tags'\nimport type { WorkStore } from './work-async-storage.external'\nimport { NEXT_HMR_REFRESH_HASH_COOKIE } from '../../client/components/app-router-headers'\nimport { InvariantError } from '../../shared/lib/invariant-error'\n\nexport type WorkUnitPhase = 'action' | 'render' | 'after'\n\nexport interface CommonWorkUnitStore {\n  /** NOTE: Will be mutated as phases change */\n  phase: WorkUnitPhase\n  readonly implicitTags: ImplicitTags\n}\n\nexport interface RequestStore extends CommonWorkUnitStore {\n  readonly type: 'request'\n\n  /**\n   * The URL of the request. This only specifies the pathname and the search\n   * part of the URL.\n   */\n  readonly url: {\n    /**\n     * The pathname of the requested URL.\n     */\n    readonly pathname: string\n\n    /**\n     * The search part of the requested URL. If the request did not provide a\n     * search part, this will be an empty string.\n     */\n    readonly search: string\n  }\n\n  readonly headers: ReadonlyHeaders\n  // This is mutable because we need to reassign it when transitioning from the action phase to the render phase.\n  // The cookie object itself is deliberately read only and thus can't be updated.\n  cookies: ReadonlyRequestCookies\n  readonly mutableCookies: ResponseCookies\n  readonly userspaceMutableCookies: ResponseCookies\n  readonly draftMode: DraftModeProvider\n  readonly isHmrRefresh?: boolean\n  readonly serverComponentsHmrCache?: ServerComponentsHmrCache\n\n  readonly rootParams: Params\n\n  /**\n   * The resume data cache for this request. This will be a immutable cache.\n   */\n  renderResumeDataCache: RenderResumeDataCache | null\n\n  // DEV-only\n  usedDynamic?: boolean\n  prerenderPhase?: boolean\n  devFallbackParams?: FallbackRouteParams | null\n}\n\n/**\n * The Prerender store is for tracking information related to prerenders.\n *\n * It can be used for both RSC and SSR prerendering and should be scoped as close\n * to the individual `renderTo...` API call as possible. To keep the type simple\n * we don't distinguish between RSC and SSR prerendering explicitly but instead\n * use conditional object properties to infer which mode we are in. For instance cache tracking\n * only needs to happen during the RSC prerender when we are prospectively prerendering\n * to fill all caches.\n */\nexport type PrerenderStoreModern =\n  | PrerenderStoreModernClient\n  | PrerenderStoreModernServer\n  | PrerenderStoreModernRuntime\n\n/** Like `PrerenderStoreModern`, but only including static prerenders (i.e. not runtime prerenders) */\nexport type StaticPrerenderStoreModern = Exclude<\n  PrerenderStoreModern,\n  PrerenderStoreModernRuntime\n>\n\nexport interface PrerenderStoreModernClient\n  extends PrerenderStoreModernCommon,\n    StaticPrerenderStoreCommon {\n  readonly type: 'prerender-client'\n}\n\nexport interface PrerenderStoreModernServer\n  extends PrerenderStoreModernCommon,\n    StaticPrerenderStoreCommon {\n  readonly type: 'prerender'\n}\n\nexport interface PrerenderStoreModernRuntime\n  extends PrerenderStoreModernCommon {\n  readonly type: 'prerender-runtime'\n\n  /**\n   * A runtime prerender resolves APIs in two tasks:\n   *\n   * 1. Static data (available in a static prerender)\n   * 2. Runtime data (available in a runtime prerender)\n   *\n   * This separation is achieved by awaiting this promise in \"runtime\" APIs.\n   * In the final prerender, the promise will be resolved during the second task,\n   * and the render will be aborted in the task that follows it.\n   */\n  readonly runtimeStagePromise: Promise<void> | null\n\n  readonly cookies: RequestStore['cookies']\n  readonly draftMode: RequestStore['draftMode']\n}\n\nexport interface RevalidateStore {\n  // Collected revalidate times and tags for this document during the prerender.\n  revalidate: number // in seconds. 0 means dynamic. INFINITE_CACHE and higher means never revalidate.\n  expire: number // server expiration time\n  stale: number // client expiration time\n  tags: null | string[]\n}\n\ninterface PrerenderStoreModernCommon\n  extends CommonWorkUnitStore,\n    RevalidateStore {\n  /**\n   * The render signal is aborted after React's `prerender` function is aborted\n   * (using a separate signal), which happens in two cases:\n   *\n   * 1. When all caches are filled during the prospective prerender.\n   * 2. When the final prerender is aborted immediately after the prerender was\n   *    started.\n   *\n   * It can be used to reject any pending I/O, including hanging promises. This\n   * allows React to properly track the async I/O in dev mode, which yields\n   * better owner stacks for dynamic validation errors.\n   */\n  readonly renderSignal: AbortSignal\n\n  /**\n   * This is the AbortController which represents the boundary between Prerender\n   * and dynamic. In some renders it is the same as the controller for React,\n   * but in others it is a separate controller. It should be aborted whenever we\n   * are no longer in the prerender phase of rendering. Typically this is after\n   * one task, or when you call a sync API which requires the prerender to end\n   * immediately.\n   */\n  readonly controller: AbortController\n\n  /**\n   * When not null, this signal is used to track cache reads during prerendering\n   * and to await all cache reads completing, before aborting the prerender.\n   */\n  readonly cacheSignal: null | CacheSignal\n\n  /**\n   * During some prerenders we want to track dynamic access.\n   */\n  readonly dynamicTracking: null | DynamicTrackingState\n\n  readonly rootParams: Params\n\n  /**\n   * A mutable resume data cache for this prerender.\n   */\n  prerenderResumeDataCache: PrerenderResumeDataCache | null\n\n  /**\n   * An immutable resume data cache for this prerender. This may be provided\n   * instead of the `prerenderResumeDataCache` if the prerender is not supposed\n   * to fill caches, and only read from prefilled caches, e.g. when prerendering\n   * an optional fallback shell.\n   */\n  renderResumeDataCache: RenderResumeDataCache | null\n\n  /**\n   * The HMR refresh hash is only provided in dev mode. It is needed for the dev\n   * warmup render to ensure that the cache keys will be identical for the\n   * subsequent dynamic render.\n   */\n  readonly hmrRefreshHash: string | undefined\n\n  /**\n   * Only available in dev mode.\n   */\n  readonly captureOwnerStack: undefined | (() => string | null)\n}\n\ninterface StaticPrerenderStoreCommon {\n  /**\n   * The set of unknown route parameters. Accessing these will be tracked as\n   * a dynamic access.\n   */\n  readonly fallbackRouteParams: FallbackRouteParams | null\n\n  /**\n   * When true, the page is prerendered as a fallback shell, while allowing any\n   * dynamic accesses to result in an empty shell. This is the case when there\n   * are also routes prerendered with a more complete set of params.\n   * Prerendering those routes would catch any invalid dynamic accesses.\n   */\n  readonly allowEmptyStaticShell: boolean\n}\n\nexport interface PrerenderStorePPR\n  extends CommonWorkUnitStore,\n    RevalidateStore {\n  readonly type: 'prerender-ppr'\n  readonly rootParams: Params\n  readonly dynamicTracking: null | DynamicTrackingState\n\n  /**\n   * The set of unknown route parameters. Accessing these will be tracked as\n   * a dynamic access.\n   */\n  readonly fallbackRouteParams: FallbackRouteParams | null\n\n  /**\n   * The resume data cache for this prerender.\n   */\n  prerenderResumeDataCache: PrerenderResumeDataCache\n}\n\nexport interface PrerenderStoreLegacy\n  extends CommonWorkUnitStore,\n    RevalidateStore {\n  readonly type: 'prerender-legacy'\n  readonly rootParams: Params\n}\n\nexport type PrerenderStore =\n  | PrerenderStoreLegacy\n  | PrerenderStorePPR\n  | PrerenderStoreModern\n\n// /** Like `PrerenderStoreModern`, but only including static prerenders (i.e. not runtime prerenders) */\nexport type StaticPrerenderStore = Exclude<\n  PrerenderStore,\n  PrerenderStoreModernRuntime\n>\n\nexport interface CommonCacheStore\n  extends Omit<CommonWorkUnitStore, 'implicitTags'> {\n  /**\n   * A cache work unit store might not always have an outer work unit store,\n   * from which implicit tags could be inherited.\n   */\n  readonly implicitTags: ImplicitTags | undefined\n  /**\n   * Draft mode is only available if the outer work unit store is a request\n   * store and draft mode is enabled.\n   */\n  readonly draftMode: DraftModeProvider | undefined\n}\n\nexport interface CommonUseCacheStore extends CommonCacheStore, RevalidateStore {\n  explicitRevalidate: undefined | number // explicit revalidate time from cacheLife() calls\n  explicitExpire: undefined | number // server expiration time\n  explicitStale: undefined | number // client expiration time\n  readonly hmrRefreshHash: string | undefined\n  readonly isHmrRefresh: boolean\n  readonly serverComponentsHmrCache: ServerComponentsHmrCache | undefined\n  readonly forceRevalidate: boolean\n}\n\nexport interface PublicUseCacheStore extends CommonUseCacheStore {\n  readonly type: 'cache'\n}\n\nexport interface PrivateUseCacheStore extends CommonUseCacheStore {\n  readonly type: 'private-cache'\n\n  /**\n   * A runtime prerender resolves APIs in two tasks:\n   *\n   * 1. Static data (available in a static prerender)\n   * 2. Runtime data (available in a runtime prerender)\n   *\n   * This separation is achieved by awaiting this promise in \"runtime\" APIs.\n   * In the final prerender, the promise will be resolved during the second task,\n   * and the render will be aborted in the task that follows it.\n   */\n  readonly runtimeStagePromise: Promise<void> | null\n\n  /**\n   * As opposed to the public cache store, the private cache store is allowed to\n   * access the request cookies.\n   */\n  readonly cookies: ReadonlyRequestCookies\n\n  /**\n   * Private caches don't currently need to track root params in the cache key\n   * because they're not persisted anywhere, so we can allow root params access\n   * (unlike public caches)\n   */\n  readonly rootParams: Params\n}\n\nexport type UseCacheStore = PublicUseCacheStore | PrivateUseCacheStore\n\nexport interface UnstableCacheStore extends CommonCacheStore {\n  readonly type: 'unstable-cache'\n}\n\n/**\n * The Cache store is for tracking information inside a \"use cache\" or\n * unstable_cache context. A cache store shadows an outer request store (if\n * present) as a work unit, so that we never accidentally expose any request or\n * page specific information to cache functions, unless it's explicitly desired.\n * For those exceptions, the data is copied over from the request store to the\n * cache store, instead of generally making the request store available to cache\n * functions.\n */\nexport type CacheStore = UseCacheStore | UnstableCacheStore\n\nexport type WorkUnitStore = RequestStore | CacheStore | PrerenderStore\n\nexport type WorkUnitAsyncStorage = AsyncLocalStorage<WorkUnitStore>\n\nexport { workUnitAsyncStorageInstance as workUnitAsyncStorage }\n\nexport function throwForMissingRequestStore(callingExpression: string): never {\n  throw new Error(\n    `\\`${callingExpression}\\` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context`\n  )\n}\n\nexport function throwInvariantForMissingStore(): never {\n  throw new InvariantError('Expected workUnitAsyncStorage to have a store.')\n}\n\nexport function getPrerenderResumeDataCache(\n  workUnitStore: WorkUnitStore\n): PrerenderResumeDataCache | null {\n  switch (workUnitStore.type) {\n    case 'prerender':\n    case 'prerender-runtime':\n    case 'prerender-ppr':\n      return workUnitStore.prerenderResumeDataCache\n    case 'prerender-client':\n      // TODO eliminate fetch caching in client scope and stop exposing this data\n      // cache during SSR.\n      return workUnitStore.prerenderResumeDataCache\n    case 'prerender-legacy':\n    case 'request':\n    case 'cache':\n    case 'private-cache':\n    case 'unstable-cache':\n      return null\n    default:\n      return workUnitStore satisfies never\n  }\n}\n\nexport function getRenderResumeDataCache(\n  workUnitStore: WorkUnitStore\n): RenderResumeDataCache | null {\n  switch (workUnitStore.type) {\n    case 'request':\n      return workUnitStore.renderResumeDataCache\n    case 'prerender':\n    case 'prerender-runtime':\n    case 'prerender-client':\n      if (workUnitStore.renderResumeDataCache) {\n        // If we are in a prerender, we might have a render resume data cache\n        // that is used to read from prefilled caches.\n        return workUnitStore.renderResumeDataCache\n      }\n    // fallthrough\n    case 'prerender-ppr':\n      // Otherwise we return the mutable resume data cache here as an immutable\n      // version of the cache as it can also be used for reading.\n      return workUnitStore.prerenderResumeDataCache\n    case 'cache':\n    case 'private-cache':\n    case 'unstable-cache':\n    case 'prerender-legacy':\n      return null\n    default:\n      return workUnitStore satisfies never\n  }\n}\n\nexport function getHmrRefreshHash(\n  workStore: WorkStore,\n  workUnitStore: WorkUnitStore\n): string | undefined {\n  if (workStore.dev) {\n    switch (workUnitStore.type) {\n      case 'cache':\n      case 'private-cache':\n      case 'prerender':\n      case 'prerender-runtime':\n        return workUnitStore.hmrRefreshHash\n      case 'request':\n        return workUnitStore.cookies.get(NEXT_HMR_REFRESH_HASH_COOKIE)?.value\n      case 'prerender-client':\n      case 'prerender-ppr':\n      case 'prerender-legacy':\n      case 'unstable-cache':\n        break\n      default:\n        workUnitStore satisfies never\n    }\n  }\n\n  return undefined\n}\n\nexport function isHmrRefresh(\n  workStore: WorkStore,\n  workUnitStore: WorkUnitStore\n): boolean {\n  if (workStore.dev) {\n    switch (workUnitStore.type) {\n      case 'cache':\n      case 'private-cache':\n      case 'request':\n        return workUnitStore.isHmrRefresh ?? false\n      case 'prerender':\n      case 'prerender-client':\n      case 'prerender-runtime':\n      case 'prerender-ppr':\n      case 'prerender-legacy':\n      case 'unstable-cache':\n        break\n      default:\n        workUnitStore satisfies never\n    }\n  }\n\n  return false\n}\n\nexport function getServerComponentsHmrCache(\n  workStore: WorkStore,\n  workUnitStore: WorkUnitStore\n): ServerComponentsHmrCache | undefined {\n  if (workStore.dev) {\n    switch (workUnitStore.type) {\n      case 'cache':\n      case 'private-cache':\n      case 'request':\n        return workUnitStore.serverComponentsHmrCache\n      case 'prerender':\n      case 'prerender-client':\n      case 'prerender-runtime':\n      case 'prerender-ppr':\n      case 'prerender-legacy':\n      case 'unstable-cache':\n        break\n      default:\n        workUnitStore satisfies never\n    }\n  }\n\n  return undefined\n}\n\n/**\n * Returns a draft mode provider only if draft mode is enabled.\n */\nexport function getDraftModeProviderForCacheScope(\n  workStore: WorkStore,\n  workUnitStore: WorkUnitStore\n): DraftModeProvider | undefined {\n  if (workStore.isDraftMode) {\n    switch (workUnitStore.type) {\n      case 'cache':\n      case 'private-cache':\n      case 'unstable-cache':\n      case 'prerender-runtime':\n      case 'request':\n        return workUnitStore.draftMode\n      case 'prerender':\n      case 'prerender-client':\n      case 'prerender-ppr':\n      case 'prerender-legacy':\n        break\n      default:\n        workUnitStore satisfies never\n    }\n  }\n\n  return undefined\n}\n\nexport function getCacheSignal(\n  workUnitStore: WorkUnitStore\n): CacheSignal | null {\n  switch (workUnitStore.type) {\n    case 'prerender':\n    case 'prerender-client':\n    case 'prerender-runtime':\n      return workUnitStore.cacheSignal\n    case 'prerender-ppr':\n    case 'prerender-legacy':\n    case 'request':\n    case 'cache':\n    case 'private-cache':\n    case 'unstable-cache':\n      return null\n    default:\n      return workUnitStore satisfies never\n  }\n}\n\nexport function getRuntimeStagePromise(\n  workUnitStore: WorkUnitStore\n): Promise<void> | null {\n  switch (workUnitStore.type) {\n    case 'prerender-runtime':\n    case 'private-cache':\n      return workUnitStore.runtimeStagePromise\n    case 'prerender':\n    case 'prerender-client':\n    case 'prerender-ppr':\n    case 'prerender-legacy':\n    case 'request':\n    case 'cache':\n    case 'unstable-cache':\n      return null\n    default:\n      return workUnitStore satisfies never\n  }\n}\n","const DYNAMIC_ERROR_CODE = 'DYNAMIC_SERVER_USAGE'\n\nexport class DynamicServerError extends Error {\n  digest: typeof DYNAMIC_ERROR_CODE = DYNAMIC_ERROR_CODE\n\n  constructor(public readonly description: string) {\n    super(`Dynamic server usage: ${description}`)\n  }\n}\n\nexport function isDynamicServerError(err: unknown): err is DynamicServerError {\n  if (\n    typeof err !== 'object' ||\n    err === null ||\n    !('digest' in err) ||\n    typeof err.digest !== 'string'\n  ) {\n    return false\n  }\n\n  return err.digest === DYNAMIC_ERROR_CODE\n}\n","const NEXT_STATIC_GEN_BAILOUT = 'NEXT_STATIC_GEN_BAILOUT'\n\nexport class StaticGenBailoutError extends Error {\n  public readonly code = NEXT_STATIC_GEN_BAILOUT\n}\n\nexport function isStaticGenBailoutError(\n  error: unknown\n): error is StaticGenBailoutError {\n  if (typeof error !== 'object' || error === null || !('code' in error)) {\n    return false\n  }\n\n  return error.code === NEXT_STATIC_GEN_BAILOUT\n}\n","export function isHangingPromiseRejectionError(\n  err: unknown\n): err is HangingPromiseRejectionError {\n  if (typeof err !== 'object' || err === null || !('digest' in err)) {\n    return false\n  }\n\n  return err.digest === HANGING_PROMISE_REJECTION\n}\n\nconst HANGING_PROMISE_REJECTION = 'HANGING_PROMISE_REJECTION'\n\nclass HangingPromiseRejectionError extends Error {\n  public readonly digest = HANGING_PROMISE_REJECTION\n\n  constructor(\n    public readonly route: string,\n    public readonly expression: string\n  ) {\n    super(\n      `During prerendering, ${expression} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${expression} to a different context by using \\`setTimeout\\`, \\`after\\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route \"${route}\".`\n    )\n  }\n}\n\ntype AbortListeners = Array<(err: unknown) => void>\nconst abortListenersBySignal = new WeakMap<AbortSignal, AbortListeners>()\n\n/**\n * This function constructs a promise that will never resolve. This is primarily\n * useful for cacheComponents where we use promise resolution timing to determine which\n * parts of a render can be included in a prerender.\n *\n * @internal\n */\nexport function makeHangingPromise<T>(\n  signal: AbortSignal,\n  route: string,\n  expression: string\n): Promise<T> {\n  if (signal.aborted) {\n    return Promise.reject(new HangingPromiseRejectionError(route, expression))\n  } else {\n    const hangingPromise = new Promise<T>((_, reject) => {\n      const boundRejection = reject.bind(\n        null,\n        new HangingPromiseRejectionError(route, expression)\n      )\n      let currentListeners = abortListenersBySignal.get(signal)\n      if (currentListeners) {\n        currentListeners.push(boundRejection)\n      } else {\n        const listeners = [boundRejection]\n        abortListenersBySignal.set(signal, listeners)\n        signal.addEventListener(\n          'abort',\n          () => {\n            for (let i = 0; i < listeners.length; i++) {\n              listeners[i]()\n            }\n          },\n          { once: true }\n        )\n      }\n    })\n    // We are fine if no one actually awaits this promise. We shouldn't consider this an unhandled rejection so\n    // we attach a noop catch handler here to suppress this warning. If you actually await somewhere or construct\n    // your own promise out of it you'll need to ensure you handle the error when it rejects.\n    hangingPromise.catch(ignoreReject)\n    return hangingPromise\n  }\n}\n\nfunction ignoreReject() {}\n\nexport function makeDevtoolsIOAwarePromise<T>(underlying: T): Promise<T> {\n  // in React DevTools if we resolve in a setTimeout we will observe\n  // the promise resolution as something that can suspend a boundary or root.\n  return new Promise<T>((resolve) => {\n    // Must use setTimeout to be considered IO React DevTools. setImmediate will not work.\n    setTimeout(() => {\n      resolve(underlying)\n    }, 0)\n  })\n}\n","export const METADATA_BOUNDARY_NAME = '__next_metadata_boundary__'\nexport const VIEWPORT_BOUNDARY_NAME = '__next_viewport_boundary__'\nexport const OUTLET_BOUNDARY_NAME = '__next_outlet_boundary__'\nexport const ROOT_LAYOUT_BOUNDARY_NAME = '__next_root_layout_boundary__'\n","export type ScheduledFn<T = void> = () => T | PromiseLike<T>\nexport type SchedulerFn<T = void> = (cb: ScheduledFn<T>) => void\n\n/**\n * Schedules a function to be called on the next tick after the other promises\n * have been resolved.\n *\n * @param cb the function to schedule\n */\nexport const scheduleOnNextTick = (cb: ScheduledFn<void>) => {\n  // We use Promise.resolve().then() here so that the operation is scheduled at\n  // the end of the promise job queue, we then add it to the next process tick\n  // to ensure it's evaluated afterwards.\n  //\n  // This was inspired by the implementation of the DataLoader interface: https://github.com/graphql/dataloader/blob/d336bd15282664e0be4b4a657cb796f09bafbc6b/src/index.js#L213-L255\n  //\n  Promise.resolve().then(() => {\n    if (process.env.NEXT_RUNTIME === 'edge') {\n      setTimeout(cb, 0)\n    } else {\n      process.nextTick(cb)\n    }\n  })\n}\n\n/**\n * Schedules a function to be called using `setImmediate` or `setTimeout` if\n * `setImmediate` is not available (like in the Edge runtime).\n *\n * @param cb the function to schedule\n */\nexport const scheduleImmediate = (cb: ScheduledFn<void>): void => {\n  if (process.env.NEXT_RUNTIME === 'edge') {\n    setTimeout(cb, 0)\n  } else {\n    setImmediate(cb)\n  }\n}\n\n/**\n * returns a promise than resolves in a future task. There is no guarantee that the task it resolves in\n * will be the next task but if you await it you can at least be sure that the current task is over and\n * most usefully that the entire microtask queue of the current task has been emptied.\n */\nexport function atLeastOneTask() {\n  return new Promise<void>((resolve) => scheduleImmediate(resolve))\n}\n\n/**\n * This utility function is extracted to make it easier to find places where we are doing\n * specific timing tricks to try to schedule work after React has rendered. This is especially\n * important at the moment because Next.js uses the edge builds of React which use setTimeout to\n * schedule work when you might expect that something like setImmediate would do the trick.\n *\n * Long term we should switch to the node versions of React rendering when possible and then\n * update this to use setImmediate rather than setTimeout\n */\nexport function waitAtLeastOneReactRenderTask(): Promise<void> {\n  if (process.env.NEXT_RUNTIME === 'edge') {\n    return new Promise((r) => setTimeout(r, 0))\n  } else {\n    return new Promise((r) => setImmediate(r))\n  }\n}\n","// This has to be a shared module which is shared between client component error boundary and dynamic component\nconst BAILOUT_TO_CSR = 'BAILOUT_TO_CLIENT_SIDE_RENDERING'\n\n/** An error that should be thrown when we want to bail out to client-side rendering. */\nexport class BailoutToCSRError extends Error {\n  public readonly digest = BAILOUT_TO_CSR\n\n  constructor(public readonly reason: string) {\n    super(`Bail out to client-side rendering: ${reason}`)\n  }\n}\n\n/** Checks if a passed argument is an error that is thrown if we want to bail out to client-side rendering. */\nexport function isBailoutToCSRError(err: unknown): err is BailoutToCSRError {\n  if (typeof err !== 'object' || err === null || !('digest' in err)) {\n    return false\n  }\n\n  return err.digest === BAILOUT_TO_CSR\n}\n","/**\n * The functions provided by this module are used to communicate certain properties\n * about the currently running code so that Next.js can make decisions on how to handle\n * the current execution in different rendering modes such as pre-rendering, resuming, and SSR.\n *\n * Today Next.js treats all code as potentially static. Certain APIs may only make sense when dynamically rendering.\n * Traditionally this meant deopting the entire render to dynamic however with PPR we can now deopt parts\n * of a React tree as dynamic while still keeping other parts static. There are really two different kinds of\n * Dynamic indications.\n *\n * The first is simply an intention to be dynamic. unstable_noStore is an example of this where\n * the currently executing code simply declares that the current scope is dynamic but if you use it\n * inside unstable_cache it can still be cached. This type of indication can be removed if we ever\n * make the default dynamic to begin with because the only way you would ever be static is inside\n * a cache scope which this indication does not affect.\n *\n * The second is an indication that a dynamic data source was read. This is a stronger form of dynamic\n * because it means that it is inappropriate to cache this at all. using a dynamic data source inside\n * unstable_cache should error. If you want to use some dynamic data inside unstable_cache you should\n * read that data outside the cache and pass it in as an argument to the cached function.\n */\n\nimport type { WorkStore } from '../app-render/work-async-storage.external'\nimport type {\n  WorkUnitStore,\n  RequestStore,\n  PrerenderStoreLegacy,\n  PrerenderStoreModern,\n  PrerenderStoreModernRuntime,\n} from '../app-render/work-unit-async-storage.external'\n\n// Once postpone is in stable we should switch to importing the postpone export directly\nimport React from 'react'\n\nimport { DynamicServerError } from '../../client/components/hooks-server-context'\nimport { StaticGenBailoutError } from '../../client/components/static-generation-bailout'\nimport {\n  getRuntimeStagePromise,\n  workUnitAsyncStorage,\n} from './work-unit-async-storage.external'\nimport { workAsyncStorage } from '../app-render/work-async-storage.external'\nimport { makeHangingPromise } from '../dynamic-rendering-utils'\nimport {\n  METADATA_BOUNDARY_NAME,\n  VIEWPORT_BOUNDARY_NAME,\n  OUTLET_BOUNDARY_NAME,\n  ROOT_LAYOUT_BOUNDARY_NAME,\n} from '../../lib/framework/boundary-constants'\nimport { scheduleOnNextTick } from '../../lib/scheduler'\nimport { BailoutToCSRError } from '../../shared/lib/lazy-dynamic/bailout-to-csr'\nimport { InvariantError } from '../../shared/lib/invariant-error'\n\nconst hasPostpone = typeof React.unstable_postpone === 'function'\n\nexport type DynamicAccess = {\n  /**\n   * If debugging, this will contain the stack trace of where the dynamic access\n   * occurred. This is used to provide more information to the user about why\n   * their page is being rendered dynamically.\n   */\n  stack?: string\n\n  /**\n   * The expression that was accessed dynamically.\n   */\n  expression: string\n}\n\n// Stores dynamic reasons used during an RSC render.\nexport type DynamicTrackingState = {\n  /**\n   * When true, stack information will also be tracked during dynamic access.\n   */\n  readonly isDebugDynamicAccesses: boolean | undefined\n\n  /**\n   * The dynamic accesses that occurred during the render.\n   */\n  readonly dynamicAccesses: Array<DynamicAccess>\n\n  syncDynamicErrorWithStack: null | Error\n}\n\n// Stores dynamic reasons used during an SSR render.\nexport type DynamicValidationState = {\n  hasSuspenseAboveBody: boolean\n  hasDynamicMetadata: boolean\n  hasDynamicViewport: boolean\n  hasAllowedDynamic: boolean\n  dynamicErrors: Array<Error>\n}\n\nexport function createDynamicTrackingState(\n  isDebugDynamicAccesses: boolean | undefined\n): DynamicTrackingState {\n  return {\n    isDebugDynamicAccesses,\n    dynamicAccesses: [],\n    syncDynamicErrorWithStack: null,\n  }\n}\n\nexport function createDynamicValidationState(): DynamicValidationState {\n  return {\n    hasSuspenseAboveBody: false,\n    hasDynamicMetadata: false,\n    hasDynamicViewport: false,\n    hasAllowedDynamic: false,\n    dynamicErrors: [],\n  }\n}\n\nexport function getFirstDynamicReason(\n  trackingState: DynamicTrackingState\n): undefined | string {\n  return trackingState.dynamicAccesses[0]?.expression\n}\n\n/**\n * This function communicates that the current scope should be treated as dynamic.\n *\n * In most cases this function is a no-op but if called during\n * a PPR prerender it will postpone the current sub-tree and calling\n * it during a normal prerender will cause the entire prerender to abort\n */\nexport function markCurrentScopeAsDynamic(\n  store: WorkStore,\n  workUnitStore: undefined | Exclude<WorkUnitStore, PrerenderStoreModern>,\n  expression: string\n): void {\n  if (workUnitStore) {\n    switch (workUnitStore.type) {\n      case 'cache':\n      case 'unstable-cache':\n        // Inside cache scopes, marking a scope as dynamic has no effect,\n        // because the outer cache scope creates a cache boundary. This is\n        // subtly different from reading a dynamic data source, which is\n        // forbidden inside a cache scope.\n        return\n      case 'private-cache':\n        // A private cache scope is already dynamic by definition.\n        return\n      case 'prerender-legacy':\n      case 'prerender-ppr':\n      case 'request':\n        break\n      default:\n        workUnitStore satisfies never\n    }\n  }\n\n  // If we're forcing dynamic rendering or we're forcing static rendering, we\n  // don't need to do anything here because the entire page is already dynamic\n  // or it's static and it should not throw or postpone here.\n  if (store.forceDynamic || store.forceStatic) return\n\n  if (store.dynamicShouldError) {\n    throw new StaticGenBailoutError(\n      `Route ${store.route} with \\`dynamic = \"error\"\\` couldn't be rendered statically because it used \\`${expression}\\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`\n    )\n  }\n\n  if (workUnitStore) {\n    switch (workUnitStore.type) {\n      case 'prerender-ppr':\n        return postponeWithTracking(\n          store.route,\n          expression,\n          workUnitStore.dynamicTracking\n        )\n      case 'prerender-legacy':\n        workUnitStore.revalidate = 0\n\n        // We aren't prerendering, but we are generating a static page. We need\n        // to bail out of static generation.\n        const err = new DynamicServerError(\n          `Route ${store.route} couldn't be rendered statically because it used ${expression}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`\n        )\n        store.dynamicUsageDescription = expression\n        store.dynamicUsageStack = err.stack\n\n        throw err\n      case 'request':\n        if (process.env.NODE_ENV !== 'production') {\n          workUnitStore.usedDynamic = true\n        }\n        break\n      default:\n        workUnitStore satisfies never\n    }\n  }\n}\n\n/**\n * This function is meant to be used when prerendering without cacheComponents or PPR.\n * When called during a build it will cause Next.js to consider the route as dynamic.\n *\n * @internal\n */\nexport function throwToInterruptStaticGeneration(\n  expression: string,\n  store: WorkStore,\n  prerenderStore: PrerenderStoreLegacy\n): never {\n  // We aren't prerendering but we are generating a static page. We need to bail out of static generation\n  const err = new DynamicServerError(\n    `Route ${store.route} couldn't be rendered statically because it used \\`${expression}\\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`\n  )\n\n  prerenderStore.revalidate = 0\n\n  store.dynamicUsageDescription = expression\n  store.dynamicUsageStack = err.stack\n\n  throw err\n}\n\n/**\n * This function should be used to track whether something dynamic happened even when\n * we are in a dynamic render. This is useful for Dev where all renders are dynamic but\n * we still track whether dynamic APIs were accessed for helpful messaging\n *\n * @internal\n */\nexport function trackDynamicDataInDynamicRender(workUnitStore: WorkUnitStore) {\n  switch (workUnitStore.type) {\n    case 'cache':\n    case 'unstable-cache':\n      // Inside cache scopes, marking a scope as dynamic has no effect,\n      // because the outer cache scope creates a cache boundary. This is\n      // subtly different from reading a dynamic data source, which is\n      // forbidden inside a cache scope.\n      return\n    case 'private-cache':\n      // A private cache scope is already dynamic by definition.\n      return\n    case 'prerender':\n    case 'prerender-runtime':\n    case 'prerender-legacy':\n    case 'prerender-ppr':\n    case 'prerender-client':\n      break\n    case 'request':\n      if (process.env.NODE_ENV !== 'production') {\n        workUnitStore.usedDynamic = true\n      }\n      break\n    default:\n      workUnitStore satisfies never\n  }\n}\n\nfunction abortOnSynchronousDynamicDataAccess(\n  route: string,\n  expression: string,\n  prerenderStore: PrerenderStoreModern\n): void {\n  const reason = `Route ${route} needs to bail out of prerendering at this point because it used ${expression}.`\n\n  const error = createPrerenderInterruptedError(reason)\n\n  prerenderStore.controller.abort(error)\n\n  const dynamicTracking = prerenderStore.dynamicTracking\n  if (dynamicTracking) {\n    dynamicTracking.dynamicAccesses.push({\n      // When we aren't debugging, we don't need to create another error for the\n      // stack trace.\n      stack: dynamicTracking.isDebugDynamicAccesses\n        ? new Error().stack\n        : undefined,\n      expression,\n    })\n  }\n}\n\nexport function abortOnSynchronousPlatformIOAccess(\n  route: string,\n  expression: string,\n  errorWithStack: Error,\n  prerenderStore: PrerenderStoreModern\n): void {\n  const dynamicTracking = prerenderStore.dynamicTracking\n  abortOnSynchronousDynamicDataAccess(route, expression, prerenderStore)\n  // It is important that we set this tracking value after aborting. Aborts are executed\n  // synchronously except for the case where you abort during render itself. By setting this\n  // value late we can use it to determine if any of the aborted tasks are the task that\n  // called the sync IO expression in the first place.\n  if (dynamicTracking) {\n    if (dynamicTracking.syncDynamicErrorWithStack === null) {\n      dynamicTracking.syncDynamicErrorWithStack = errorWithStack\n    }\n  }\n}\n\nexport function trackSynchronousPlatformIOAccessInDev(\n  requestStore: RequestStore\n): void {\n  // We don't actually have a controller to abort but we do the semantic equivalent by\n  // advancing the request store out of prerender mode\n  requestStore.prerenderPhase = false\n}\n\n/**\n * use this function when prerendering with cacheComponents. If we are doing a\n * prospective prerender we don't actually abort because we want to discover\n * all caches for the shell. If this is the actual prerender we do abort.\n *\n * This function accepts a prerenderStore but the caller should ensure we're\n * actually running in cacheComponents mode.\n *\n * @internal\n */\nexport function abortAndThrowOnSynchronousRequestDataAccess(\n  route: string,\n  expression: string,\n  errorWithStack: Error,\n  prerenderStore: PrerenderStoreModern\n): never {\n  const prerenderSignal = prerenderStore.controller.signal\n  if (prerenderSignal.aborted === false) {\n    // TODO it would be better to move this aborted check into the callsite so we can avoid making\n    // the error object when it isn't relevant to the aborting of the prerender however\n    // since we need the throw semantics regardless of whether we abort it is easier to land\n    // this way. See how this was handled with `abortOnSynchronousPlatformIOAccess` for a closer\n    // to ideal implementation\n    abortOnSynchronousDynamicDataAccess(route, expression, prerenderStore)\n    // It is important that we set this tracking value after aborting. Aborts are executed\n    // synchronously except for the case where you abort during render itself. By setting this\n    // value late we can use it to determine if any of the aborted tasks are the task that\n    // called the sync IO expression in the first place.\n    const dynamicTracking = prerenderStore.dynamicTracking\n    if (dynamicTracking) {\n      if (dynamicTracking.syncDynamicErrorWithStack === null) {\n        dynamicTracking.syncDynamicErrorWithStack = errorWithStack\n      }\n    }\n  }\n  throw createPrerenderInterruptedError(\n    `Route ${route} needs to bail out of prerendering at this point because it used ${expression}.`\n  )\n}\n\n/**\n * Use this function when dynamically prerendering with dynamicIO.\n * We don't want to error, because it's better to return something\n * (and we've already aborted the render at the point where the sync dynamic error occured),\n * but we should log an error server-side.\n * @internal\n */\nexport function warnOnSyncDynamicError(dynamicTracking: DynamicTrackingState) {\n  if (dynamicTracking.syncDynamicErrorWithStack) {\n    // the server did something sync dynamic, likely\n    // leading to an early termination of the prerender.\n    console.error(dynamicTracking.syncDynamicErrorWithStack)\n  }\n}\n\n// For now these implementations are the same so we just reexport\nexport const trackSynchronousRequestDataAccessInDev =\n  trackSynchronousPlatformIOAccessInDev\n\n/**\n * This component will call `React.postpone` that throws the postponed error.\n */\ntype PostponeProps = {\n  reason: string\n  route: string\n}\nexport function Postpone({ reason, route }: PostponeProps): never {\n  const prerenderStore = workUnitAsyncStorage.getStore()\n  const dynamicTracking =\n    prerenderStore && prerenderStore.type === 'prerender-ppr'\n      ? prerenderStore.dynamicTracking\n      : null\n  postponeWithTracking(route, reason, dynamicTracking)\n}\n\nexport function postponeWithTracking(\n  route: string,\n  expression: string,\n  dynamicTracking: null | DynamicTrackingState\n): never {\n  assertPostpone()\n  if (dynamicTracking) {\n    dynamicTracking.dynamicAccesses.push({\n      // When we aren't debugging, we don't need to create another error for the\n      // stack trace.\n      stack: dynamicTracking.isDebugDynamicAccesses\n        ? new Error().stack\n        : undefined,\n      expression,\n    })\n  }\n\n  React.unstable_postpone(createPostponeReason(route, expression))\n}\n\nfunction createPostponeReason(route: string, expression: string) {\n  return (\n    `Route ${route} needs to bail out of prerendering at this point because it used ${expression}. ` +\n    `React throws this special object to indicate where. It should not be caught by ` +\n    `your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`\n  )\n}\n\nexport function isDynamicPostpone(err: unknown) {\n  if (\n    typeof err === 'object' &&\n    err !== null &&\n    typeof (err as any).message === 'string'\n  ) {\n    return isDynamicPostponeReason((err as any).message)\n  }\n  return false\n}\n\nfunction isDynamicPostponeReason(reason: string) {\n  return (\n    reason.includes(\n      'needs to bail out of prerendering at this point because it used'\n    ) &&\n    reason.includes(\n      'Learn more: https://nextjs.org/docs/messages/ppr-caught-error'\n    )\n  )\n}\n\nif (isDynamicPostponeReason(createPostponeReason('%%%', '^^^')) === false) {\n  throw new Error(\n    'Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js'\n  )\n}\n\nconst NEXT_PRERENDER_INTERRUPTED = 'NEXT_PRERENDER_INTERRUPTED'\n\nfunction createPrerenderInterruptedError(message: string): Error {\n  const error = new Error(message)\n  ;(error as any).digest = NEXT_PRERENDER_INTERRUPTED\n  return error\n}\n\ntype DigestError = Error & {\n  digest: string\n}\n\nexport function isPrerenderInterruptedError(\n  error: unknown\n): error is DigestError {\n  return (\n    typeof error === 'object' &&\n    error !== null &&\n    (error as any).digest === NEXT_PRERENDER_INTERRUPTED &&\n    'name' in error &&\n    'message' in error &&\n    error instanceof Error\n  )\n}\n\nexport function accessedDynamicData(\n  dynamicAccesses: Array<DynamicAccess>\n): boolean {\n  return dynamicAccesses.length > 0\n}\n\nexport function consumeDynamicAccess(\n  serverDynamic: DynamicTrackingState,\n  clientDynamic: DynamicTrackingState\n): DynamicTrackingState['dynamicAccesses'] {\n  // We mutate because we only call this once we are no longer writing\n  // to the dynamicTrackingState and it's more efficient than creating a new\n  // array.\n  serverDynamic.dynamicAccesses.push(...clientDynamic.dynamicAccesses)\n  return serverDynamic.dynamicAccesses\n}\n\nexport function formatDynamicAPIAccesses(\n  dynamicAccesses: Array<DynamicAccess>\n): string[] {\n  return dynamicAccesses\n    .filter(\n      (access): access is Required<DynamicAccess> =>\n        typeof access.stack === 'string' && access.stack.length > 0\n    )\n    .map(({ expression, stack }) => {\n      stack = stack\n        .split('\\n')\n        // Remove the \"Error: \" prefix from the first line of the stack trace as\n        // well as the first 4 lines of the stack trace which is the distance\n        // from the user code and the `new Error().stack` call.\n        .slice(4)\n        .filter((line) => {\n          // Exclude Next.js internals from the stack trace.\n          if (line.includes('node_modules/next/')) {\n            return false\n          }\n\n          // Exclude anonymous functions from the stack trace.\n          if (line.includes(' (<anonymous>)')) {\n            return false\n          }\n\n          // Exclude Node.js internals from the stack trace.\n          if (line.includes(' (node:')) {\n            return false\n          }\n\n          return true\n        })\n        .join('\\n')\n      return `Dynamic API Usage Debug - ${expression}:\\n${stack}`\n    })\n}\n\nfunction assertPostpone() {\n  if (!hasPostpone) {\n    throw new Error(\n      `Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js`\n    )\n  }\n}\n\n/**\n * This is a bit of a hack to allow us to abort a render using a Postpone instance instead of an Error which changes React's\n * abort semantics slightly.\n */\nexport function createRenderInBrowserAbortSignal(): AbortSignal {\n  const controller = new AbortController()\n  controller.abort(new BailoutToCSRError('Render in Browser'))\n  return controller.signal\n}\n\n/**\n * In a prerender, we may end up with hanging Promises as inputs due them\n * stalling on connection() or because they're loading dynamic data. In that\n * case we need to abort the encoding of arguments since they'll never complete.\n */\nexport function createHangingInputAbortSignal(\n  workUnitStore: WorkUnitStore\n): AbortSignal | undefined {\n  switch (workUnitStore.type) {\n    case 'prerender':\n    case 'prerender-runtime':\n      const controller = new AbortController()\n\n      if (workUnitStore.cacheSignal) {\n        // If we have a cacheSignal it means we're in a prospective render. If\n        // the input we're waiting on is coming from another cache, we do want\n        // to wait for it so that we can resolve this cache entry too.\n        workUnitStore.cacheSignal.inputReady().then(() => {\n          controller.abort()\n        })\n      } else {\n        // Otherwise we're in the final render and we should already have all\n        // our caches filled.\n        // If the prerender uses stages, we have wait until the runtime stage,\n        // at which point all runtime inputs will be resolved.\n        // (otherwise, a runtime prerender might consider `cookies()` hanging\n        //  even though they'd resolve in the next task.)\n        //\n        // We might still be waiting on some microtasks so we\n        // wait one tick before giving up. When we give up, we still want to\n        // render the content of this cache as deeply as we can so that we can\n        // suspend as deeply as possible in the tree or not at all if we don't\n        // end up waiting for the input.\n        const runtimeStagePromise = getRuntimeStagePromise(workUnitStore)\n        if (runtimeStagePromise) {\n          runtimeStagePromise.then(() =>\n            scheduleOnNextTick(() => controller.abort())\n          )\n        } else {\n          scheduleOnNextTick(() => controller.abort())\n        }\n      }\n\n      return controller.signal\n    case 'prerender-client':\n    case 'prerender-ppr':\n    case 'prerender-legacy':\n    case 'request':\n    case 'cache':\n    case 'private-cache':\n    case 'unstable-cache':\n      return undefined\n    default:\n      workUnitStore satisfies never\n  }\n}\n\nexport function annotateDynamicAccess(\n  expression: string,\n  prerenderStore: PrerenderStoreModern\n) {\n  const dynamicTracking = prerenderStore.dynamicTracking\n  if (dynamicTracking) {\n    dynamicTracking.dynamicAccesses.push({\n      stack: dynamicTracking.isDebugDynamicAccesses\n        ? new Error().stack\n        : undefined,\n      expression,\n    })\n  }\n}\n\nexport function useDynamicRouteParams(expression: string) {\n  const workStore = workAsyncStorage.getStore()\n  const workUnitStore = workUnitAsyncStorage.getStore()\n  if (workStore && workUnitStore) {\n    switch (workUnitStore.type) {\n      case 'prerender-client':\n      case 'prerender': {\n        const fallbackParams = workUnitStore.fallbackRouteParams\n        if (fallbackParams && fallbackParams.size > 0) {\n          // We are in a prerender with cacheComponents semantics. We are going to\n          // hang here and never resolve. This will cause the currently\n          // rendering component to effectively be a dynamic hole.\n          React.use(\n            makeHangingPromise(\n              workUnitStore.renderSignal,\n              workStore.route,\n              expression\n            )\n          )\n        }\n        break\n      }\n      case 'prerender-ppr': {\n        const fallbackParams = workUnitStore.fallbackRouteParams\n        if (fallbackParams && fallbackParams.size > 0) {\n          return postponeWithTracking(\n            workStore.route,\n            expression,\n            workUnitStore.dynamicTracking\n          )\n        }\n        break\n      }\n      case 'prerender-runtime':\n        throw new InvariantError(\n          `\\`${expression}\\` was called during a runtime prerender. Next.js should be preventing ${expression} from being included in server components statically, but did not in this case.`\n        )\n      case 'cache':\n      case 'private-cache':\n        throw new InvariantError(\n          `\\`${expression}\\` was called inside a cache scope. Next.js should be preventing ${expression} from being included in server components statically, but did not in this case.`\n        )\n      case 'prerender-legacy':\n      case 'request':\n      case 'unstable-cache':\n        break\n      default:\n        workUnitStore satisfies never\n    }\n  }\n}\n\nconst hasSuspenseRegex = /\\n\\s+at Suspense \\(<anonymous>\\)/\n\n// Common implicit body tags that React will treat as body when placed directly in html\nconst bodyAndImplicitTags =\n  'body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6'\n\n// Detects when RootLayoutBoundary (our framework marker component) appears\n// after Suspense in the component stack, indicating the root layout is wrapped\n// within a Suspense boundary. Ensures no body/html/implicit-body components are in between.\n//\n// Example matches:\n//   at Suspense (<anonymous>)\n//   at __next_root_layout_boundary__ (<anonymous>)\n//\n// Or with other components in between (but not body/html/implicit-body):\n//   at Suspense (<anonymous>)\n//   at SomeComponent (<anonymous>)\n//   at __next_root_layout_boundary__ (<anonymous>)\nconst hasSuspenseBeforeRootLayoutWithoutBodyOrImplicitBodyRegex = new RegExp(\n  `\\\\n\\\\s+at Suspense \\\\(<anonymous>\\\\)(?:(?!\\\\n\\\\s+at (?:${bodyAndImplicitTags}) \\\\(<anonymous>\\\\))[\\\\s\\\\S])*?\\\\n\\\\s+at ${ROOT_LAYOUT_BOUNDARY_NAME} \\\\([^\\\\n]*\\\\)`\n)\n\nconst hasMetadataRegex = new RegExp(\n  `\\\\n\\\\s+at ${METADATA_BOUNDARY_NAME}[\\\\n\\\\s]`\n)\nconst hasViewportRegex = new RegExp(\n  `\\\\n\\\\s+at ${VIEWPORT_BOUNDARY_NAME}[\\\\n\\\\s]`\n)\nconst hasOutletRegex = new RegExp(`\\\\n\\\\s+at ${OUTLET_BOUNDARY_NAME}[\\\\n\\\\s]`)\n\nexport function trackAllowedDynamicAccess(\n  workStore: WorkStore,\n  componentStack: string,\n  dynamicValidation: DynamicValidationState,\n  clientDynamic: DynamicTrackingState\n) {\n  if (hasOutletRegex.test(componentStack)) {\n    // We don't need to track that this is dynamic. It is only so when something else is also dynamic.\n    return\n  } else if (hasMetadataRegex.test(componentStack)) {\n    dynamicValidation.hasDynamicMetadata = true\n    return\n  } else if (hasViewportRegex.test(componentStack)) {\n    dynamicValidation.hasDynamicViewport = true\n    return\n  } else if (\n    hasSuspenseBeforeRootLayoutWithoutBodyOrImplicitBodyRegex.test(\n      componentStack\n    )\n  ) {\n    // For Suspense within body, the prelude wouldn't be empty so it wouldn't violate the empty static shells rule.\n    // But if you have Suspense above body, the prelude is empty but we allow that because having Suspense\n    // is an explicit signal from the user that they acknowledge the empty shell and want dynamic rendering.\n    dynamicValidation.hasAllowedDynamic = true\n    dynamicValidation.hasSuspenseAboveBody = true\n    return\n  } else if (hasSuspenseRegex.test(componentStack)) {\n    // this error had a Suspense boundary above it so we don't need to report it as a source\n    // of disallowed\n    dynamicValidation.hasAllowedDynamic = true\n    return\n  } else if (clientDynamic.syncDynamicErrorWithStack) {\n    // This task was the task that called the sync error.\n    dynamicValidation.dynamicErrors.push(\n      clientDynamic.syncDynamicErrorWithStack\n    )\n    return\n  } else {\n    const message = `Route \"${workStore.route}\": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a \"use cache\" above it. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense`\n    const error = createErrorWithComponentOrOwnerStack(message, componentStack)\n    dynamicValidation.dynamicErrors.push(error)\n    return\n  }\n}\n\n/**\n * In dev mode, we prefer using the owner stack, otherwise the provided\n * component stack is used.\n */\nfunction createErrorWithComponentOrOwnerStack(\n  message: string,\n  componentStack: string\n) {\n  const ownerStack =\n    process.env.NODE_ENV !== 'production' && React.captureOwnerStack\n      ? React.captureOwnerStack()\n      : null\n\n  const error = new Error(message)\n  error.stack = error.name + ': ' + message + (ownerStack ?? componentStack)\n  return error\n}\n\nexport enum PreludeState {\n  Full = 0,\n  Empty = 1,\n  Errored = 2,\n}\n\nexport function logDisallowedDynamicError(\n  workStore: WorkStore,\n  error: Error\n): void {\n  console.error(error)\n\n  if (!workStore.dev) {\n    if (workStore.hasReadableErrorStacks) {\n      console.error(\n        `To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"${workStore.route}\" in your browser to investigate the error.`\n      )\n    } else {\n      console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:\n  - Start the app in development mode by running \\`next dev\\`, then open \"${workStore.route}\" in your browser to investigate the error.\n  - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.`)\n    }\n  }\n}\n\nexport function throwIfDisallowedDynamic(\n  workStore: WorkStore,\n  prelude: PreludeState,\n  dynamicValidation: DynamicValidationState,\n  serverDynamic: DynamicTrackingState\n): void {\n  if (prelude !== PreludeState.Full) {\n    if (dynamicValidation.hasSuspenseAboveBody) {\n      // This route has opted into allowing fully dynamic rendering\n      // by including a Suspense boundary above the body. In this case\n      // a lack of a shell is not considered disallowed so we simply return\n      return\n    }\n\n    if (serverDynamic.syncDynamicErrorWithStack) {\n      // There is no shell and the server did something sync dynamic likely\n      // leading to an early termination of the prerender before the shell\n      // could be completed. We terminate the build/validating render.\n      logDisallowedDynamicError(\n        workStore,\n        serverDynamic.syncDynamicErrorWithStack\n      )\n      throw new StaticGenBailoutError()\n    }\n\n    // We didn't have any sync bailouts but there may be user code which\n    // blocked the root. We would have captured these during the prerender\n    // and can log them here and then terminate the build/validating render\n    const dynamicErrors = dynamicValidation.dynamicErrors\n    if (dynamicErrors.length > 0) {\n      for (let i = 0; i < dynamicErrors.length; i++) {\n        logDisallowedDynamicError(workStore, dynamicErrors[i])\n      }\n\n      throw new StaticGenBailoutError()\n    }\n\n    // If we got this far then the only other thing that could be blocking\n    // the root is dynamic Viewport. If this is dynamic then\n    // you need to opt into that by adding a Suspense boundary above the body\n    // to indicate your are ok with fully dynamic rendering.\n    if (dynamicValidation.hasDynamicViewport) {\n      console.error(\n        `Route \"${workStore.route}\" has a \\`generateViewport\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`\n      )\n      throw new StaticGenBailoutError()\n    }\n\n    if (prelude === PreludeState.Empty) {\n      // If we ever get this far then we messed up the tracking of invalid dynamic.\n      // We still adhere to the constraint that you must produce a shell but invite the\n      // user to report this as a bug in Next.js.\n      console.error(\n        `Route \"${workStore.route}\" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`\n      )\n      throw new StaticGenBailoutError()\n    }\n  } else {\n    if (\n      dynamicValidation.hasAllowedDynamic === false &&\n      dynamicValidation.hasDynamicMetadata\n    ) {\n      console.error(\n        `Route \"${workStore.route}\" has a \\`generateMetadata\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`\n      )\n      throw new StaticGenBailoutError()\n    }\n  }\n}\n\nexport function delayUntilRuntimeStage<T>(\n  prerenderStore: PrerenderStoreModernRuntime,\n  result: Promise<T>\n): Promise<T> {\n  if (prerenderStore.runtimeStagePromise) {\n    return prerenderStore.runtimeStagePromise.then(() => result)\n  }\n  return result\n}\n","import type { AfterTaskAsyncStorage } from './after-task-async-storage.external'\nimport { createAsyncLocalStorage } from './async-local-storage'\n\nexport const afterTaskAsyncStorageInstance: AfterTaskAsyncStorage =\n  createAsyncLocalStorage()\n","import type { AsyncLocalStorage } from 'async_hooks'\n\n// Share the instance module in the next-shared layer\nimport { afterTaskAsyncStorageInstance as afterTaskAsyncStorage } from './after-task-async-storage-instance' with { 'turbopack-transition': 'next-shared' }\nimport type { WorkUnitStore } from './work-unit-async-storage.external'\n\nexport interface AfterTaskStore {\n  /** The phase in which the topmost `after` was called.\n   *\n   * NOTE: Can be undefined when running `generateStaticParams`,\n   * where we only have a `workStore`, no `workUnitStore`.\n   */\n  readonly rootTaskSpawnPhase: WorkUnitStore['phase'] | undefined\n}\n\nexport type AfterTaskAsyncStorage = AsyncLocalStorage<AfterTaskStore>\n\nexport { afterTaskAsyncStorage }\n","import { StaticGenBailoutError } from '../../client/components/static-generation-bailout'\nimport { afterTaskAsyncStorage } from '../app-render/after-task-async-storage.external'\nimport type { WorkStore } from '../app-render/work-async-storage.external'\n\nexport function throwWithStaticGenerationBailoutError(\n  route: string,\n  expression: string\n): never {\n  throw new StaticGenBailoutError(\n    `Route ${route} couldn't be rendered statically because it used ${expression}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`\n  )\n}\n\nexport function throwWithStaticGenerationBailoutErrorWithDynamicError(\n  route: string,\n  expression: string\n): never {\n  throw new StaticGenBailoutError(\n    `Route ${route} with \\`dynamic = \"error\"\\` couldn't be rendered statically because it used ${expression}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`\n  )\n}\n\nexport function throwForSearchParamsAccessInUseCache(\n  workStore: WorkStore,\n  constructorOpt: Function\n): never {\n  const error = new Error(\n    `Route ${workStore.route} used \"searchParams\" inside \"use cache\". Accessing dynamic request data inside a cache scope is not supported. If you need some search params inside a cached function await \"searchParams\" outside of the cached function and pass only the required search params as arguments to the cached function. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`\n  )\n\n  Error.captureStackTrace(error, constructorOpt)\n  workStore.invalidDynamicUsageError ??= error\n\n  throw error\n}\n\nexport function isRequestAPICallableInsideAfter() {\n  const afterTaskStore = afterTaskAsyncStorage.getStore()\n  return afterTaskStore?.rootTaskSpawnPhase === 'action'\n}\n","import { workAsyncStorage } from '../app-render/work-async-storage.external'\nimport {\n  throwForMissingRequestStore,\n  workUnitAsyncStorage,\n} from '../app-render/work-unit-async-storage.external'\nimport {\n  postponeWithTracking,\n  throwToInterruptStaticGeneration,\n  trackDynamicDataInDynamicRender,\n} from '../app-render/dynamic-rendering'\nimport { StaticGenBailoutError } from '../../client/components/static-generation-bailout'\nimport {\n  makeHangingPromise,\n  makeDevtoolsIOAwarePromise,\n} from '../dynamic-rendering-utils'\nimport { isRequestAPICallableInsideAfter } from './utils'\n\n/**\n * This function allows you to indicate that you require an actual user Request before continuing.\n *\n * During prerendering it will never resolve and during rendering it resolves immediately.\n */\nexport function connection(): Promise<void> {\n  const callingExpression = 'connection'\n  const workStore = workAsyncStorage.getStore()\n  const workUnitStore = workUnitAsyncStorage.getStore()\n\n  if (workStore) {\n    if (\n      workUnitStore &&\n      workUnitStore.phase === 'after' &&\n      !isRequestAPICallableInsideAfter()\n    ) {\n      throw new Error(\n        `Route ${workStore.route} used \"connection\" inside \"after(...)\". The \\`connection()\\` function is used to indicate the subsequent code must only run when there is an actual Request, but \"after(...)\" executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`\n      )\n    }\n\n    if (workStore.forceStatic) {\n      // When using forceStatic, we override all other logic and always just\n      // return a resolving promise without tracking.\n      return Promise.resolve(undefined)\n    }\n\n    if (workStore.dynamicShouldError) {\n      throw new StaticGenBailoutError(\n        `Route ${workStore.route} with \\`dynamic = \"error\"\\` couldn't be rendered statically because it used \\`connection\\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`\n      )\n    }\n\n    if (workUnitStore) {\n      switch (workUnitStore.type) {\n        case 'cache': {\n          const error = new Error(\n            `Route ${workStore.route} used \"connection\" inside \"use cache\". The \\`connection()\\` function is used to indicate the subsequent code must only run when there is an actual request, but caches must be able to be produced before a request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`\n          )\n          Error.captureStackTrace(error, connection)\n          workStore.invalidDynamicUsageError ??= error\n          throw error\n        }\n        case 'private-cache': {\n          // It might not be intuitive to throw for private caches as well, but\n          // we don't consider runtime prefetches as \"actual requests\" (in the\n          // navigation sense), despite allowing them to read cookies.\n          const error = new Error(\n            `Route ${workStore.route} used \"connection\" inside \"use cache: private\". The \\`connection()\\` function is used to indicate the subsequent code must only run when there is an actual navigation request, but caches must be able to be produced before a navigation request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`\n          )\n          Error.captureStackTrace(error, connection)\n          workStore.invalidDynamicUsageError ??= error\n          throw error\n        }\n        case 'unstable-cache':\n          throw new Error(\n            `Route ${workStore.route} used \"connection\" inside a function cached with \"unstable_cache(...)\". The \\`connection()\\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`\n          )\n        case 'prerender':\n        case 'prerender-client':\n        case 'prerender-runtime':\n          // We return a promise that never resolves to allow the prerender to\n          // stall at this point.\n          return makeHangingPromise(\n            workUnitStore.renderSignal,\n            workStore.route,\n            '`connection()`'\n          )\n        case 'prerender-ppr':\n          // We use React's postpone API to interrupt rendering here to create a\n          // dynamic hole\n          return postponeWithTracking(\n            workStore.route,\n            'connection',\n            workUnitStore.dynamicTracking\n          )\n        case 'prerender-legacy':\n          // We throw an error here to interrupt prerendering to mark the route\n          // as dynamic\n          return throwToInterruptStaticGeneration(\n            'connection',\n            workStore,\n            workUnitStore\n          )\n        case 'request':\n          trackDynamicDataInDynamicRender(workUnitStore)\n          if (process.env.NODE_ENV === 'development') {\n            // Semantically we only need the dev tracking when running in `next dev`\n            // but since you would never use next dev with production NODE_ENV we use this\n            // as a proxy so we can statically exclude this code from production builds.\n            return makeDevtoolsIOAwarePromise(undefined)\n          } else {\n            return Promise.resolve(undefined)\n          }\n        default:\n          workUnitStore satisfies never\n      }\n    }\n  }\n\n  // If we end up here, there was no work store or work unit store present.\n  throwForMissingRequestStore(callingExpression)\n}\n","// This regex will have fast negatives meaning valid identifiers may not pass\n// this test. However this is only used during static generation to provide hints\n// about why a page bailed out of some or all prerendering and we can use bracket notation\n// for example while `ಠ_ಠ` is a valid identifier it's ok to print `searchParams['ಠ_ಠ']`\n// even if this would have been fine too `searchParams.ಠ_ಠ`\nconst isDefinitelyAValidIdentifier = /^[A-Za-z_$][A-Za-z0-9_$]*$/\n\nexport function describeStringPropertyAccess(target: string, prop: string) {\n  if (isDefinitelyAValidIdentifier.test(prop)) {\n    return `\\`${target}.${prop}\\``\n  }\n  return `\\`${target}[${JSON.stringify(prop)}]\\``\n}\n\nexport function describeHasCheckingStringProperty(\n  target: string,\n  prop: string\n) {\n  const stringifiedProp = JSON.stringify(prop)\n  return `\\`Reflect.has(${target}, ${stringifiedProp})\\`, \\`${stringifiedProp} in ${target}\\`, or similar`\n}\n\nexport const wellKnownProperties = new Set([\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toString',\n  'valueOf',\n  'toLocaleString',\n\n  // Promise prototype\n  // fallthrough\n  'then',\n  'catch',\n  'finally',\n\n  // React Promise extension\n  // fallthrough\n  'status',\n\n  // React introspection\n  'displayName',\n  '_debugInfo',\n\n  // Common tested properties\n  // fallthrough\n  'toJSON',\n  '$$typeof',\n  '__esModule',\n])\n","import type { ActionAsyncStorage } from './action-async-storage.external'\nimport { createAsyncLocalStorage } from './async-local-storage'\n\nexport const actionAsyncStorageInstance: ActionAsyncStorage =\n  createAsyncLocalStorage()\n","import type { AsyncLocalStorage } from 'async_hooks'\n\n// Share the instance module in the next-shared layer\nimport { actionAsyncStorageInstance } from './action-async-storage-instance' with { 'turbopack-transition': 'next-shared' }\nexport interface ActionStore {\n  readonly isAction?: boolean\n  readonly isAppRoute?: boolean\n}\n\nexport type ActionAsyncStorage = AsyncLocalStorage<ActionStore>\n\nexport { actionAsyncStorageInstance as actionAsyncStorage }\n","// ISC License\n\n// Copyright (c) 2021 Alexey Raspopov, Kostiantyn Denysov, Anton Verinov\n\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n//\n// https://github.com/alexeyraspopov/picocolors/blob/b6261487e7b81aaab2440e397a356732cad9e342/picocolors.js#L1\n\nconst { env, stdout } = globalThis?.process ?? {}\n\nconst enabled =\n  env &&\n  !env.NO_COLOR &&\n  (env.FORCE_COLOR || (stdout?.isTTY && !env.CI && env.TERM !== 'dumb'))\n\nconst replaceClose = (\n  str: string,\n  close: string,\n  replace: string,\n  index: number\n): string => {\n  const start = str.substring(0, index) + replace\n  const end = str.substring(index + close.length)\n  const nextIndex = end.indexOf(close)\n  return ~nextIndex\n    ? start + replaceClose(end, close, replace, nextIndex)\n    : start + end\n}\n\nconst formatter = (open: string, close: string, replace = open) => {\n  if (!enabled) return String\n  return (input: string) => {\n    const string = '' + input\n    const index = string.indexOf(close, open.length)\n    return ~index\n      ? open + replaceClose(string, close, replace, index) + close\n      : open + string + close\n  }\n}\n\nexport const reset = enabled ? (s: string) => `\\x1b[0m${s}\\x1b[0m` : String\nexport const bold = formatter('\\x1b[1m', '\\x1b[22m', '\\x1b[22m\\x1b[1m')\nexport const dim = formatter('\\x1b[2m', '\\x1b[22m', '\\x1b[22m\\x1b[2m')\nexport const italic = formatter('\\x1b[3m', '\\x1b[23m')\nexport const underline = formatter('\\x1b[4m', '\\x1b[24m')\nexport const inverse = formatter('\\x1b[7m', '\\x1b[27m')\nexport const hidden = formatter('\\x1b[8m', '\\x1b[28m')\nexport const strikethrough = formatter('\\x1b[9m', '\\x1b[29m')\nexport const black = formatter('\\x1b[30m', '\\x1b[39m')\nexport const red = formatter('\\x1b[31m', '\\x1b[39m')\nexport const green = formatter('\\x1b[32m', '\\x1b[39m')\nexport const yellow = formatter('\\x1b[33m', '\\x1b[39m')\nexport const blue = formatter('\\x1b[34m', '\\x1b[39m')\nexport const magenta = formatter('\\x1b[35m', '\\x1b[39m')\nexport const purple = formatter('\\x1b[38;2;173;127;168m', '\\x1b[39m')\nexport const cyan = formatter('\\x1b[36m', '\\x1b[39m')\nexport const white = formatter('\\x1b[37m', '\\x1b[39m')\nexport const gray = formatter('\\x1b[90m', '\\x1b[39m')\nexport const bgBlack = formatter('\\x1b[40m', '\\x1b[49m')\nexport const bgRed = formatter('\\x1b[41m', '\\x1b[49m')\nexport const bgGreen = formatter('\\x1b[42m', '\\x1b[49m')\nexport const bgYellow = formatter('\\x1b[43m', '\\x1b[49m')\nexport const bgBlue = formatter('\\x1b[44m', '\\x1b[49m')\nexport const bgMagenta = formatter('\\x1b[45m', '\\x1b[49m')\nexport const bgCyan = formatter('\\x1b[46m', '\\x1b[49m')\nexport const bgWhite = formatter('\\x1b[47m', '\\x1b[49m')\n","/**\n * Node in the doubly-linked list used for LRU tracking.\n * Each node represents a cache entry with bidirectional pointers.\n */\nclass LRUNode<T> {\n  public readonly key: string\n  public data: T\n  public size: number\n  public prev: LRUNode<T> | SentinelNode<T> | null = null\n  public next: LRUNode<T> | SentinelNode<T> | null = null\n\n  constructor(key: string, data: T, size: number) {\n    this.key = key\n    this.data = data\n    this.size = size\n  }\n}\n\n/**\n * Sentinel node used for head/tail boundaries.\n * These nodes don't contain actual cache data but simplify list operations.\n */\nclass SentinelNode<T> {\n  public prev: LRUNode<T> | SentinelNode<T> | null = null\n  public next: LRUNode<T> | SentinelNode<T> | null = null\n}\n\n/**\n * LRU (Least Recently Used) Cache implementation using a doubly-linked list\n * and hash map for O(1) operations.\n *\n * Algorithm:\n * - Uses a doubly-linked list to maintain access order (most recent at head)\n * - Hash map provides O(1) key-to-node lookup\n * - Sentinel head/tail nodes simplify edge case handling\n * - Size-based eviction supports custom size calculation functions\n *\n * Data Structure Layout:\n * HEAD <-> [most recent] <-> ... <-> [least recent] <-> TAIL\n *\n * Operations:\n * - get(): Move accessed node to head (mark as most recent)\n * - set(): Add new node at head, evict from tail if over capacity\n * - Eviction: Remove least recent node (tail.prev) when size exceeds limit\n */\nexport class LRUCache<T> {\n  private readonly cache: Map<string, LRUNode<T>> = new Map()\n  private readonly head: SentinelNode<T>\n  private readonly tail: SentinelNode<T>\n  private totalSize: number = 0\n  private readonly maxSize: number\n  private readonly calculateSize: ((value: T) => number) | undefined\n\n  constructor(maxSize: number, calculateSize?: (value: T) => number) {\n    this.maxSize = maxSize\n    this.calculateSize = calculateSize\n\n    // Create sentinel nodes to simplify doubly-linked list operations\n    // HEAD <-> TAIL (empty list)\n    this.head = new SentinelNode<T>()\n    this.tail = new SentinelNode<T>()\n    this.head.next = this.tail\n    this.tail.prev = this.head\n  }\n\n  /**\n   * Adds a node immediately after the head (marks as most recently used).\n   * Used when inserting new items or when an item is accessed.\n   * PRECONDITION: node must be disconnected (prev/next should be null)\n   */\n  private addToHead(node: LRUNode<T>): void {\n    node.prev = this.head\n    node.next = this.head.next\n    // head.next is always non-null (points to tail or another node)\n    this.head.next!.prev = node\n    this.head.next = node\n  }\n\n  /**\n   * Removes a node from its current position in the doubly-linked list.\n   * Updates the prev/next pointers of adjacent nodes to maintain list integrity.\n   * PRECONDITION: node must be connected (prev/next are non-null)\n   */\n  private removeNode(node: LRUNode<T>): void {\n    // Connected nodes always have non-null prev/next\n    node.prev!.next = node.next\n    node.next!.prev = node.prev\n  }\n\n  /**\n   * Moves an existing node to the head position (marks as most recently used).\n   * This is the core LRU operation - accessed items become most recent.\n   */\n  private moveToHead(node: LRUNode<T>): void {\n    this.removeNode(node)\n    this.addToHead(node)\n  }\n\n  /**\n   * Removes and returns the least recently used node (the one before tail).\n   * This is called during eviction when the cache exceeds capacity.\n   * PRECONDITION: cache is not empty (ensured by caller)\n   */\n  private removeTail(): LRUNode<T> {\n    const lastNode = this.tail.prev as LRUNode<T>\n    // tail.prev is always non-null and always LRUNode when cache is not empty\n    this.removeNode(lastNode)\n    return lastNode\n  }\n\n  /**\n   * Sets a key-value pair in the cache.\n   * If the key exists, updates the value and moves to head.\n   * If new, adds at head and evicts from tail if necessary.\n   *\n   * Time Complexity:\n   * - O(1) for uniform item sizes\n   * - O(k) where k is the number of items evicted (can be O(N) for variable sizes)\n   */\n  public set(key: string, value: T): void {\n    const size = this.calculateSize?.(value) ?? 1\n    if (size > this.maxSize) {\n      console.warn('Single item size exceeds maxSize')\n      return\n    }\n\n    const existing = this.cache.get(key)\n    if (existing) {\n      // Update existing node: adjust size and move to head (most recent)\n      existing.data = value\n      this.totalSize = this.totalSize - existing.size + size\n      existing.size = size\n      this.moveToHead(existing)\n    } else {\n      // Add new node at head (most recent position)\n      const newNode = new LRUNode(key, value, size)\n      this.cache.set(key, newNode)\n      this.addToHead(newNode)\n      this.totalSize += size\n    }\n\n    // Evict least recently used items until under capacity\n    while (this.totalSize > this.maxSize && this.cache.size > 0) {\n      const tail = this.removeTail()\n      this.cache.delete(tail.key)\n      this.totalSize -= tail.size\n    }\n  }\n\n  /**\n   * Checks if a key exists in the cache.\n   * This is a pure query operation - does NOT update LRU order.\n   *\n   * Time Complexity: O(1)\n   */\n  public has(key: string): boolean {\n    return this.cache.has(key)\n  }\n\n  /**\n   * Retrieves a value by key and marks it as most recently used.\n   * Moving to head maintains the LRU property for future evictions.\n   *\n   * Time Complexity: O(1)\n   */\n  public get(key: string): T | undefined {\n    const node = this.cache.get(key)\n    if (!node) return undefined\n\n    // Mark as most recently used by moving to head\n    this.moveToHead(node)\n\n    return node.data\n  }\n\n  /**\n   * Returns an iterator over the cache entries. The order is outputted in the\n   * order of most recently used to least recently used.\n   */\n  public *[Symbol.iterator](): IterableIterator<[string, T]> {\n    let current = this.head.next\n    while (current && current !== this.tail) {\n      // Between head and tail, current is always LRUNode\n      const node = current as LRUNode<T>\n      yield [node.key, node.data]\n      current = current.next\n    }\n  }\n\n  /**\n   * Removes a specific key from the cache.\n   * Updates both the hash map and doubly-linked list.\n   *\n   * Time Complexity: O(1)\n   */\n  public remove(key: string): void {\n    const node = this.cache.get(key)\n    if (!node) return\n\n    this.removeNode(node)\n    this.cache.delete(key)\n    this.totalSize -= node.size\n  }\n\n  /**\n   * Returns the number of items in the cache.\n   */\n  public get size(): number {\n    return this.cache.size\n  }\n\n  /**\n   * Returns the current total size of all cached items.\n   * This uses the custom size calculation if provided.\n   */\n  public get currentSize(): number {\n    return this.totalSize\n  }\n}\n","import { bold, green, magenta, red, yellow, white } from '../../lib/picocolors'\nimport { LRUCache } from '../../server/lib/lru-cache'\n\nexport const prefixes = {\n  wait: white(bold('○')),\n  error: red(bold('⨯')),\n  warn: yellow(bold('⚠')),\n  ready: '▲', // no color\n  info: white(bold(' ')),\n  event: green(bold('✓')),\n  trace: magenta(bold('»')),\n} as const\n\nconst LOGGING_METHOD = {\n  log: 'log',\n  warn: 'warn',\n  error: 'error',\n} as const\n\nfunction prefixedLog(prefixType: keyof typeof prefixes, ...message: any[]) {\n  if ((message[0] === '' || message[0] === undefined) && message.length === 1) {\n    message.shift()\n  }\n\n  const consoleMethod: keyof typeof LOGGING_METHOD =\n    prefixType in LOGGING_METHOD\n      ? LOGGING_METHOD[prefixType as keyof typeof LOGGING_METHOD]\n      : 'log'\n\n  const prefix = prefixes[prefixType]\n  // If there's no message, don't print the prefix but a new line\n  if (message.length === 0) {\n    console[consoleMethod]('')\n  } else {\n    // Ensure if there's ANSI escape codes it's concatenated into one string.\n    // Chrome DevTool can only handle color if it's in one string.\n    if (message.length === 1 && typeof message[0] === 'string') {\n      console[consoleMethod](' ' + prefix + ' ' + message[0])\n    } else {\n      console[consoleMethod](' ' + prefix, ...message)\n    }\n  }\n}\n\nexport function bootstrap(...message: string[]) {\n  // logging format: ' <prefix> <message>'\n  // e.g. ' ✓ Compiled successfully'\n  // Add spaces to align with the indent of other logs\n  console.log('   ' + message.join(' '))\n}\n\nexport function wait(...message: any[]) {\n  prefixedLog('wait', ...message)\n}\n\nexport function error(...message: any[]) {\n  prefixedLog('error', ...message)\n}\n\nexport function warn(...message: any[]) {\n  prefixedLog('warn', ...message)\n}\n\nexport function ready(...message: any[]) {\n  prefixedLog('ready', ...message)\n}\n\nexport function info(...message: any[]) {\n  prefixedLog('info', ...message)\n}\n\nexport function event(...message: any[]) {\n  prefixedLog('event', ...message)\n}\n\nexport function trace(...message: any[]) {\n  prefixedLog('trace', ...message)\n}\n\nconst warnOnceCache = new LRUCache<string>(10_000, (value) => value.length)\nexport function warnOnce(...message: any[]) {\n  const key = message.join(' ')\n  if (!warnOnceCache.has(key)) {\n    warnOnceCache.set(key, key)\n    warn(...message)\n  }\n}\n","import { InvariantError } from '../../shared/lib/invariant-error'\nimport {\n  postponeWithTracking,\n  throwToInterruptStaticGeneration,\n} from '../app-render/dynamic-rendering'\nimport {\n  workAsyncStorage,\n  type WorkStore,\n} from '../app-render/work-async-storage.external'\nimport {\n  workUnitAsyncStorage,\n  type PrerenderStoreLegacy,\n  type PrerenderStorePPR,\n  type StaticPrerenderStore,\n} from '../app-render/work-unit-async-storage.external'\nimport { makeHangingPromise } from '../dynamic-rendering-utils'\nimport type { FallbackRouteParams } from './fallback-params'\nimport type { Params, ParamValue } from './params'\nimport {\n  describeStringPropertyAccess,\n  wellKnownProperties,\n} from '../../shared/lib/utils/reflect-utils'\nimport { actionAsyncStorage } from '../app-render/action-async-storage.external'\nimport { warnOnce } from '../../build/output/log'\n\ninterface CacheLifetime {}\nconst CachedParams = new WeakMap<CacheLifetime, Promise<Params>>()\n\n/**\n * @deprecated import specific root params from `next/root-params` instead.\n */\nexport async function unstable_rootParams(): Promise<Params> {\n  warnOnce(\n    '`unstable_rootParams()` is deprecated and will be removed in an upcoming major release. Import specific root params from `next/root-params` instead.'\n  )\n  const workStore = workAsyncStorage.getStore()\n  if (!workStore) {\n    throw new InvariantError('Missing workStore in unstable_rootParams')\n  }\n\n  const workUnitStore = workUnitAsyncStorage.getStore()\n\n  if (!workUnitStore) {\n    throw new Error(\n      `Route ${workStore.route} used \\`unstable_rootParams()\\` in Pages Router. This API is only available within App Router.`\n    )\n  }\n\n  switch (workUnitStore.type) {\n    case 'cache':\n    case 'unstable-cache': {\n      throw new Error(\n        `Route ${workStore.route} used \\`unstable_rootParams()\\` inside \\`\"use cache\"\\` or \\`unstable_cache\\`. Support for this API inside cache scopes is planned for a future version of Next.js.`\n      )\n    }\n    case 'prerender':\n    case 'prerender-client':\n    case 'prerender-ppr':\n    case 'prerender-legacy':\n      return createPrerenderRootParams(\n        workUnitStore.rootParams,\n        workStore,\n        workUnitStore\n      )\n    case 'private-cache':\n    case 'prerender-runtime':\n    case 'request':\n      return Promise.resolve(workUnitStore.rootParams)\n    default:\n      return workUnitStore satisfies never\n  }\n}\n\nfunction createPrerenderRootParams(\n  underlyingParams: Params,\n  workStore: WorkStore,\n  prerenderStore: StaticPrerenderStore\n): Promise<Params> {\n  switch (prerenderStore.type) {\n    case 'prerender-client': {\n      const exportName = '`unstable_rootParams`'\n      throw new InvariantError(\n        `${exportName} must not be used within a client component. Next.js should be preventing ${exportName} from being included in client components statically, but did not in this case.`\n      )\n    }\n    case 'prerender': {\n      const fallbackParams = prerenderStore.fallbackRouteParams\n      if (fallbackParams) {\n        for (const key in underlyingParams) {\n          if (fallbackParams.has(key)) {\n            const cachedParams = CachedParams.get(underlyingParams)\n            if (cachedParams) {\n              return cachedParams\n            }\n\n            const promise = makeHangingPromise<Params>(\n              prerenderStore.renderSignal,\n              workStore.route,\n              '`unstable_rootParams`'\n            )\n            CachedParams.set(underlyingParams, promise)\n\n            return promise\n          }\n        }\n      }\n      break\n    }\n    case 'prerender-ppr': {\n      const fallbackParams = prerenderStore.fallbackRouteParams\n      if (fallbackParams) {\n        for (const key in underlyingParams) {\n          if (fallbackParams.has(key)) {\n            // We have fallback params at this level so we need to make an erroring\n            // params object which will postpone if you access the fallback params\n            return makeErroringRootParams(\n              underlyingParams,\n              fallbackParams,\n              workStore,\n              prerenderStore\n            )\n          }\n        }\n      }\n      break\n    }\n    case 'prerender-legacy':\n      break\n    default:\n      prerenderStore satisfies never\n  }\n\n  // We don't have any fallback params so we have an entirely static safe params object\n  return Promise.resolve(underlyingParams)\n}\n\nfunction makeErroringRootParams(\n  underlyingParams: Params,\n  fallbackParams: FallbackRouteParams,\n  workStore: WorkStore,\n  prerenderStore: PrerenderStorePPR | PrerenderStoreLegacy\n): Promise<Params> {\n  const cachedParams = CachedParams.get(underlyingParams)\n  if (cachedParams) {\n    return cachedParams\n  }\n\n  const augmentedUnderlying = { ...underlyingParams }\n\n  // We don't use makeResolvedReactPromise here because params\n  // supports copying with spread and we don't want to unnecessarily\n  // instrument the promise with spreadable properties of ReactPromise.\n  const promise = Promise.resolve(augmentedUnderlying)\n  CachedParams.set(underlyingParams, promise)\n\n  Object.keys(underlyingParams).forEach((prop) => {\n    if (wellKnownProperties.has(prop)) {\n      // These properties cannot be shadowed because they need to be the\n      // true underlying value for Promises to work correctly at runtime\n    } else {\n      if (fallbackParams.has(prop)) {\n        Object.defineProperty(augmentedUnderlying, prop, {\n          get() {\n            const expression = describeStringPropertyAccess(\n              'unstable_rootParams',\n              prop\n            )\n            // In most dynamic APIs we also throw if `dynamic = \"error\"` however\n            // for params is only dynamic when we're generating a fallback shell\n            // and even when `dynamic = \"error\"` we still support generating dynamic\n            // fallback shells\n            // TODO remove this comment when cacheComponents is the default since there\n            // will be no `dynamic = \"error\"`\n            if (prerenderStore.type === 'prerender-ppr') {\n              // PPR Prerender (no cacheComponents)\n              postponeWithTracking(\n                workStore.route,\n                expression,\n                prerenderStore.dynamicTracking\n              )\n            } else {\n              // Legacy Prerender\n              throwToInterruptStaticGeneration(\n                expression,\n                workStore,\n                prerenderStore\n              )\n            }\n          },\n          enumerable: true,\n        })\n      } else {\n        ;(promise as any)[prop] = underlyingParams[prop]\n      }\n    }\n  })\n\n  return promise\n}\n\n/**\n * Used for the compiler-generated `next/root-params` module.\n * @internal\n */\nexport function getRootParam(paramName: string): Promise<ParamValue> {\n  const apiName = `\\`import('next/root-params').${paramName}()\\``\n\n  const workStore = workAsyncStorage.getStore()\n  if (!workStore) {\n    throw new InvariantError(`Missing workStore in ${apiName}`)\n  }\n\n  const workUnitStore = workUnitAsyncStorage.getStore()\n  if (!workUnitStore) {\n    throw new Error(\n      `Route ${workStore.route} used ${apiName} outside of a Server Component. This is not allowed.`\n    )\n  }\n\n  const actionStore = actionAsyncStorage.getStore()\n  if (actionStore) {\n    if (actionStore.isAppRoute) {\n      // TODO(root-params): add support for route handlers\n      throw new Error(\n        `Route ${workStore.route} used ${apiName} inside a Route Handler. Support for this API in Route Handlers is planned for a future version of Next.js.`\n      )\n    }\n    if (actionStore.isAction && workUnitStore.phase === 'action') {\n      // Actions are not fundamentally tied to a route (even if they're always submitted from some page),\n      // so root params would be inconsistent if an action is called from multiple roots.\n      // Make sure we check if the phase is \"action\" - we should not error in the rerender\n      // after an action revalidates or updates cookies (which will still have `actionStore.isAction === true`)\n      throw new Error(\n        `${apiName} was used inside a Server Action. This is not supported. Functions from 'next/root-params' can only be called in the context of a route.`\n      )\n    }\n  }\n\n  switch (workUnitStore.type) {\n    case 'unstable-cache':\n    case 'cache': {\n      throw new Error(\n        `Route ${workStore.route} used ${apiName} inside \\`\"use cache\"\\` or \\`unstable_cache\\`. Support for this API inside cache scopes is planned for a future version of Next.js.`\n      )\n    }\n    case 'prerender':\n    case 'prerender-client':\n    case 'prerender-ppr':\n    case 'prerender-legacy': {\n      return createPrerenderRootParamPromise(\n        paramName,\n        workStore,\n        workUnitStore,\n        apiName\n      )\n    }\n    case 'private-cache':\n    case 'prerender-runtime':\n    case 'request': {\n      break\n    }\n    default: {\n      workUnitStore satisfies never\n    }\n  }\n  return Promise.resolve(workUnitStore.rootParams[paramName])\n}\n\nfunction createPrerenderRootParamPromise(\n  paramName: string,\n  workStore: WorkStore,\n  prerenderStore: StaticPrerenderStore,\n  apiName: string\n): Promise<ParamValue> {\n  switch (prerenderStore.type) {\n    case 'prerender-client': {\n      throw new InvariantError(\n        `${apiName} must not be used within a client component. Next.js should be preventing ${apiName} from being included in client components statically, but did not in this case.`\n      )\n    }\n    case 'prerender':\n    case 'prerender-legacy':\n    case 'prerender-ppr':\n    default:\n  }\n\n  const underlyingParams = prerenderStore.rootParams\n\n  switch (prerenderStore.type) {\n    case 'prerender': {\n      // We are in a dynamicIO prerender.\n      // The param is a fallback, so it should be treated as dynamic.\n      if (\n        prerenderStore.fallbackRouteParams &&\n        prerenderStore.fallbackRouteParams.has(paramName)\n      ) {\n        return makeHangingPromise<ParamValue>(\n          prerenderStore.renderSignal,\n          workStore.route,\n          apiName\n        )\n      }\n      break\n    }\n    case 'prerender-ppr': {\n      // We aren't in a dynamicIO prerender, but the param is a fallback,\n      // so we need to make an erroring params object which will postpone/error if you access it\n      if (\n        prerenderStore.fallbackRouteParams &&\n        prerenderStore.fallbackRouteParams.has(paramName)\n      ) {\n        return makeErroringRootParamPromise(\n          paramName,\n          workStore,\n          prerenderStore,\n          apiName\n        )\n      }\n      break\n    }\n    case 'prerender-legacy': {\n      // legacy prerenders can't have fallback params\n      break\n    }\n    default: {\n      prerenderStore satisfies never\n    }\n  }\n\n  // If the param is not a fallback param, we just return the statically available value.\n  return Promise.resolve(underlyingParams[paramName])\n}\n\n/** Deliberately async -- we want to create a rejected promise, not error synchronously. */\nasync function makeErroringRootParamPromise(\n  paramName: string,\n  workStore: WorkStore,\n  prerenderStore: PrerenderStorePPR | PrerenderStoreLegacy,\n  apiName: string\n): Promise<ParamValue> {\n  const expression = describeStringPropertyAccess(apiName, paramName)\n  // In most dynamic APIs, we also throw if `dynamic = \"error\"`.\n  // However, root params are only dynamic when we're generating a fallback shell,\n  // and even with `dynamic = \"error\"` we still support generating dynamic fallback shells.\n  // TODO: remove this comment when dynamicIO is the default since there will be no `dynamic = \"error\"`\n  switch (prerenderStore.type) {\n    case 'prerender-ppr': {\n      return postponeWithTracking(\n        workStore.route,\n        expression,\n        prerenderStore.dynamicTracking\n      )\n    }\n    case 'prerender-legacy': {\n      return throwToInterruptStaticGeneration(\n        expression,\n        workStore,\n        prerenderStore\n      )\n    }\n    default: {\n      prerenderStore satisfies never\n    }\n  }\n}\n","const serverExports = {\n  NextRequest: require('next/dist/server/web/spec-extension/request')\n    .NextRequest,\n  NextResponse: require('next/dist/server/web/spec-extension/response')\n    .NextResponse,\n  ImageResponse: require('next/dist/server/web/spec-extension/image-response')\n    .ImageResponse,\n  userAgentFromString: require('next/dist/server/web/spec-extension/user-agent')\n    .userAgentFromString,\n  userAgent: require('next/dist/server/web/spec-extension/user-agent')\n    .userAgent,\n  URLPattern: require('next/dist/server/web/spec-extension/url-pattern')\n    .URLPattern,\n  after: require('next/dist/server/after').after,\n  connection: require('next/dist/server/request/connection').connection,\n  unstable_rootParams: require('next/dist/server/request/root-params')\n    .unstable_rootParams,\n}\n\n// https://nodejs.org/api/esm.html#commonjs-namespaces\n// When importing CommonJS modules, the module.exports object is provided as the default export\nmodule.exports = serverExports\n\n// make import { xxx } from 'next/server' work\nexports.NextRequest = serverExports.NextRequest\nexports.NextResponse = serverExports.NextResponse\nexports.ImageResponse = serverExports.ImageResponse\nexports.userAgentFromString = serverExports.userAgentFromString\nexports.userAgent = serverExports.userAgent\nexports.URLPattern = serverExports.URLPattern\nexports.after = serverExports.after\nexports.connection = serverExports.connection\nexports.unstable_rootParams = serverExports.unstable_rootParams\n","import { useEffect, useCallback, useRef } from 'react';\nimport { GrowthKitAPI } from './api';\nimport { getFingerprint } from './fingerprint';\nimport { useGrowthKitConfig } from './components/GrowthKitProvider';\nimport { useGrowthKitState } from './components/GrowthKitStateProvider';\nimport { getBrowserContext, generateSessionId } from './context';\nimport type {\n  GrowthKitConfig,\n  GrowthKitState,\n  GrowthKitActions,\n  GrowthKitHook,\n  ShareOptions,\n  CompleteActionOptions,\n  TrackedEvent,\n} from './types';\n\n// Initial state is now managed in GrowthKitStateProvider\n\n// Constants for event batching\nconst BATCH_SIZE = 10;\nconst BATCH_INTERVAL = 30000; // 30 seconds\n\nexport function useGrowthKit(): GrowthKitHook {\n  const { config, setTheme } = useGrowthKitConfig();\n  const { state, setState, apiRef, initRef } = useGrowthKitState();\n  const configRef = useRef(config);\n  configRef.current = config;\n  \n  // Event tracking state\n  const eventQueueRef = useRef<TrackedEvent[]>([]);\n  const batchTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const sessionIdRef = useRef<string>(generateSessionId());\n  const contextRef = useRef(getBrowserContext());\n  \n  // Log initial context for debugging\n  useEffect(() => {\n    if (config.debug) {\n      console.log('Initial browser context:', getBrowserContext());\n    }\n  }, [config.debug]);\n\n  // Initialize API client\n  useEffect(() => {\n    // In proxy mode, no API key is required (it's handled server-side)\n    // In public mode, public key is required\n    // In direct mode, API key is required\n    apiRef.current = new GrowthKitAPI(config.apiKey, config.publicKey, config.apiUrl, config.debug);\n  }, [config.apiKey, config.publicKey, config.apiUrl, config.debug]);\n\n  // Initialize fingerprint and fetch user data\n  const initialize = useCallback(async () => {\n    if (!apiRef.current || initRef.current) return;\n    initRef.current = true;\n\n    try {\n      setState(prev => ({ ...prev, loading: true, error: null }));\n\n      if (configRef.current.debug) {\n        console.log('[GrowthKit] Starting initialization...');\n      }\n\n      // Get browser fingerprint\n      const fingerprint = await getFingerprint();\n      apiRef.current.setFingerprint(fingerprint);\n\n      if (configRef.current.debug) {\n        console.log('[GrowthKit] Fingerprint obtained:', fingerprint.substring(0, 10) + '...');\n      }\n\n      // Check for URL parameters\n      const urlParams = new URLSearchParams(window.location.search);\n      const refClaim = urlParams.get('ref');\n      const invitation = urlParams.get('invitation');\n      const verifyToken = urlParams.get('verify');\n      \n      if (configRef.current.debug) {\n        if (refClaim) console.log('[GrowthKit] Referral claim found in URL:', refClaim);\n        if (invitation) console.log('[GrowthKit] Invitation code found in URL:', invitation);\n        if (verifyToken) console.log('[GrowthKit] Verification token found in URL:', verifyToken);\n      }\n\n      // Process parameters\n      if (refClaim) {\n        try {\n          const referralResponse = await apiRef.current.checkReferral(fingerprint, refClaim);\n          if (configRef.current.debug) {\n            console.log('[GrowthKit] Referral processed:', referralResponse);\n          }\n        } catch (error) {\n          if (configRef.current.debug) {\n            console.log('[GrowthKit] Referral processing failed:', error);\n          }\n        }\n      }\n\n      if (invitation) {\n        try {\n          // Process invitation code (different from referral)\n          const invitationResponse = await apiRef.current.redeemInvitation(fingerprint, invitation);\n          if (configRef.current.debug) {\n            console.log('[GrowthKit] Invitation processed:', invitationResponse);\n          }\n        } catch (error) {\n          if (configRef.current.debug) {\n            console.log('[GrowthKit] Invitation processing failed:', error);\n          }\n        }\n      }\n\n      if (verifyToken) {\n        try {\n          const verifyResponse = await apiRef.current.verifyEmail(fingerprint, verifyToken);\n          if (configRef.current.debug) {\n            console.log('[GrowthKit] Email verification processed:', verifyResponse);\n          }\n        } catch (error) {\n          if (configRef.current.debug) {\n            console.log('[GrowthKit] Email verification failed:', error);\n          }\n        }\n      }\n\n      // Clean up URL after processing\n      if (typeof window !== 'undefined' && window.history?.replaceState) {\n        const cleanUrl = new URL(window.location.href);\n        if (refClaim) cleanUrl.searchParams.delete('ref');\n        if (invitation) cleanUrl.searchParams.delete('invitation');\n        if (verifyToken) cleanUrl.searchParams.delete('verify');\n        \n        // Only update if we actually removed something\n        if (refClaim || invitation || verifyToken) {\n          window.history.replaceState({}, '', cleanUrl.toString());\n        }\n      }\n      \n      // Fetch user data\n      const response = await apiRef.current.getMe(fingerprint);\n      \n      if (configRef.current.debug) {\n        console.log('[GrowthKit] API Response Data:', response);\n      }\n      \n      if (!response.success) {\n        // Log detailed error information for debugging\n        if (configRef.current.debug) {\n          console.error('[GrowthKit] API Error Details:', {\n            endpoint: '/v1/me',\n            fingerprint: fingerprint.substring(0, 10) + '...',\n            claim: refClaim,\n            error: response.error,\n            timestamp: new Date().toISOString(),\n            apiUrl: apiRef.current ? 'set' : 'not set'\n          });\n        }\n\n        // Graceful degradation: Set minimal state instead of throwing\n        console.warn('[GrowthKit] Failed to fetch user data, using fallback state:', response.error || 'Unknown error');\n        \n        setState(prev => ({\n          ...prev,\n          loading: false,\n          initialized: true,\n          error: new Error(response.error || 'Failed to fetch user data'),\n          fingerprint,\n          // Set minimal default state\n          credits: 0,\n          usage: 0,\n          referralCode: null,\n          creditsPaused: false,\n          policy: null,\n          name: null,\n          email: null,\n          hasClaimedName: false,\n          hasClaimedEmail: false,\n          hasVerifiedEmail: false,\n          waitlistEnabled: false,\n          waitlistStatus: 'none',\n          waitlistPosition: null,\n          waitlistMessage: undefined,\n          shouldShowWaitlist: false,\n        }));\n        \n        return; // Exit gracefully without throwing\n      }\n\n      const data = response.data!;\n      \n      if (configRef.current.debug) {\n        console.log('[GrowthKit] Raw API response structure:', {\n          fullResponse: response,\n          data: data,\n          dataKeys: Object.keys(data || {}),\n          nameValue: data.name,\n          emailValue: data.email,\n          hasClaimedNameValue: data.hasClaimedName,\n        });\n      }\n      \n      // URL cleanup is now handled in the referral processing section above\n\n      // Parse waitlist data\n      const waitlistData = data.waitlist;\n      const waitlistEnabled = waitlistData?.enabled || false;\n      const waitlistStatus = waitlistData?.status || 'none';\n      const waitlistPosition = waitlistData?.position || null;\n      const waitlistMessage = waitlistData?.message;\n      \n      // Determine if waitlist gate should show\n      // Show for both 'none' (to join) and 'waiting' (to see position)\n      const shouldShowWaitlist = waitlistEnabled && \n        (waitlistStatus === 'none' || waitlistStatus === 'waiting') && \n        waitlistData?.requiresWaitlist === true;\n\n      // Debug logging\n      if (configRef.current.debug) {\n        console.log('[GrowthKit] API Response:', data);\n        console.log('[GrowthKit] Referral Code:', data.referralCode);\n      }\n      \n      setState({\n        loading: false,\n        initialized: true,\n        error: null,\n        fingerprint,\n        credits: data.credits,\n        usage: data.usage,\n        creditsPaused: data.creditsPaused || false,\n        referralCode: data.referralCode,\n        policy: data.policy,\n        name: data.name || null,\n        email: data.email || null,\n        hasClaimedName: data.hasClaimedName,\n        hasClaimedEmail: data.hasClaimedEmail,\n        hasVerifiedEmail: data.hasVerifiedEmail,\n        // Waitlist state\n        waitlistEnabled,\n        waitlistStatus,\n        waitlistPosition,\n        waitlistMessage,\n        shouldShowWaitlist,\n        waitlist: waitlistData, // Full waitlist data including count\n        // App branding\n        app: data.app,\n      });\n\n      if (configRef.current.debug) {\n        console.log('[GrowthKit] Successfully initialized with data:', {\n          credits: data.credits,\n          hasName: !!data.name,\n          hasEmail: !!data.email,\n          verified: data.hasVerifiedEmail,\n          waitlistEnabled: waitlistEnabled,\n          waitlistStatus: waitlistStatus,\n          referralCode: data.referralCode?.substring(0, 8) + '...' || 'none'\n        });\n      }\n    } catch (error) {\n      // Enhanced error logging for debugging\n      if (configRef.current.debug) {\n        console.error('[GrowthKit] Initialization Error Details:', {\n          error: error instanceof Error ? error.message : 'Unknown error',\n          stack: error instanceof Error ? error.stack : undefined,\n          timestamp: new Date().toISOString(),\n          fingerprint: state.fingerprint?.substring(0, 10) + '...' || 'not set',\n          apiUrl: apiRef.current ? 'configured' : 'not configured',\n          initAttempted: initRef.current\n        });\n      }\n\n      // Graceful degradation: Set error state but allow widget to continue in minimal mode\n      console.warn('[GrowthKit] Initialization failed, widget will run in minimal mode:', error instanceof Error ? error.message : 'Unknown error');\n      \n      setState(prev => ({\n        ...prev,\n        loading: false,\n        initialized: true, // Still mark as initialized to allow minimal functionality\n        error: error instanceof Error ? error : new Error('Unknown error'),\n        // Set minimal default state\n        credits: 0,\n        usage: 0,\n        referralCode: null,\n        creditsPaused: false,\n        policy: null,\n        name: null,\n        email: null,\n        hasClaimedName: false,\n        hasClaimedEmail: false,\n        hasVerifiedEmail: false,\n        waitlistEnabled: false,\n        waitlistStatus: 'none',\n        waitlistPosition: null,\n        waitlistMessage: undefined,\n        shouldShowWaitlist: false,\n      }));\n    }\n  }, []); // No deps to avoid re-creation\n\n  // Initialize on mount\n  useEffect(() => {\n    initialize();\n  }, []); // Empty deps to run only once on mount\n\n  // Refresh user data\n  const refresh = useCallback(async () => {\n    if (!apiRef.current || !state.fingerprint) {\n      if (configRef.current.debug) {\n        console.warn('[GrowthKit] Refresh skipped: API or fingerprint not available');\n      }\n      return;\n    }\n\n    try {\n      if (configRef.current.debug) {\n        console.log('[GrowthKit] Refreshing user data...');\n      }\n\n      const response = await apiRef.current.getMe(state.fingerprint);\n      \n      if (response.success && response.data) {\n        const data = response.data;\n        \n        // Parse waitlist data\n        const waitlistData = data.waitlist;\n        const waitlistEnabled = waitlistData?.enabled || false;\n        const waitlistStatus = waitlistData?.status || 'none';\n        const waitlistPosition = waitlistData?.position || null;\n        const waitlistMessage = waitlistData?.message;\n        \n        // Determine if waitlist gate should show\n        // Show for both 'none' (to join) and 'waiting' (to see position)\n        const shouldShowWaitlist = waitlistEnabled && \n          (waitlistStatus === 'none' || waitlistStatus === 'waiting') && \n          waitlistData?.requiresWaitlist === true;\n        \n        setState(prev => ({\n          ...prev,\n          credits: data.credits,\n          usage: data.usage,\n          creditsPaused: data.creditsPaused || false,\n          name: data.name || null,\n          email: data.email || null,\n          hasClaimedName: data.hasClaimedName,\n          hasClaimedEmail: data.hasClaimedEmail,\n          hasVerifiedEmail: data.hasVerifiedEmail,\n          // Waitlist state\n          waitlistEnabled,\n          waitlistStatus,\n          waitlistPosition,\n          waitlistMessage,\n          shouldShowWaitlist,\n          waitlist: waitlistData, // Full waitlist data including count\n          // App branding\n          app: data.app,\n        }));\n\n        if (configRef.current.debug) {\n          console.log('[GrowthKit] Refresh successful, credits:', data.credits);\n        }\n      } else {\n        // Log detailed error information for debugging\n        if (configRef.current.debug) {\n          console.error('[GrowthKit] Refresh API Error Details:', {\n            endpoint: '/v1/me',\n            fingerprint: state.fingerprint.substring(0, 10) + '...',\n            error: response.error,\n            timestamp: new Date().toISOString()\n          });\n        }\n        console.warn('[GrowthKit] Refresh failed:', response.error || 'Unknown error');\n      }\n    } catch (error) {\n      // Enhanced error logging for debugging\n      if (configRef.current.debug) {\n        console.error('[GrowthKit] Refresh Error Details:', {\n          error: error instanceof Error ? error.message : 'Unknown error',\n          stack: error instanceof Error ? error.stack : undefined,\n          fingerprint: state.fingerprint.substring(0, 10) + '...',\n          timestamp: new Date().toISOString()\n        });\n      }\n      console.warn('[GrowthKit] Refresh failed:', error instanceof Error ? error.message : 'Unknown error');\n    }\n  }, [state.fingerprint]);\n\n  // Complete an action\n  const completeAction = useCallback(async (\n    action: string = 'default',\n    optionsOrMetadata?: CompleteActionOptions | any\n  ): Promise<boolean> => {\n    if (!apiRef.current || !state.fingerprint) {\n      if (configRef.current.debug) {\n        console.warn('[GrowthKit] completeAction skipped: API or fingerprint not available');\n      }\n      return false;\n    }\n\n    // Handle both old (metadata) and new (options) signatures\n    let creditsRequired: number | undefined;\n    let usdValue: number | undefined;\n    let metadata: any;\n    \n    if (optionsOrMetadata && typeof optionsOrMetadata === 'object') {\n      if ('creditsRequired' in optionsOrMetadata || 'usdValue' in optionsOrMetadata || 'metadata' in optionsOrMetadata) {\n        // New signature with options\n        creditsRequired = optionsOrMetadata.creditsRequired;\n        usdValue = optionsOrMetadata.usdValue;\n        metadata = optionsOrMetadata.metadata;\n      } else {\n        // Old signature with just metadata\n        metadata = optionsOrMetadata;\n      }\n    }\n\n    try {\n      if (configRef.current.debug) {\n        console.log('[GrowthKit] Completing action:', {\n          action,\n          creditsRequired,\n          usdValue,\n          hasMetadata: !!metadata\n        });\n      }\n\n      const response = await apiRef.current.completeAction(\n        state.fingerprint,\n        action,\n        creditsRequired,\n        usdValue,\n        metadata\n      );\n\n      if (response.success && response.data) {\n        // Refresh from server to get the latest state for all components\n        await refresh();\n        \n        if (configRef.current.debug) {\n          console.log('[GrowthKit] Action completed successfully:', action);\n        }\n        \n        return true;\n      } else {\n        if (configRef.current.debug) {\n          console.error('[GrowthKit] Action API Error Details:', {\n            action,\n            endpoint: '/v1/complete',\n            error: response.error,\n            timestamp: new Date().toISOString()\n          });\n        }\n        console.warn('[GrowthKit] Action failed:', response.error || 'Unknown error');\n        return false;\n      }\n    } catch (error) {\n      if (configRef.current.debug) {\n        console.error('[GrowthKit] Action Error Details:', {\n          action,\n          error: error instanceof Error ? error.message : 'Unknown error',\n          stack: error instanceof Error ? error.stack : undefined,\n          timestamp: new Date().toISOString()\n        });\n      }\n      console.warn('[GrowthKit] Complete action failed:', error instanceof Error ? error.message : 'Unknown error');\n      return false;\n    }\n  }, [state.fingerprint]);\n\n  // Claim name\n  const claimName = useCallback(async (name: string): Promise<boolean> => {\n    if (!apiRef.current || !state.fingerprint || state.hasClaimedName) {\n      return false;\n    }\n\n    try {\n      const response = await apiRef.current.claimName(state.fingerprint, name);\n\n      if (response.success && response.data?.claimed) {\n        setState(prev => ({\n          ...prev,\n          credits: response.data!.totalCredits || prev.credits,\n          name: response.data!.name || prev.name,\n          hasClaimedName: true,\n        }));\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Claim name failed:', error);\n      return false;\n    }\n  }, [state.fingerprint, state.hasClaimedName]);\n\n  // Claim email\n  const claimEmail = useCallback(async (email: string): Promise<boolean> => {\n    if (!apiRef.current || !state.fingerprint || state.hasClaimedEmail) {\n      return false;\n    }\n\n    try {\n      const response = await apiRef.current.claimEmail(state.fingerprint, email);\n\n      if (response.success && response.data?.claimed) {\n        setState(prev => ({\n          ...prev,\n          credits: response.data!.totalCredits || prev.credits,\n          email: response.data!.email || prev.email,\n          hasClaimedEmail: true,\n        }));\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Claim email failed:', error);\n      return false;\n    }\n  }, [state.fingerprint, state.hasClaimedEmail]);\n\n  // Verify email\n  const verifyEmail = useCallback(async (token: string): Promise<boolean> => {\n    if (!apiRef.current || !state.fingerprint || state.hasVerifiedEmail) {\n      return false;\n    }\n\n    try {\n      const response = await apiRef.current.verifyEmail(state.fingerprint, token);\n\n      if (response.success && response.data?.verified) {\n        setState(prev => ({\n          ...prev,\n          credits: response.data!.totalCredits || prev.credits,\n          hasVerifiedEmail: true,\n        }));\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Verify email failed:', error);\n      return false;\n    }\n  }, [state.fingerprint, state.hasVerifiedEmail]);\n\n  // Join waitlist\n  const joinWaitlist = useCallback(async (\n    email: string,\n    metadata?: any\n  ): Promise<boolean> => {\n    if (!apiRef.current || state.waitlistStatus === 'waiting') return false;\n\n    try {\n      const response = await apiRef.current.joinWaitlist(\n        email,\n        state.fingerprint || undefined,\n        metadata\n      );\n\n      if (response.success && response.data?.joined) {\n        // Refresh user data from server to get updated credits and email\n        await refresh();\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Join waitlist failed:', error);\n      return false;\n    }\n  }, [state.fingerprint, state.waitlistStatus, refresh]);\n\n  // Get referral link\n  const getReferralLink = useCallback((): string => {\n    if (!state.referralCode) return '';\n    \n    // Use simple query parameter approach - no middleware needed\n    const baseUrl = window.location.origin;\n    return `${baseUrl}/?ref=${state.referralCode}`;\n  }, [state.referralCode]);\n\n  // Share functionality\n  const share = useCallback(async (options?: ShareOptions): Promise<boolean> => {\n    const referralLink = getReferralLink();\n    \n    if (config.debug) {\n      console.log('[GrowthKit] Share - Referral Code:', state.referralCode);\n      console.log('[GrowthKit] Share - Referral Link:', referralLink);\n    }\n    \n    // If no referral code, can't share\n    if (!referralLink) {\n      console.warn('[GrowthKit] No referral code available to share');\n      return false;\n    }\n    \n    const shareTitle = options?.title || 'Check out this app!';\n    const shareText = options?.text || 'Join me and get free credits!';\n    \n    try {\n      // Use native share API if available\n      if (navigator.share) {\n        // Include both text and URL but keep them separate to avoid duplication\n        await navigator.share({\n          title: shareTitle,\n          text: shareText,\n          url: referralLink,\n        });\n        return true;\n      }\n\n      // Fallback to clipboard - copy the full message with link\n      const fullMessage = `${shareText} ${referralLink}`;\n      await navigator.clipboard.writeText(fullMessage);\n      \n      // Show some feedback (you might want to use a toast library)\n      if (config.debug) {\n        console.log('Copied to clipboard:', fullMessage);\n      }\n      \n      return true;\n    } catch (error) {\n      console.error('Share failed:', error);\n      \n      // Last fallback: open a new window with pre-filled tweet\n      const tweetText = `${shareText} ${referralLink}`;\n      const tweetUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}`;\n      window.open(tweetUrl, '_blank');\n      \n      return false;\n    }\n  }, [config.debug, state.referralCode, getReferralLink]);\n\n  // Check if soft paywall should be shown\n  const shouldShowSoftPaywall = useCallback((): boolean => {\n    return state.credits <= 0 && state.usage > 0;\n  }, [state.credits, state.usage]);\n\n  // Check if user can perform an action\n  const canPerformAction = useCallback((action: string = 'default'): boolean => {\n    if (!state.policy) return false;\n    \n    const actionPolicy = state.policy.actions[action] || state.policy.actions.default;\n    const creditsRequired = actionPolicy?.creditsRequired || 1;\n    \n    return state.credits >= creditsRequired;\n  }, [state.credits, state.policy]);\n\n  // Accept waitlist invitation\n  const acceptInvitation = useCallback(async (): Promise<boolean> => {\n    if (!apiRef.current || !state.fingerprint) return false;\n    \n    // Only allow if status is 'invited'\n    if (state.waitlistStatus !== 'invited') {\n      if (config.debug) {\n        console.log('Cannot accept invitation - status is not invited:', state.waitlistStatus);\n      }\n      return false;\n    }\n\n    try {\n      // For now, accepting invitation just means joining/completing registration\n      // The actual status update happens server-side when user takes actions\n      setState(prev => ({\n        ...prev,\n        waitlistStatus: 'accepted',\n        shouldShowWaitlist: false,\n      }));\n      \n      // Refresh to get latest state from server\n      await refresh();\n      \n      return true;\n    } catch (error) {\n      if (config.debug) {\n        console.error('Accept invitation failed:', error);\n      }\n      return false;\n    }\n  }, [state.fingerprint, state.waitlistStatus, config.debug, refresh]);\n\n  // Send batched events\n  const sendEvents = useCallback(async () => {\n    if (!apiRef.current || eventQueueRef.current.length === 0) return;\n    \n    // Ensure fingerprint is set before sending\n    if (state.fingerprint) {\n      apiRef.current.setFingerprint(state.fingerprint);\n      if (config.debug) {\n        console.log(`Set fingerprint for tracking: ${state.fingerprint}`);\n      }\n    } else if (config.debug) {\n      console.warn('No fingerprint available for tracking');\n    }\n\n    const eventsToSend = [...eventQueueRef.current];\n    eventQueueRef.current = [];\n\n    try {\n      const currentContext = getBrowserContext();\n      if (config.debug) {\n        console.log('Current context before sending:', currentContext);\n      }\n      await apiRef.current.trackEvents(eventsToSend, currentContext, sessionIdRef.current);\n      if (config.debug) {\n        console.log(`Sent ${eventsToSend.length} events with context:`, currentContext);\n      }\n    } catch (error) {\n      if (config.debug) {\n        console.error('Failed to send events:', error);\n      }\n      // Re-queue events on failure\n      eventQueueRef.current = [...eventsToSend, ...eventQueueRef.current];\n    }\n  }, [config.debug, state.fingerprint]);\n\n  // Track event\n  const track = useCallback((eventName: string, properties?: Record<string, any>) => {\n    if (!state.fingerprint) {\n      if (config.debug) {\n        console.warn('Cannot track event - no fingerprint available');\n      }\n      return;\n    }\n\n    // Add event to queue\n    eventQueueRef.current.push({\n      eventName,\n      properties,\n      timestamp: Date.now(),\n    });\n\n    // Update context when tracking\n    contextRef.current = getBrowserContext();\n\n    // Send immediately if batch size reached\n    if (eventQueueRef.current.length >= BATCH_SIZE) {\n      sendEvents();\n      if (batchTimerRef.current) {\n        clearTimeout(batchTimerRef.current);\n        batchTimerRef.current = null;\n      }\n    } else if (!batchTimerRef.current) {\n      // Start batch timer if not already running\n      batchTimerRef.current = setTimeout(() => {\n        sendEvents();\n        batchTimerRef.current = null;\n      }, BATCH_INTERVAL);\n    }\n  }, [state.fingerprint, config.debug, sendEvents]);\n\n  // Send events on unmount or page unload\n  useEffect(() => {\n    const handleUnload = () => {\n      if (eventQueueRef.current.length > 0 && apiRef.current) {\n        // Use sendBeacon for reliability\n        const data = JSON.stringify({\n          events: eventQueueRef.current,\n        });\n        const headers = {\n          type: 'application/json',\n        };\n        const blob = new Blob([data], headers);\n        navigator.sendBeacon(\n          `${apiRef.current['apiUrl']}/v1/track`,\n          blob\n        );\n      }\n    };\n\n    window.addEventListener('beforeunload', handleUnload);\n    return () => {\n      window.removeEventListener('beforeunload', handleUnload);\n      if (batchTimerRef.current) {\n        clearTimeout(batchTimerRef.current);\n      }\n      // Send any remaining events\n      sendEvents();\n    };\n  }, [sendEvents]);\n\n  // Combine state and actions\n  const actions: GrowthKitActions = {\n    refresh,\n    completeAction,\n    claimName,\n    claimEmail,\n    verifyEmail,\n    joinWaitlist,\n    acceptInvitation,\n    share,\n    getReferralLink,\n    shouldShowSoftPaywall,\n    canPerformAction,\n    track,\n    setTheme: setTheme || (() => {}), // Fallback for when setTheme is not available\n  };\n\n  return {\n    ...state,\n    ...actions,\n  };\n}\n","import type { TrackContext } from './types';\n\nexport function getBrowserContext(): TrackContext {\n  if (typeof window === 'undefined') {\n    return {\n      browser: 'unknown',\n      os: 'unknown',\n      device: 'desktop',\n      screenResolution: '0x0',\n      viewport: '0x0',\n      url: '',\n      referrer: '',\n      userAgent: '',\n    };\n  }\n\n  const ua = navigator.userAgent;\n  const browser = detectBrowser(ua);\n  const os = detectOS(ua);\n  const device = detectDevice();\n\n  return {\n    browser,\n    os,\n    device,\n    screenResolution: `${window.screen.width}x${window.screen.height}`,\n    viewport: `${window.innerWidth}x${window.innerHeight}`,\n    url: window.location.href,\n    referrer: document.referrer || '',\n    userAgent: ua,\n  };\n}\n\nfunction detectBrowser(ua: string): string {\n  if (ua.includes('Firefox/')) return 'Firefox';\n  if (ua.includes('Chrome/') && !ua.includes('Edg/')) return 'Chrome';\n  if (ua.includes('Safari/') && !ua.includes('Chrome/')) return 'Safari';\n  if (ua.includes('Edg/')) return 'Edge';\n  if (ua.includes('Opera/') || ua.includes('OPR/')) return 'Opera';\n  return 'Other';\n}\n\nfunction detectOS(ua: string): string {\n  if (ua.includes('Windows')) return 'Windows';\n  if (ua.includes('Mac OS X')) return 'macOS';\n  if (ua.includes('Linux')) return 'Linux';\n  if (ua.includes('Android')) return 'Android';\n  if (ua.includes('iOS') || ua.includes('iPhone') || ua.includes('iPad')) return 'iOS';\n  return 'Other';\n}\n\nfunction detectDevice(): 'desktop' | 'mobile' | 'tablet' {\n  const ua = navigator.userAgent;\n  const isMobile = /Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(ua);\n  const isTablet = /iPad|Android.*Tablet|Tablet.*Android/i.test(ua);\n  \n  if (isTablet) return 'tablet';\n  if (isMobile) return 'mobile';\n  return 'desktop';\n}\n\nexport function generateSessionId(): string {\n  // Simple session ID based on timestamp and random value\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n}\n","import type {\n  APIResponse,\n  MeResponse,\n  CompleteResponse,\n  ClaimResponse,\n  VerifyResponse,\n  WaitlistResponse,\n} from './types';\nimport { getBrowserContext } from './context';\n\nexport class GrowthKitAPI {\n  private apiKey: string | null;\n  private publicKey: string | null;\n  private apiUrl: string;\n  private fingerprint: string | null = null;\n  private isProxyMode: boolean;\n  private isPublicMode: boolean;\n  private debug: boolean = false;\n  private token: string | null = null;\n  private tokenExpiry: Date | null = null;\n  private retryingRequest: boolean = false;\n\n  constructor(apiKey?: string, publicKey?: string, apiUrl: string = '', debug: boolean = false) {\n    // Determine mode: proxy (default), public key, or private API key\n    this.isPublicMode = !!publicKey;\n    this.isProxyMode = !apiKey && !publicKey;\n    this.apiKey = apiKey || null;\n    this.publicKey = publicKey || null;\n    this.apiUrl = this.isProxyMode ? this.detectProxyUrl() : (apiUrl || this.detectApiUrl());\n    this.debug = debug;\n    \n    if (this.isProxyMode && typeof window !== 'undefined' && process.env.NODE_ENV === 'development') {\n      console.log('[GrowthKit] Using secure proxy mode via middleware - API key is handled server-side');\n    } else if (this.isPublicMode && typeof window !== 'undefined' && process.env.NODE_ENV === 'development') {\n      console.log('[GrowthKit] Using public key mode - secure for client-side usage');\n    } else if (!this.isProxyMode && typeof window !== 'undefined' && process.env.NODE_ENV === 'production') {\n      console.warn('[GrowthKit] Using direct API mode with client-side API key. Consider upgrading to proxy mode or public key mode for better security.');\n    }\n  }\n\n  private detectApiUrl(): string {\n    // In public key mode, always default to production URL\n    // Users can override via apiUrl parameter if needed\n    if (this.isPublicMode) {\n      return 'https://growth.fenixblack.ai/api';\n    }\n    \n    // For direct API mode only, detect localhost for development\n    if (typeof window !== 'undefined') {\n      const { hostname } = window.location;\n      if (hostname === 'localhost' || hostname === '127.0.0.1') {\n        return 'http://localhost:3000/api';\n      }\n    }\n    \n    // Default to production URL\n    return 'https://growth.fenixblack.ai/api';\n  }\n\n  private detectProxyUrl(): string {\n    // For proxy mode, use local middleware proxy routes\n    // The middleware automatically handles /api/growthkit/* routes\n    if (typeof window !== 'undefined') {\n      const { protocol, host } = window.location;\n      return `${protocol}//${host}/api/growthkit`;\n    }\n    // Fallback for SSR\n    return '/api/growthkit';\n  }\n\n  setFingerprint(fingerprint: string) {\n    this.fingerprint = fingerprint;\n  }\n\n  private isTokenValid(): boolean {\n    return !!(this.token && this.tokenExpiry && this.tokenExpiry > new Date());\n  }\n\n  private async getStoredToken(): Promise<{token: string; expiry: Date} | null> {\n    if (typeof window === 'undefined') return null;\n    \n    try {\n      const stored = localStorage.getItem('growthkit_token');\n      if (!stored) return null;\n      \n      const parsed = JSON.parse(stored);\n      const expiry = new Date(parsed.expiresAt);\n      \n      if (expiry > new Date()) {\n        return { token: parsed.token, expiry };\n      } else {\n        localStorage.removeItem('growthkit_token');\n        return null;\n      }\n    } catch {\n      localStorage.removeItem('growthkit_token');\n      return null;\n    }\n  }\n\n  private storeToken(token: string, expiresAt: string) {\n    if (typeof window === 'undefined') return;\n    \n    try {\n      localStorage.setItem('growthkit_token', JSON.stringify({\n        token,\n        expiresAt\n      }));\n    } catch (error) {\n      if (this.debug) {\n        console.warn('[GrowthKit] Failed to store token:', error);\n      }\n    }\n  }\n\n  private async requestToken(): Promise<boolean> {\n    if (!this.isPublicMode || !this.publicKey || !this.fingerprint) {\n      return false;\n    }\n\n    try {\n      const url = `${this.apiUrl}/public/auth/token`;\n      \n      if (this.debug) {\n        console.log('[GrowthKit] Requesting new token...');\n      }\n\n      // Get browser context to send with token request\n      const context = getBrowserContext();\n\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          // User-Agent is automatically included by the browser\n          // We're getting additional context for better tracking\n        },\n        body: JSON.stringify({\n          publicKey: this.publicKey,\n          fingerprint: this.fingerprint,\n          context, // Include browser context\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Token request failed: ${response.status}`);\n      }\n\n      const data = await response.json();\n      const tokenData = data.data || data;\n      \n      this.token = tokenData.token;\n      this.tokenExpiry = new Date(tokenData.expiresAt);\n      this.storeToken(tokenData.token, tokenData.expiresAt);\n      \n      if (this.debug) {\n        console.log('[GrowthKit] Token obtained successfully');\n      }\n      \n      return true;\n    } catch (error) {\n      if (this.debug) {\n        console.error('[GrowthKit] Token request failed:', error);\n      }\n      return false;\n    }\n  }\n\n  private async ensureValidToken(): Promise<boolean> {\n    if (!this.isPublicMode) return true;\n    \n    // Check current token\n    if (this.isTokenValid()) return true;\n    \n    // Try to load from storage\n    const stored = await this.getStoredToken();\n    if (stored) {\n      this.token = stored.token;\n      this.tokenExpiry = stored.expiry;\n      return true;\n    }\n    \n    // Request new token\n    return await this.requestToken();\n  }\n\n  private transformEndpointForPublic(endpoint: string): string {\n    // Map existing endpoints to new public endpoints\n    const endpointMap: Record<string, string> = {\n      '/v1/me': '/public/user',\n      '/v1/track': '/public/track',\n      '/v1/waitlist': '/public/waitlist/join',\n      '/v1/referral/visit': '/public/referral/check',\n      '/v1/referral/check': '/public/referral/check',\n      '/v1/invitation/redeem': '/public/invitation/redeem',\n      '/v1/verify/email': '/public/verify/email',\n      '/v1/claim/name': '/public/claim/name',\n      '/v1/claim/email': '/public/claim/email',\n      // Keep other endpoints as-is for now (may need mapping later)\n    };\n\n    return endpointMap[endpoint] || endpoint;\n  }\n\n  private async request<T = any>(\n    endpoint: string,\n    options: RequestInit = {}\n  ): Promise<APIResponse<T>> {\n    // For public mode, ensure we have a valid token\n    if (this.isPublicMode) {\n      const hasToken = await this.ensureValidToken();\n      if (!hasToken) {\n        return {\n          success: false,\n          error: 'Failed to obtain authentication token',\n        };\n      }\n    }\n\n    // Transform endpoint for public mode\n    const finalEndpoint = this.isPublicMode ? this.transformEndpointForPublic(endpoint) : endpoint;\n    const url = `${this.apiUrl}${finalEndpoint}`;\n    \n    if (this.debug) {\n      console.log('[GrowthKit API] Request starting:', {\n        endpoint,\n        finalEndpoint,\n        url,\n        method: options.method || 'GET',\n        hasBody: !!options.body,\n        bodyLength: options.body ? String(options.body).length : 0,\n        timestamp: new Date().toISOString()\n      });\n    }\n    \n    try {\n      const headers: Record<string, string> = {\n        'Content-Type': 'application/json',\n        ...(this.fingerprint && !this.isPublicMode && { 'X-Fingerprint': this.fingerprint }),\n      };\n\n      // Safely merge additional headers\n      if (options.headers) {\n        const additionalHeaders = options.headers as Record<string, string>;\n        Object.assign(headers, additionalHeaders);\n      }\n\n      // Add Authorization header based on mode\n      if (this.isPublicMode && this.token) {\n        headers['Authorization'] = `Bearer ${this.token}`;\n      } else if (!this.isProxyMode && this.apiKey) {\n        headers['Authorization'] = `Bearer ${this.apiKey}`;\n      }\n\n      if (this.debug) {\n        console.log('[GrowthKit API] Request headers:', {\n          ...headers,\n          Authorization: headers.Authorization ? 'Bearer [REDACTED]' : undefined\n        });\n      }\n\n      const startTime = Date.now();\n      const response = await fetch(url, {\n        ...options,\n        headers,\n        credentials: 'include', // For cookies\n      });\n      const responseTime = Date.now() - startTime;\n\n      if (this.debug) {\n        console.log('[GrowthKit API] Response received:', {\n          endpoint,\n          status: response.status,\n          statusText: response.statusText,\n          ok: response.ok,\n          responseTime: `${responseTime}ms`,\n          timestamp: new Date().toISOString()\n        });\n      }\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        // Handle 401 Unauthorized in public mode - token might be invalid\n        if (response.status === 401 && this.isPublicMode && !this.retryingRequest) {\n          if (this.debug) {\n            console.log('[GrowthKit] 401 Unauthorized - Token may be invalid, clearing and retrying...');\n          }\n          \n          // Clear invalid token\n          this.token = null;\n          this.tokenExpiry = null;\n          if (typeof window !== 'undefined') {\n            localStorage.removeItem('growthkit_token');\n          }\n          \n          // Set retry flag to prevent infinite loops\n          this.retryingRequest = true;\n          \n          // Retry once with a fresh token\n          const hasNewToken = await this.ensureValidToken();\n          if (hasNewToken) {\n            if (this.debug) {\n              console.log('[GrowthKit] Retrying request with new token...');\n            }\n            // Recursive retry - original options will pick up the new token\n            const result = await this.request(endpoint, options);\n            this.retryingRequest = false; // Reset flag after retry\n            return result;\n          }\n          \n          this.retryingRequest = false; // Reset flag if retry failed\n        }\n        \n        if (this.debug) {\n          console.error('[GrowthKit API] Request failed with error response:', {\n            endpoint,\n            finalEndpoint,\n            status: response.status,\n            statusText: response.statusText,\n            errorData: data,\n            timestamp: new Date().toISOString()\n          });\n          \n          // Special handling for common deployment issues\n          if (response.status === 405) {\n            console.error('[GrowthKit] 405 Method Not Allowed - This usually means the server needs to be redeployed with the latest code');\n          }\n        }\n        throw new Error(data.message || data.error || `Request failed (${response.status})`);\n      }\n\n      if (this.debug) {\n        console.log('[GrowthKit API] Request successful:', {\n          endpoint,\n          hasData: !!data,\n          dataKeys: data && typeof data === 'object' ? Object.keys(data) : [],\n          timestamp: new Date().toISOString()\n        });\n      }\n\n      return {\n        success: true,\n        data: data.data || data,\n      };\n    } catch (error) {\n      if (this.debug) {\n        console.error('[GrowthKit API] Request failed with exception:', {\n          endpoint,\n          error: error instanceof Error ? error.message : 'Unknown error',\n          stack: error instanceof Error ? error.stack : undefined,\n          timestamp: new Date().toISOString()\n        });\n      }\n\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n      };\n    }\n  }\n\n  async getMe(fingerprint: string, claim?: string): Promise<APIResponse<MeResponse>> {\n    // Get browser context for better tracking\n    const context = getBrowserContext();\n    \n    // In public mode, we don't need to send fingerprint (it's in the token)\n    // But we still need to send it for other modes\n    const bodyData = this.isPublicMode \n      ? { ...(claim && { claim }), context }  // Send claim and context\n      : { fingerprint, ...(claim && { claim }), context }; // Send fingerprint, claim, and context\n\n    return this.request<MeResponse>('/v1/me', {\n      method: 'POST',\n      body: JSON.stringify(bodyData),\n    });\n  }\n\n  async completeAction(\n    fingerprint: string,\n    action: string = 'default',\n    creditsRequired?: number,\n    usdValue?: number,\n    metadata?: any\n  ): Promise<APIResponse<CompleteResponse>> {\n    return this.request<CompleteResponse>('/v1/complete', {\n      method: 'POST',\n      body: JSON.stringify({\n        fingerprint,\n        action,\n        ...(creditsRequired !== undefined && { creditsRequired }),\n        ...(usdValue !== undefined && { usdValue }),\n        metadata,\n      }),\n    });\n  }\n\n  async claimName(\n    fingerprint: string,\n    name: string\n  ): Promise<APIResponse<ClaimResponse>> {\n    return this.request<ClaimResponse>('/v1/claim/name', {\n      method: 'POST',\n      body: JSON.stringify({\n        fingerprint,\n        name,\n      }),\n    });\n  }\n\n  async claimEmail(\n    fingerprint: string,\n    email: string\n  ): Promise<APIResponse<ClaimResponse>> {\n    return this.request<ClaimResponse>('/v1/claim/email', {\n      method: 'POST',\n      body: JSON.stringify({\n        fingerprint,\n        email,\n      }),\n    });\n  }\n\n  async verifyEmail(\n    fingerprint: string,\n    token: string\n  ): Promise<APIResponse<VerifyResponse>> {\n    return this.request<VerifyResponse>('/v1/verify/email', {\n      method: 'POST',\n      body: JSON.stringify({\n        fingerprint,\n        token,\n      }),\n    });\n  }\n\n  async joinWaitlist(\n    email: string,\n    fingerprint?: string,\n    metadata?: any\n  ): Promise<APIResponse<WaitlistResponse>> {\n    return this.request<WaitlistResponse>('/v1/waitlist', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        fingerprint,\n        metadata,\n      }),\n    });\n  }\n\n  async trackReferralVisit(claim?: string): Promise<APIResponse<any>> {\n    return this.request('/v1/referral/visit', {\n      method: 'POST',\n      body: JSON.stringify({ claim }),\n    });\n  }\n\n  async trackEvents(events: Array<{\n    eventName: string;\n    properties?: Record<string, any>;\n    timestamp: number;\n  }>, context?: any, sessionId?: string): Promise<APIResponse<{ tracked: boolean }>> {\n    return this.request('/v1/track', {\n      method: 'POST',\n      body: JSON.stringify({ events, context, sessionId }),\n    });\n  }\n\n  async checkReferral(\n    fingerprint: string,\n    referralCode: string\n  ): Promise<APIResponse<any>> {\n    return this.request('/v1/referral/check', {\n      method: 'POST',\n      body: JSON.stringify({\n        fingerprint,\n        referralCode,\n      }),\n    });\n  }\n\n  async redeemInvitation(\n    fingerprint: string,\n    invitationCode: string\n  ): Promise<APIResponse<any>> {\n    return this.request('/v1/invitation/redeem', {\n      method: 'POST',\n      body: JSON.stringify({\n        fingerprint,\n        invitationCode,\n      }),\n    });\n  }\n}\n","import FingerprintJS from '@fingerprintjs/fingerprintjs';\n\nlet cachedFingerprint: string | null = null;\nlet fpAgent: any = null;\n\n// Storage key for persistent fingerprint\nconst FINGERPRINT_STORAGE_KEY = 'growthkit_fingerprint';\n\nexport async function getFingerprint(): Promise<string> {\n  // Return cached fingerprint if available\n  if (cachedFingerprint) {\n    return cachedFingerprint;\n  }\n\n  // Check if we're in a browser environment\n  if (typeof window === 'undefined') {\n    // Return a placeholder during SSR that will be replaced on client\n    return 'ssr_placeholder_' + Math.random().toString(36).substring(7);\n  }\n\n  // Try to get stored fingerprint first (persists across page reloads)\n  try {\n    const stored = localStorage.getItem(FINGERPRINT_STORAGE_KEY);\n    if (stored) {\n      cachedFingerprint = stored;\n      console.log('[GrowthKit] Using stored fingerprint:', stored.substring(0, 10) + '...');\n      return stored;\n    }\n  } catch (error) {\n    // localStorage might be blocked (Safari private mode, etc.)\n    console.warn('[GrowthKit] Could not access localStorage for fingerprint:', error);\n  }\n\n  try {\n    // Wait for the browser environment to be fully ready\n    if (document.readyState !== 'complete') {\n      await new Promise((resolve) => {\n        if (document.readyState === 'complete') {\n          resolve(undefined);\n        } else {\n          window.addEventListener('load', resolve, { once: true });\n        }\n      });\n    }\n\n    // Initialize FingerprintJS agent (only once)\n    if (!fpAgent) {\n      fpAgent = await FingerprintJS.load();\n    }\n\n    // Get browser fingerprint using FingerprintJS\n    const result = await fpAgent.get();\n    const fingerprint = result.visitorId;\n    \n    console.log('[GrowthKit] FingerprintJS generated:', fingerprint.substring(0, 10) + '...');\n    \n    if (!fingerprint || fingerprint.length === 0) {\n      throw new Error('Empty fingerprint generated');\n    }\n\n    // Cache the fingerprint in memory\n    cachedFingerprint = fingerprint;\n    \n    // Store fingerprint in localStorage for persistence across page reloads\n    try {\n      localStorage.setItem(FINGERPRINT_STORAGE_KEY, fingerprint);\n      console.log('[GrowthKit] Fingerprint stored in localStorage');\n    } catch (error) {\n      console.warn('[GrowthKit] Could not store fingerprint:', error);\n    }\n    \n    return fingerprint;\n  } catch (error) {\n    // Fallback to a simple fingerprint if FingerprintJS fails\n    console.warn('[GrowthKit] Fingerprint generation failed, using fallback:', error);\n    \n    // Generate a fallback fingerprint using available browser properties\n    const fallback = generateFallbackFingerprint();\n    cachedFingerprint = fallback;\n    \n    // Store fallback fingerprint too\n    try {\n      localStorage.setItem(FINGERPRINT_STORAGE_KEY, fallback);\n    } catch (storageError) {\n      // Silent fail if localStorage is unavailable\n    }\n    \n    return fallback;\n  }\n}\n\nfunction generateFallbackFingerprint(): string {\n  const components: string[] = [];\n  \n  // Screen properties\n  if (typeof window !== 'undefined' && window.screen) {\n    components.push(`${window.screen.width}x${window.screen.height}`);\n    components.push(`${window.screen.colorDepth}`);\n  }\n  \n  // Navigator properties\n  if (typeof navigator !== 'undefined') {\n    components.push(navigator.userAgent || 'unknown');\n    components.push(navigator.language || 'en');\n    components.push(navigator.platform || 'unknown');\n    components.push(`${navigator.hardwareConcurrency || 0}`);\n  }\n  \n  // Timezone\n  components.push(`${new Date().getTimezoneOffset()}`);\n  \n  // Create a simple hash from components\n  const str = components.join('|');\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i);\n    hash = ((hash << 5) - hash) + char;\n    hash = hash & hash; // Convert to 32-bit integer\n  }\n  \n  return `fallback_${Math.abs(hash).toString(36)}`;\n}\n\nexport function clearFingerprintCache(): void {\n  cachedFingerprint = null;\n  \n  // Also clear from localStorage\n  try {\n    localStorage.removeItem(FINGERPRINT_STORAGE_KEY);\n  } catch (error) {\n    // Silent fail if localStorage is unavailable\n  }\n}\n","'use client';\n\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { GrowthKitConfig, GrowthKitTheme } from '../types';\nimport { GrowthKitStateProvider } from './GrowthKitStateProvider';\nimport { LocalizationContext, getTranslations, type Language } from '../localization';\nimport { getEffectiveTheme, onSystemThemeChange, type ThemeColors, getThemeColors } from '../theme';\n\nconst GrowthKitContext = createContext<{ \n  config: GrowthKitConfig;\n  setLanguage?: (language: Language) => void;\n  theme: GrowthKitTheme;\n  effectiveTheme: 'light' | 'dark';\n  themeColors: ThemeColors;\n  setTheme?: (theme: GrowthKitTheme) => void;\n} | undefined>(undefined);\n\ninterface GrowthKitProviderProps {\n  children: React.ReactNode;\n  config: GrowthKitConfig;\n}\n\nexport function GrowthKitProvider({ children, config }: GrowthKitProviderProps) {\n  // Initialize language from config, defaulting to 'en'\n  const [currentLanguage, setCurrentLanguage] = useState<Language>(config.language || 'en');\n  \n  // Initialize theme from config, defaulting to 'auto'\n  const [currentTheme, setCurrentTheme] = useState<GrowthKitTheme>(config.theme || 'auto');\n  const [effectiveTheme, setEffectiveTheme] = useState<'light' | 'dark'>(() => \n    getEffectiveTheme(config.theme || 'auto')\n  );\n  \n  // Update language when config changes\n  useEffect(() => {\n    if (config.language && config.language !== currentLanguage) {\n      setCurrentLanguage(config.language);\n    }\n  }, [config.language, currentLanguage]);\n  \n  // Update theme when config changes\n  useEffect(() => {\n    if (config.theme && config.theme !== currentTheme) {\n      setCurrentTheme(config.theme);\n      setEffectiveTheme(getEffectiveTheme(config.theme));\n    }\n  }, [config.theme, currentTheme]);\n  \n  // Listen to system theme changes when using 'auto'\n  useEffect(() => {\n    if (currentTheme !== 'auto') return;\n    \n    const cleanup = onSystemThemeChange((isDark) => {\n      setEffectiveTheme(isDark ? 'dark' : 'light');\n    });\n    \n    return cleanup;\n  }, [currentTheme]);\n  \n  // Function to update language programmatically\n  const setLanguage = (language: Language) => {\n    setCurrentLanguage(language);\n  };\n  \n  // Function to update theme programmatically\n  const setTheme = (theme: GrowthKitTheme) => {\n    setCurrentTheme(theme);\n    setEffectiveTheme(getEffectiveTheme(theme));\n  };\n  \n  // Get translations for current language\n  const translations = getTranslations(currentLanguage);\n  \n  // Get theme colors for effective theme (resolved from 'auto' if needed)\n  const themeColors = getThemeColors(effectiveTheme);\n  \n  return (\n    <GrowthKitContext.Provider value={{ \n      config, \n      setLanguage,\n      theme: currentTheme,\n      effectiveTheme,\n      themeColors,\n      setTheme\n    }}>\n      <LocalizationContext.Provider value={{ \n        language: currentLanguage, \n        t: translations, \n        setLanguage \n      }}>\n        <GrowthKitStateProvider>\n          {children}\n        </GrowthKitStateProvider>\n      </LocalizationContext.Provider>\n    </GrowthKitContext.Provider>\n  );\n}\n\nexport function useGrowthKitConfig() {\n  const context = useContext(GrowthKitContext);\n  if (!context) {\n    throw new Error('useGrowthKitConfig must be used within a GrowthKitProvider');\n  }\n  return context;\n}\n\n","'use client';\n\nimport React, { createContext, useContext, useState, useCallback, useRef, useEffect } from 'react';\nimport { GrowthKitState, CompleteActionOptions } from '../types';\nimport { GrowthKitAPI } from '../api';\nimport { useGrowthKitConfig } from './GrowthKitProvider';\n\nconst initialState: GrowthKitState = {\n  loading: true,\n  initialized: false,\n  credits: 0,\n  usage: 0,\n  creditsPaused: false,\n  name: null,\n  email: null,\n  hasClaimedName: false,\n  hasClaimedEmail: false,\n  hasVerifiedEmail: false,\n  fingerprint: null,\n  error: null,\n  referralCode: null,\n  policy: null,\n  waitlistEnabled: false,\n  waitlistStatus: 'none',\n  shouldShowWaitlist: false,\n  waitlistPosition: null,\n  waitlistMessage: undefined,\n  app: undefined,\n};\n\ninterface GrowthKitStateContextValue {\n  state: GrowthKitState;\n  setState: React.Dispatch<React.SetStateAction<GrowthKitState>>;\n  apiRef: React.MutableRefObject<GrowthKitAPI | null>;\n  initRef: React.MutableRefObject<boolean>;\n}\n\nconst GrowthKitStateContext = createContext<GrowthKitStateContextValue | undefined>(undefined);\n\nexport function GrowthKitStateProvider({ children }: { children: React.ReactNode }) {\n  const [state, setState] = useState<GrowthKitState>(initialState);\n  const apiRef = useRef<GrowthKitAPI | null>(null);\n  const initRef = useRef<boolean>(false);\n\n  return (\n    <GrowthKitStateContext.Provider value={{ state, setState, apiRef, initRef }}>\n      {children}\n    </GrowthKitStateContext.Provider>\n  );\n}\n\nexport function useGrowthKitState() {\n  const context = useContext(GrowthKitStateContext);\n  if (!context) {\n    throw new Error('useGrowthKitState must be used within a GrowthKitStateProvider');\n  }\n  return context;\n}\n","import { createContext, useContext } from 'react';\n\n// Supported languages\nexport type Language = 'en' | 'es';\n\n// Translation keys interface\nexport interface Translations {\n  // WaitlistForm translations\n  waitlist: {\n    youreOnTheList: string;\n    yourPosition: string;\n    notifyEmail: string;\n    earlyAccess: string;\n    joinWaitlistMessage: string;\n    enterYourEmail: string;\n    emailRequired: string;\n    invalidEmail: string;\n    joinFailed: string;\n    errorOccurred: string;\n    joining: string;\n    joinWaitlist: string;\n    noSpam: string;\n  };\n  \n  // GrowthKitAccountWidget translations\n  widget: {\n    loading: string;\n    waitlistActive: string;\n    credits: string;\n    creditsPausedTooltip: string;\n    earnCredits: string;\n    account: string;\n    name: string;\n    email: string;\n    creditsLabel: string;\n    notSet: string;\n    earnMoreCredits: string;\n    emailVerifiedSuccess: string;\n    noVerificationToken: string;\n    verificationFailed: string;\n    errorMinimal: string;\n    errorOffline: string;\n    retry: string;\n  };\n  \n  // CreditExhaustionModal translations\n  modal: {\n    earnCredits: string;\n    creditsPausedMessage: string;\n    completeTasks: string;\n    nameTab: string;\n    emailTab: string;\n    verifyTab: string;\n    shareTab: string;\n    enterYourName: string;\n    earnCreditsName: string;\n    tellUsName: string;\n    yourName: string;\n    claiming: string;\n    claimCredits: string;\n    enterYourEmail: string;\n    earnCreditsEmail: string;\n    provideEmail: string;\n    yourEmail: string;\n    verifyYourEmail: string;\n    checkInbox: string;\n    clickVerificationLink: string;\n    earnVerificationCredits: string;\n    shareAndEarn: string;\n    earnCreditsEachFriend: string;\n    copy: string;\n    copied: string;\n    shareNow: string;\n    earnCreditsPerReferral: string;\n    referralUnavailable: string;\n    newCreditsPaused: string;\n    currentCredits: string;\n    done: string;\n  };\n}\n\n// English translations\nconst enTranslations: Translations = {\n  waitlist: {\n    youreOnTheList: \"You're on the list!\",\n    yourPosition: \"Your position:\",\n    notifyEmail: \"We'll notify you at {{email}} when it's your turn!\",\n    earlyAccess: \"Early Access\",\n    joinWaitlistMessage: \"Join our exclusive waitlist for early access\",\n    enterYourEmail: \"Enter your email\",\n    emailRequired: \"Email is required\",\n    invalidEmail: \"Please enter a valid email address\",\n    joinFailed: \"Failed to join waitlist. Please try again.\",\n    errorOccurred: \"An error occurred. Please try again.\",\n    joining: \"Joining...\",\n    joinWaitlist: \"Join Waitlist\",\n    noSpam: \"No spam. We'll only email you when it's your turn.\",\n  },\n  widget: {\n    loading: \"Loading...\",\n    waitlistActive: \"Waitlist Active\",\n    credits: \"credits\",\n    creditsPausedTooltip: \"Credit earning is temporarily paused\",\n    earnCredits: \"Earn Credits\",\n    account: \"Account\",\n    name: \"Name:\",\n    email: \"Email:\",\n    creditsLabel: \"Credits:\",\n    notSet: \"Not set\",\n    earnMoreCredits: \"Earn More Credits\",\n    emailVerifiedSuccess: \"Email verified successfully! +5 credits earned\",\n    noVerificationToken: \"No verification token provided\",\n    verificationFailed: \"Verification failed. The token may be invalid or expired.\",\n    errorMinimal: \"Offline\",\n    errorOffline: \"Connection failed - running in minimal mode\",\n    retry: \"Retry\",\n  },\n  modal: {\n    earnCredits: \"Earn Credits\",\n    creditsPausedMessage: \"Credit earning is temporarily paused for this app\",\n    completeTasks: \"Complete tasks below to earn more credits:\",\n    nameTab: \"Name\",\n    emailTab: \"Email\",\n    verifyTab: \"Verify\",\n    shareTab: \"Share\",\n    enterYourName: \"Enter Your Name\",\n    earnCreditsName: \"Earn {{credits}} credits by telling us your name\",\n    tellUsName: \"Tell us your name\",\n    yourName: \"Your name\",\n    claiming: \"Claiming...\",\n    claimCredits: \"Claim {{credits}} Credits\",\n    enterYourEmail: \"Enter Your Email\",\n    earnCreditsEmail: \"Earn {{credits}} credits + unlock email verification bonus\",\n    provideEmail: \"Provide your email address\",\n    yourEmail: \"your@email.com\",\n    verifyYourEmail: \"Verify Your Email\",\n    checkInbox: \"Check your inbox for a verification email\",\n    clickVerificationLink: \"Click the verification link to activate your account\",\n    earnVerificationCredits: \"Click the verification link in the email to earn {{credits}} additional credits\",\n    shareAndEarn: \"Share & Earn\",\n    earnCreditsEachFriend: \"Earn credits for each friend who joins!\",\n    copy: \"Copy\",\n    copied: \"Copied!\",\n    shareNow: \"Share Now\",\n    earnCreditsPerReferral: \"You'll earn {{credits}} credits per referral\",\n    referralUnavailable: \"Referral sharing is temporarily unavailable\",\n    newCreditsPaused: \"New credits are paused\",\n    currentCredits: \"Current credits:\",\n    done: \"Done\",\n  },\n};\n\n// Spanish translations\nconst esTranslations: Translations = {\n  waitlist: {\n    youreOnTheList: \"¡Estás en la lista!\",\n    yourPosition: \"Tu posición:\",\n    notifyEmail: \"Te notificaremos a {{email}} cuando sea tu turno!\",\n    earlyAccess: \"Acceso Anticipado\",\n    joinWaitlistMessage: \"Únete a nuestra lista de espera exclusiva para acceso anticipado\",\n    enterYourEmail: \"Ingresa tu correo electrónico\",\n    emailRequired: \"El correo electrónico es requerido\",\n    invalidEmail: \"Por favor ingresa una dirección de correo válida\",\n    joinFailed: \"Error al unirse a la lista de espera. Por favor intenta de nuevo.\",\n    errorOccurred: \"Ocurrió un error. Por favor intenta de nuevo.\",\n    joining: \"Uniéndose...\",\n    joinWaitlist: \"Unirse a la Lista de Espera\",\n    noSpam: \"Sin spam. Solo te enviaremos correos cuando sea tu turno.\",\n  },\n  widget: {\n    loading: \"Cargando...\",\n    waitlistActive: \"Lista de Espera Activa\",\n    credits: \"créditos\",\n    creditsPausedTooltip: \"La obtención de créditos está temporalmente pausada\",\n    earnCredits: \"Ganar Créditos\",\n    account: \"Cuenta\",\n    name: \"Nombre:\",\n    email: \"Correo:\",\n    creditsLabel: \"Créditos:\",\n    notSet: \"Sin configurar\",\n    earnMoreCredits: \"Ganar Más Créditos\",\n    emailVerifiedSuccess: \"¡Correo verificado con éxito! +5 créditos ganados\",\n    noVerificationToken: \"No se proporcionó token de verificación\",\n    verificationFailed: \"Error en la verificación. El token puede ser inválido o haber expirado.\",\n    errorMinimal: \"Desconectado\",\n    errorOffline: \"Conexión fallida - ejecutando en modo mínimo\",\n    retry: \"Reintentar\",\n  },\n  modal: {\n    earnCredits: \"Ganar Créditos\",\n    creditsPausedMessage: \"La obtención de créditos está temporalmente pausada para esta aplicación\",\n    completeTasks: \"Completa las tareas siguientes para ganar más créditos:\",\n    nameTab: \"Nombre\",\n    emailTab: \"Correo\",\n    verifyTab: \"Verificar\",\n    shareTab: \"Compartir\",\n    enterYourName: \"Ingresa Tu Nombre\",\n    earnCreditsName: \"Gana {{credits}} créditos diciéndonos tu nombre\",\n    tellUsName: \"Dinos tu nombre\",\n    yourName: \"Tu nombre\",\n    claiming: \"Reclamando...\",\n    claimCredits: \"Reclamar {{credits}} Créditos\",\n    enterYourEmail: \"Ingresa Tu Correo\",\n    earnCreditsEmail: \"Gana {{credits}} créditos + desbloquea el bono de verificación de correo\",\n    provideEmail: \"Proporciona tu dirección de correo electrónico\",\n    yourEmail: \"tu@correo.com\",\n    verifyYourEmail: \"Verifica Tu Correo\",\n    checkInbox: \"Revisa tu bandeja de entrada para el correo de verificación\",\n    clickVerificationLink: \"Haz clic en el enlace de verificación para activar tu cuenta\",\n    earnVerificationCredits: \"Haz clic en el enlace de verificación del correo para ganar {{credits}} créditos adicionales\",\n    shareAndEarn: \"Compartir y Ganar\",\n    earnCreditsEachFriend: \"¡Gana créditos por cada amigo que se una!\",\n    copy: \"Copiar\",\n    copied: \"¡Copiado!\",\n    shareNow: \"Compartir Ahora\",\n    earnCreditsPerReferral: \"Ganarás {{credits}} créditos por referido\",\n    referralUnavailable: \"Compartir referencias temporalmente no disponible\",\n    newCreditsPaused: \"Nuevos créditos pausados\",\n    currentCredits: \"Créditos actuales:\",\n    done: \"Listo\",\n  },\n};\n\n// All translations\nconst translations: Record<Language, Translations> = {\n  en: enTranslations,\n  es: esTranslations,\n};\n\n// Localization context\nexport interface LocalizationContextValue {\n  language: Language;\n  t: Translations;\n  setLanguage?: (language: Language) => void;\n}\n\nexport const LocalizationContext = createContext<LocalizationContextValue>({\n  language: 'en',\n  t: enTranslations,\n});\n\n// Hook to use localization\nexport function useLocalization(): LocalizationContextValue {\n  return useContext(LocalizationContext);\n}\n\n// Helper function to get translations for a language\nexport function getTranslations(language: Language): Translations {\n  return translations[language] || translations.en;\n}\n\n// Helper function to replace placeholders in translation strings\nexport function interpolate(template: string, values: Record<string, string | number>): string {\n  return template.replace(/\\{\\{(\\w+)\\}\\}/g, (match, key) => {\n    return values[key]?.toString() || match;\n  });\n}\n\n// Hook to get a translation function with interpolation\nexport function useTranslation() {\n  const { t, language } = useLocalization();\n  \n  const translate = (key: string, values?: Record<string, string | number>): string => {\n    // Navigate through nested object using dot notation\n    const keys = key.split('.');\n    let value: any = t;\n    \n    for (const k of keys) {\n      value = value?.[k];\n    }\n    \n    if (typeof value !== 'string') {\n      console.warn(`Translation key '${key}' not found for language '${language}'`);\n      return key; // Return the key if translation not found\n    }\n    \n    return values ? interpolate(value, values) : value;\n  };\n  \n  return { t: translate, language };\n}\n","import type { GrowthKitTheme } from './types';\n\nexport interface ThemeColors {\n  // Background colors\n  background: string;\n  backgroundSecondary: string;\n  backgroundGlass: string;\n  \n  // Text colors\n  text: string;\n  textSecondary: string;\n  textMuted: string;\n  \n  // Border colors\n  border: string;\n  borderLight: string;\n  borderFocus: string;\n  \n  // Brand colors (following GrowthKit + FenixBlack theme)\n  primary: string;\n  primaryGradient: string;\n  secondary: string;\n  accent: string;\n  \n  // Status colors\n  success: string;\n  warning: string;\n  error: string;\n  \n  // FenixBlack accent colors\n  magenta: string;\n  purple: string;\n  violet: string;\n  orange: string;\n  pink: string;\n  \n  // Shadows and effects\n  shadow: string;\n  shadowSm: string;\n  shadowLg: string;\n  \n  // Interactive states\n  hover: string;\n  active: string;\n  \n  // Input specific colors\n  inputBackground: string;\n  inputBorder: string;\n  inputPlaceholder: string;\n  inputFocus: string;\n  \n  // Modal specific colors\n  overlay: string;\n}\n\nexport const lightTheme: ThemeColors = {\n  // Background colors\n  background: '#ffffff',\n  backgroundSecondary: '#f8fafc',\n  backgroundGlass: 'rgba(255, 255, 255, 0.95)',\n  \n  // Text colors\n  text: '#1e293b',\n  textSecondary: '#64748b',\n  textMuted: '#94a3b8',\n  \n  // Border colors\n  border: '#e2e8f0',\n  borderLight: '#f1f5f9',\n  borderFocus: '#10b981',\n  \n  // Brand colors (GrowthKit + FenixBlack)\n  primary: '#10b981',\n  primaryGradient: 'linear-gradient(135deg, #10b981 0%, #14b8a6 50%, #06b6d4 100%)',\n  secondary: '#14b8a6',\n  accent: '#06b6d4',\n  \n  // Status colors\n  success: '#10b981',\n  warning: '#f97316',\n  error: '#ef4444',\n  \n  // FenixBlack accent colors\n  magenta: '#d946ef',\n  purple: '#a855f7',\n  violet: '#8b5cf6',\n  orange: '#f97316',\n  pink: '#ec4899',\n  \n  // Shadows and effects\n  shadow: '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',\n  shadowSm: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',\n  shadowLg: '0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.2)',\n  \n  // Interactive states\n  hover: 'rgba(16, 185, 129, 0.05)',\n  active: 'rgba(16, 185, 129, 0.1)',\n  \n  // Input specific colors\n  inputBackground: 'rgba(255, 255, 255, 0.8)',\n  inputBorder: '#e2e8f0',\n  inputPlaceholder: '#94a3b8',\n  inputFocus: 'rgba(16, 185, 129, 0.1)',\n  \n  // Modal specific colors\n  overlay: 'rgba(0, 0, 0, 0.6)',\n};\n\nexport const darkTheme: ThemeColors = {\n  // Background colors\n  background: '#1e293b',\n  backgroundSecondary: '#334155',\n  backgroundGlass: 'rgba(30, 41, 59, 0.95)',\n  \n  // Text colors\n  text: '#f8fafc',\n  textSecondary: '#cbd5e1',\n  textMuted: '#94a3b8',\n  \n  // Border colors\n  border: '#334155',\n  borderLight: '#475569',\n  borderFocus: '#10b981',\n  \n  // Brand colors (maintain GrowthKit + FenixBlack essence)\n  primary: '#10b981',\n  primaryGradient: 'linear-gradient(135deg, #10b981 0%, #14b8a6 50%, #06b6d4 100%)',\n  secondary: '#14b8a6',\n  accent: '#06b6d4',\n  \n  // Status colors\n  success: '#10b981',\n  warning: '#f97316',\n  error: '#ef4444',\n  \n  // FenixBlack accent colors (slightly adjusted for dark mode)\n  magenta: '#d946ef',\n  purple: '#a855f7',\n  violet: '#8b5cf6',\n  orange: '#f97316',\n  pink: '#ec4899',\n  \n  // Shadows and effects\n  shadow: '0 10px 25px -5px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.1)',\n  shadowSm: '0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.1)',\n  shadowLg: '0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.1)',\n  \n  // Interactive states\n  hover: 'rgba(16, 185, 129, 0.1)',\n  active: 'rgba(16, 185, 129, 0.2)',\n  \n  // Input specific colors\n  inputBackground: 'rgba(51, 65, 85, 0.8)',\n  inputBorder: '#475569',\n  inputPlaceholder: '#94a3b8',\n  inputFocus: 'rgba(16, 185, 129, 0.2)',\n  \n  // Modal specific colors\n  overlay: 'rgba(0, 0, 0, 0.8)',\n};\n\n/**\n * Get the effective theme, resolving 'auto' to 'light' or 'dark'\n */\nexport function getEffectiveTheme(theme: GrowthKitTheme): 'light' | 'dark' {\n  if (theme === 'auto') {\n    // Check system preference\n    if (typeof window !== 'undefined' && window.matchMedia) {\n      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n    }\n    return 'light'; // Default fallback\n  }\n  return theme;\n}\n\n/**\n * Get theme colors based on the theme type\n */\nexport function getThemeColors(theme: GrowthKitTheme): ThemeColors {\n  const effectiveTheme = getEffectiveTheme(theme);\n  return effectiveTheme === 'dark' ? darkTheme : lightTheme;\n}\n\n/**\n * Create CSS custom properties for theming\n * Useful for applying themes to components\n */\nexport function createThemeVariables(theme: GrowthKitTheme): Record<string, string> {\n  const colors = getThemeColors(theme);\n  \n  return {\n    '--gk-bg': colors.background,\n    '--gk-bg-secondary': colors.backgroundSecondary,\n    '--gk-bg-glass': colors.backgroundGlass,\n    '--gk-text': colors.text,\n    '--gk-text-secondary': colors.textSecondary,\n    '--gk-text-muted': colors.textMuted,\n    '--gk-border': colors.border,\n    '--gk-border-light': colors.borderLight,\n    '--gk-border-focus': colors.borderFocus,\n    '--gk-primary': colors.primary,\n    '--gk-primary-gradient': colors.primaryGradient,\n    '--gk-secondary': colors.secondary,\n    '--gk-accent': colors.accent,\n    '--gk-success': colors.success,\n    '--gk-warning': colors.warning,\n    '--gk-error': colors.error,\n    '--gk-magenta': colors.magenta,\n    '--gk-purple': colors.purple,\n    '--gk-violet': colors.violet,\n    '--gk-orange': colors.orange,\n    '--gk-pink': colors.pink,\n    '--gk-shadow': colors.shadow,\n    '--gk-shadow-sm': colors.shadowSm,\n    '--gk-shadow-lg': colors.shadowLg,\n    '--gk-hover': colors.hover,\n    '--gk-active': colors.active,\n    '--gk-input-bg': colors.inputBackground,\n    '--gk-input-border': colors.inputBorder,\n    '--gk-input-placeholder': colors.inputPlaceholder,\n    '--gk-input-focus': colors.inputFocus,\n    '--gk-overlay': colors.overlay,\n  };\n}\n\n/**\n * Listen to system theme changes\n */\nexport function onSystemThemeChange(callback: (isDark: boolean) => void): () => void {\n  if (typeof window === 'undefined' || !window.matchMedia) {\n    return () => {}; // No-op for SSR\n  }\n  \n  const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n  \n  const handler = (e: MediaQueryListEvent) => {\n    callback(e.matches);\n  };\n  \n  // Add listener (modern browsers)\n  if (mediaQuery.addEventListener) {\n    mediaQuery.addEventListener('change', handler);\n    return () => mediaQuery.removeEventListener('change', handler);\n  }\n  \n  // Fallback for older browsers\n  if (mediaQuery.addListener) {\n    mediaQuery.addListener(handler);\n    return () => mediaQuery.removeListener(handler);\n  }\n  \n  return () => {}; // No-op fallback\n}\n\n/**\n * Utility to create focus styles for inputs\n */\nexport function getFocusStyles(theme: ThemeColors) {\n  return {\n    borderColor: theme.borderFocus,\n    boxShadow: `0 0 0 3px ${theme.inputFocus}`,\n    backgroundColor: theme.background,\n  };\n}\n\n/**\n * Utility to create hover styles for buttons\n */\nexport function getButtonHoverStyles(theme: ThemeColors) {\n  return {\n    transform: 'translateY(-2px)',\n    boxShadow: `0 20px 40px -5px ${theme.primary}80, 0 8px 16px -4px ${theme.primary}40`,\n  };\n}\n","'use client';\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useGrowthKit } from '../useGrowthKit';\nimport { useGrowthKitConfig } from './GrowthKitProvider';\nimport { WaitlistForm } from './WaitlistForm';\nimport { CreditExhaustionModal } from './CreditExhaustionModal';\nimport type { CreditExhaustionModalRef } from './CreditExhaustionModal';\nimport { useTranslation } from '../localization';\n\ninterface GrowthKitGateProps {\n  children: React.ReactNode;\n  loadingComponent?: React.ReactNode;\n}\n\nexport function GrowthKitGate({ children, loadingComponent }: GrowthKitGateProps) {\n  const { \n    loading, \n    initialized, \n    error,\n    shouldShowWaitlist,\n    credits,\n    waitlistEnabled \n  } = useGrowthKit();\n  \n  const { themeColors } = useGrowthKitConfig();\n  const { t } = useTranslation();\n  const creditModalRef = useRef<CreditExhaustionModalRef>(null);\n\n  // Show credit exhaustion modal when needed\n  // Must be before any conditional returns to follow React's rules of hooks\n  useEffect(() => {\n    if (credits === 0 && !loading && !waitlistEnabled) {\n      creditModalRef.current?.open();\n    }\n  }, [credits, loading, waitlistEnabled]);\n\n  // Show loading state\n  if (loading || !initialized) {\n    return (\n      <>\n        {loadingComponent || (\n          <div style={{ \n            display: 'flex', \n            flexDirection: 'column',\n            justifyContent: 'center', \n            alignItems: 'center', \n            height: '100vh',\n            fontFamily: 'Inter, system-ui, -apple-system, sans-serif',\n            background: themeColors.primaryGradient,\n          }}>\n            <div style={{\n              background: themeColors.backgroundGlass,\n              borderRadius: '20px',\n              padding: '48px',\n              boxShadow: themeColors.shadowLg,\n              backdropFilter: 'blur(16px)',\n              border: `1px solid ${themeColors.borderLight}`,\n              textAlign: 'center',\n            }}>\n              <div style={{\n                width: '40px',\n                height: '40px',\n                border: `3px solid ${themeColors.border}`,\n                borderTop: `3px solid ${themeColors.primary}`,\n                borderRadius: '50%',\n                animation: 'spin 1s linear infinite',\n                margin: '0 auto 24px auto',\n              }} />\n              <p style={{ \n                margin: 0, \n                fontSize: '18px', \n                fontWeight: '600',\n                color: themeColors.text,\n                background: themeColors.primaryGradient,\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n                backgroundClip: 'text',\n              }}>\n                {t('widget.loading')}\n              </p>\n            </div>\n          </div>\n        )}\n      </>\n    );\n  }\n\n  // Handle error state: Allow children to render but log the error\n  if (error && initialized) {\n    console.warn('[GrowthKit] Gate is in error state but allowing content to load:', error.message);\n    // Continue to render children - don't block the app due to GrowthKit errors\n  }\n\n  // Show waitlist if required\n  if (shouldShowWaitlist) {\n    return <WaitlistForm />;\n  }\n\n  return (\n    <>\n      {children}\n      <CreditExhaustionModal ref={creditModalRef} />\n    </>\n  );\n}","'use client';\n\nimport React, { useState, FormEvent } from 'react';\nimport { useGrowthKit } from '../useGrowthKit';\nimport { useGrowthKitConfig } from './GrowthKitProvider';\nimport { useTranslation, interpolate } from '../localization';\n\nexport interface WaitlistFormProps {\n  message?: string;\n  onSuccess?: (position: number) => void;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\n/**\n * Modern waitlist form component with app branding\n */\nexport function WaitlistForm({ \n  message,\n  onSuccess,\n  className,\n  style \n}: WaitlistFormProps) {\n  const growthKit = useGrowthKit();\n  const { themeColors } = useGrowthKitConfig();\n  const { t } = useTranslation();\n  const [email, setEmail] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [position, setPosition] = useState<number | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const { app } = growthKit;\n  const layout = app?.waitlistLayout || 'centered';\n  const brandColor = app?.primaryColor || themeColors.primary;\n  const bgColor = app?.backgroundColor || 'linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%)';\n  const cardBgColor = app?.cardBackgroundColor || 'rgba(255, 255, 255, 0.05)';\n  \n  // Get custom message from props, messages array, or fallback\n  const getCustomMessage = () => {\n    if (message) return message; // Props message takes priority\n    \n    // Check if we have messages array from waitlist data\n    const messages = growthKit.waitlist?.messages || [];\n    if (messages.length > 0) {\n      // Randomly select a message from the array\n      const randomIndex = Math.floor(Math.random() * messages.length);\n      return messages[randomIndex];\n    }\n    \n    // Backwards compatibility: check for single message\n    if (growthKit.waitlistMessage) return growthKit.waitlistMessage;\n    \n    // Final fallback\n    return app?.description ? null : 'Join our exclusive waitlist for early access';\n  };\n  \n  const displayMessage = getCustomMessage();\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    \n    if (!email) {\n      setError(t('waitlist.emailRequired'));\n      return;\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      setError(t('waitlist.invalidEmail'));\n      return;\n    }\n\n    setIsSubmitting(true);\n    setError(null);\n\n    try {\n      const success = await growthKit.joinWaitlist(email);\n      \n      if (success) {\n        await growthKit.refresh();\n        const newPosition = growthKit.waitlistPosition || 0;\n        setPosition(newPosition);\n        \n        if (onSuccess) {\n          onSuccess(newPosition);\n        }\n      } else {\n        setError(t('waitlist.joinFailed'));\n      }\n    } catch (err) {\n      setError(t('waitlist.errorOccurred'));\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Generate logo fallback from app name\n  const getLogoFallback = () => {\n    if (!app?.name) return 'WL';\n    const words = app.name.split(' ');\n    const initials = words.map(w => w[0]).join('').toUpperCase().substring(0, 2);\n    return initials;\n  };\n\n  // Success state - user is on waitlist\n  if (position !== null || growthKit.waitlistStatus === 'waiting') {\n    const displayPosition = position || growthKit.waitlistPosition || 0;\n    \n    return (\n      <div \n        className={className}\n        style={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          minHeight: '100vh',\n          fontFamily: 'Inter, system-ui, -apple-system, sans-serif',\n          background: 'linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%)',\n          backgroundSize: '200% 200%',\n          animation: 'gradientShift 15s ease infinite',\n          ...style\n        }}\n      >\n        <style>{`\n          @keyframes gradientShift {\n            0%, 100% { background-position: 0% 50%; }\n            50% { background-position: 100% 50%; }\n          }\n          @keyframes fadeInUp {\n            from {\n              opacity: 0;\n              transform: translateY(30px);\n            }\n            to {\n              opacity: 1;\n              transform: translateY(0);\n            }\n          }\n          @keyframes pulse {\n            0%, 100% { transform: scale(1); opacity: 1; }\n            50% { transform: scale(1.05); opacity: 0.9; }\n          }\n        `}</style>\n        \n        <div style={{\n          textAlign: 'center',\n          padding: '56px',\n          maxWidth: '520px',\n          background: 'rgba(255, 255, 255, 0.05)',\n          borderRadius: '24px',\n          boxShadow: '0 20px 60px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.05) inset',\n          backdropFilter: 'blur(20px) saturate(180%)',\n          border: '1px solid rgba(255, 255, 255, 0.1)',\n          animation: 'fadeInUp 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)',\n        }}>\n          <div style={{ \n            fontSize: '72px', \n            marginBottom: '24px',\n            animation: 'pulse 2s ease-in-out 1',\n          }}>✨</div>\n          \n          <h1 style={{ \n            marginBottom: '24px', \n            color: 'white',\n            fontSize: '32px',\n            fontWeight: '900',\n            background: `linear-gradient(135deg, ${brandColor} 0%, ${brandColor}dd 100%)`,\n            WebkitBackgroundClip: 'text',\n            WebkitTextFillColor: 'transparent',\n            backgroundClip: 'text',\n            letterSpacing: '-0.03em',\n          }}>{t('waitlist.youreOnTheList')}</h1>\n          \n          <div style={{\n            background: `linear-gradient(135deg, ${brandColor}20 0%, ${brandColor}10 100%)`,\n            border: `2px solid ${brandColor}40`,\n            borderRadius: '16px',\n            padding: '36px',\n            marginBottom: '24px',\n            backdropFilter: 'blur(8px)',\n          }}>\n            <p style={{ \n              color: 'rgba(255, 255, 255, 0.7)', \n              marginBottom: '12px',\n              fontSize: '16px',\n              fontWeight: '600',\n            }}>{t('waitlist.yourPosition')}</p>\n            <div style={{\n              fontSize: '56px',\n              fontWeight: '900',\n              background: `linear-gradient(135deg, ${brandColor} 0%, ${brandColor}dd 100%)`,\n              WebkitBackgroundClip: 'text',\n              WebkitTextFillColor: 'transparent',\n              backgroundClip: 'text',\n              letterSpacing: '-0.05em',\n            }}>\n              #{displayPosition}\n            </div>\n          </div>\n          \n          <p style={{ \n            color: 'rgba(255, 255, 255, 0.7)',\n            fontSize: '16px',\n            fontWeight: '500',\n            lineHeight: '1.6',\n          }}>\n            {t('waitlist.notifyEmail', { email: email || 'your email' })}\n          </p>\n\n          {!app?.hideGrowthKitBranding && (\n            <a\n              href=\"https://growth.fenixblack.ai\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              style={{\n                marginTop: '32px',\n                paddingTop: '24px',\n                borderTop: '1px solid rgba(255, 255, 255, 0.1)',\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: '12px',\n                textDecoration: 'none',\n                transition: 'opacity 0.2s ease',\n                cursor: 'pointer',\n              }}\n              onMouseOver={(e) => e.currentTarget.style.opacity = '0.8'}\n              onMouseOut={(e) => e.currentTarget.style.opacity = '1'}\n            >\n              <img \n                src=\"https://growth.fenixblack.ai/growthkit-logo-dark-alpha.png\"\n                alt=\"GrowthKit\"\n                style={{\n                  height: '24px',\n                  width: 'auto',\n                }}\n              />\n              <span style={{\n                color: 'rgba(255, 255, 255, 0.5)',\n                fontSize: '11px',\n                fontWeight: '500',\n              }}>\n                Powered by GrowthKit\n              </span>\n            </a>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // Get smart waitlist message based on count\n  const getWaitlistMessage = () => {\n    const waitlistCount = growthKit.waitlist?.count || 0;\n    const threshold = 500;\n    \n    // If count is significant, show it\n    if (waitlistCount >= threshold) {\n      if (waitlistCount >= 1000) {\n        return `Join ${waitlistCount.toLocaleString()} others on the waitlist`;\n      }\n      return `Join over ${Math.floor(waitlistCount / 100) * 100} on the waitlist`;\n    }\n    \n    // Otherwise show value-driven message\n    return displayMessage || 'Be among the first to get access';\n  };\n\n  // Join form - render based on layout\n  const renderCenteredLayout = () => (\n    <div \n      className={className}\n      style={{\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        minHeight: '100vh',\n        fontFamily: 'Inter, system-ui, -apple-system, sans-serif',\n        background: bgColor,\n        backgroundSize: bgColor.includes('gradient') ? '200% 200%' : 'auto',\n        animation: bgColor.includes('gradient') ? 'gradientShift 15s ease infinite' : 'none',\n        padding: '24px',\n        ...style\n      }}\n    >\n      <style>{`\n        @keyframes gradientShift {\n          0%, 100% { background-position: 0% 50%; }\n          50% { background-position: 100% 50%; }\n        }\n        @keyframes fadeInUp {\n          from { opacity: 0; transform: translateY(30px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        @keyframes logoFloat {\n          from { opacity: 0; transform: translateY(-20px) scale(0.9); }\n          to { opacity: 1; transform: translateY(0) scale(1); }\n        }\n      `}</style>\n\n      {/* Floating Logo Container */}\n      <div style={{\n        position: 'relative',\n        maxWidth: '520px',\n        width: '100%',\n      }}>\n        {/* Logo - Floating above card */}\n        {app?.logoUrl || app?.name ? (\n          <div style={{\n            position: 'relative',\n            zIndex: 2,\n            marginBottom: '-70px', // Overlap with card\n            display: 'flex',\n            justifyContent: 'center',\n            animation: 'logoFloat 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)',\n          }}>\n            {app?.logoUrl ? (\n              <div style={{\n                width: '140px',\n                height: '140px',\n                borderRadius: '28px',\n                background: 'rgba(255, 255, 255, 0.98)',\n                padding: '20px',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                boxShadow: `0 20px 60px ${brandColor}40, 0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.2)`,\n                backdropFilter: 'blur(10px)',\n              }}>\n                <img \n                  src={app.logoUrl} \n                  alt={app.name}\n                  style={{ \n                    width: '100%', \n                    height: '100%', \n                    objectFit: 'contain',\n                    display: 'block',\n                  }}\n                />\n              </div>\n            ) : (\n              <div style={{\n                width: '140px',\n                height: '140px',\n                borderRadius: '28px',\n                background: `linear-gradient(135deg, ${brandColor} 0%, ${brandColor}dd 100%)`,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                fontSize: '48px',\n                fontWeight: '800',\n                color: 'white',\n                boxShadow: `0 20px 60px ${brandColor}50, 0 8px 24px rgba(0, 0, 0, 0.3)`,\n                letterSpacing: '-0.02em',\n              }}>\n                {getLogoFallback()}\n              </div>\n            )}\n          </div>\n        ) : null}\n\n        {/* Main Card */}\n        <div style={{\n          background: cardBgColor,\n          borderRadius: '24px',\n          padding: app?.logoUrl || app?.name ? '90px 64px 64px' : '64px',\n          boxShadow: '0 20px 60px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.05) inset',\n          backdropFilter: cardBgColor.includes('rgba') || cardBgColor.includes('transparent') ? 'blur(20px) saturate(180%)' : 'none',\n          border: '1px solid rgba(255, 255, 255, 0.1)',\n          animation: 'fadeInUp 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)',\n          position: 'relative',\n          zIndex: 1,\n        }}>\n          {/* App Name */}\n          <h1 style={{ \n            marginBottom: '16px', \n            color: 'white',\n            fontSize: '40px',\n            fontWeight: '900',\n            background: `linear-gradient(135deg, ${brandColor} 0%, ${brandColor}dd 100%)`,\n            WebkitBackgroundClip: 'text',\n            WebkitTextFillColor: 'transparent',\n            backgroundClip: 'text',\n            letterSpacing: '-0.03em',\n            textAlign: 'center',\n            lineHeight: '1.1',\n          }}>\n            {app?.name || 'Early Access'}\n          </h1>\n          \n          {/* App Description */}\n          {app?.description && (\n            <p style={{ \n              color: 'rgba(255, 255, 255, 0.85)',\n              marginBottom: '32px',\n              fontSize: '17px',\n              fontWeight: '500',\n              lineHeight: '1.6',\n              textAlign: 'center',\n            }}>\n              {app.description}\n            </p>\n          )}\n\n          {/* Waitlist Context Message */}\n          <div style={{\n            background: `linear-gradient(135deg, ${brandColor}15 0%, ${brandColor}08 100%)`,\n            border: `1px solid ${brandColor}30`,\n            borderRadius: '16px',\n            padding: '20px 24px',\n            marginBottom: '32px',\n            textAlign: 'center',\n          }}>\n            <p style={{\n              color: brandColor,\n              fontSize: '16px',\n              fontWeight: '700',\n              lineHeight: '1.5',\n              margin: 0,\n            }}>\n              {getWaitlistMessage()}\n            </p>\n          </div>\n\n          <form onSubmit={handleSubmit}>\n            <div style={{ marginBottom: '20px' }}>\n              <input\n                type=\"email\"\n                placeholder={t('waitlist.enterYourEmail')}\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                disabled={isSubmitting}\n                style={{\n                  width: '100%',\n                  padding: '18px 24px',\n                  fontSize: '16px',\n                  border: '2px solid rgba(255, 255, 255, 0.15)',\n                  borderRadius: '16px',\n                  outline: 'none',\n                  transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n                  boxSizing: 'border-box',\n                  fontFamily: 'inherit',\n                  fontWeight: '500',\n                  backgroundColor: 'rgba(255, 255, 255, 0.08)',\n                  backdropFilter: 'blur(10px)',\n                  color: 'white',\n                }}\n                onFocus={(e) => {\n                  e.currentTarget.style.borderColor = brandColor;\n                  e.currentTarget.style.boxShadow = `0 0 0 4px ${brandColor}20`;\n                  e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.12)';\n                  e.currentTarget.style.transform = 'translateY(-1px)';\n                }}\n                onBlur={(e) => {\n                  e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.15)';\n                  e.currentTarget.style.boxShadow = 'none';\n                  e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.08)';\n                  e.currentTarget.style.transform = 'translateY(0)';\n                }}\n              />\n            </div>\n\n            {error && (\n              <p style={{ \n                color: '#ef4444',\n                marginBottom: '24px',\n                fontSize: '14px',\n                fontWeight: '500',\n                padding: '12px 16px',\n                backgroundColor: 'rgba(239, 68, 68, 0.2)',\n                border: '1px solid rgba(239, 68, 68, 0.4)',\n                borderRadius: '12px',\n                textAlign: 'center',\n              }}>\n                {error}\n              </p>\n            )}\n\n            <button\n              type=\"submit\"\n              disabled={isSubmitting}\n              style={{\n                width: '100%',\n                padding: '20px 32px',\n                fontSize: '18px',\n                fontWeight: '700',\n                background: isSubmitting \n                  ? 'linear-gradient(135deg, #9ca3af 0%, #6b7280 100%)' \n                  : `linear-gradient(135deg, ${brandColor} 0%, ${brandColor}dd 100%)`,\n                color: 'white',\n                border: 'none',\n                borderRadius: '16px',\n                cursor: isSubmitting ? 'not-allowed' : 'pointer',\n                transition: 'all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)',\n                fontFamily: 'inherit',\n                letterSpacing: '0.025em',\n                boxShadow: isSubmitting \n                  ? 'none'\n                  : `0 10px 30px ${brandColor}40, 0 0 0 1px rgba(255, 255, 255, 0.1) inset`,\n              }}\n              onMouseOver={(e) => {\n                if (!isSubmitting) {\n                  e.currentTarget.style.transform = 'translateY(-3px) scale(1.02)';\n                  e.currentTarget.style.boxShadow = `0 20px 50px ${brandColor}60, 0 0 0 1px rgba(255, 255, 255, 0.2) inset`;\n                }\n              }}\n              onMouseOut={(e) => {\n                if (!isSubmitting) {\n                  e.currentTarget.style.transform = 'translateY(0) scale(1)';\n                  e.currentTarget.style.boxShadow = `0 10px 30px ${brandColor}40, 0 0 0 1px rgba(255, 255, 255, 0.1) inset`;\n                }\n              }}\n            >\n              {isSubmitting ? t('waitlist.joining') : t('waitlist.joinWaitlist')}\n            </button>\n          </form>\n\n          <p style={{\n            marginTop: '24px',\n            textAlign: 'center',\n            color: 'rgba(255, 255, 255, 0.5)',\n            fontSize: '14px',\n            fontWeight: '500',\n          }}>\n            {t('waitlist.noSpam')}\n          </p>\n\n          {!app?.hideGrowthKitBranding && (\n            <a\n              href=\"https://growth.fenixblack.ai\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              style={{\n                marginTop: '40px',\n                paddingTop: '32px',\n                borderTop: '1px solid rgba(255, 255, 255, 0.1)',\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: '12px',\n                textDecoration: 'none',\n                transition: 'opacity 0.2s ease',\n                cursor: 'pointer',\n              }}\n              onMouseOver={(e) => e.currentTarget.style.opacity = '0.8'}\n              onMouseOut={(e) => e.currentTarget.style.opacity = '1'}\n            >\n              <img \n                src=\"https://growth.fenixblack.ai/growthkit-logo-dark-alpha.png\"\n                alt=\"GrowthKit\"\n                style={{\n                  height: '24px',\n                  width: 'auto',\n                }}\n              />\n              <span style={{\n                color: 'rgba(255, 255, 255, 0.5)',\n                fontSize: '11px',\n                fontWeight: '500',\n              }}>\n                Powered by GrowthKit\n              </span>\n            </a>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderSplitLayout = () => (\n    <div \n      className={className}\n      style={{\n        display: 'flex',\n        minHeight: '100vh',\n        fontFamily: 'Inter, system-ui, -apple-system, sans-serif',\n        ...style\n      }}\n    >\n      {/* Left side - Branding */}\n      <div style={{\n        flex: '1',\n        background: bgColor,\n        backgroundSize: bgColor.includes('gradient') ? '200% 200%' : 'auto',\n        padding: '80px 60px',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'flex-start',\n        position: 'relative',\n        overflow: 'hidden',\n      }}>\n        {/* Logo */}\n        {app?.logoUrl ? (\n          <div style={{\n            width: '140px',\n            height: '140px',\n            borderRadius: '28px',\n            background: 'rgba(255, 255, 255, 0.98)',\n            padding: '20px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            marginBottom: '48px',\n            boxShadow: '0 20px 60px rgba(0, 0, 0, 0.3), 0 8px 24px rgba(0, 0, 0, 0.2)',\n          }}>\n            <img \n              src={app.logoUrl} \n              alt={app.name}\n              style={{ \n                width: '100%', \n                height: '100%', \n                objectFit: 'contain',\n              }}\n            />\n          </div>\n        ) : app?.name ? (\n          <div style={{\n            width: '140px',\n            height: '140px',\n            borderRadius: '28px',\n            background: `linear-gradient(135deg, ${brandColor} 0%, ${brandColor}dd 100%)`,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            fontSize: '48px',\n            fontWeight: '800',\n            color: 'white',\n            marginBottom: '48px',\n            boxShadow: '0 20px 60px rgba(0, 0, 0, 0.3)',\n            letterSpacing: '-0.02em',\n          }}>\n            {getLogoFallback()}\n          </div>\n        ) : null}\n\n        <h1 style={{\n          fontSize: '56px',\n          fontWeight: '900',\n          color: 'white',\n          marginBottom: '24px',\n          lineHeight: '1.1',\n          letterSpacing: '-0.03em',\n          textShadow: '0 2px 20px rgba(0, 0, 0, 0.2)',\n        }}>\n          {app?.name || 'Join the Waitlist'}\n        </h1>\n        \n        {app?.description && (\n          <p style={{\n            fontSize: '20px',\n            color: 'rgba(255, 255, 255, 0.95)',\n            lineHeight: '1.6',\n            marginBottom: '32px',\n            fontWeight: '500',\n            maxWidth: '500px',\n          }}>\n            {app.description}\n          </p>\n        )}\n\n        {/* Waitlist Message Box */}\n        <div style={{\n          background: 'rgba(255, 255, 255, 0.15)',\n          backdropFilter: 'blur(10px)',\n          border: '1px solid rgba(255, 255, 255, 0.2)',\n          borderRadius: '16px',\n          padding: '20px 28px',\n          marginTop: '16px',\n          maxWidth: '500px',\n        }}>\n          <p style={{\n            fontSize: '18px',\n            color: 'white',\n            fontWeight: '700',\n            margin: 0,\n            lineHeight: '1.5',\n          }}>\n            {getWaitlistMessage()}\n          </p>\n        </div>\n      </div>\n\n      {/* Right side - Form */}\n      <div style={{\n        flex: '1',\n        background: cardBgColor,\n        padding: '80px 60px',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n      }}>\n        <form onSubmit={handleSubmit} style={{ maxWidth: '440px', width: '100%' }}>\n          <h2 style={{\n            fontSize: '36px',\n            fontWeight: '800',\n            color: cardBgColor.includes('rgba') || cardBgColor.includes('0.') ? 'white' : '#1f2937',\n            marginBottom: '12px',\n            letterSpacing: '-0.02em',\n            lineHeight: '1.2',\n          }}>\n            Get Early Access\n          </h2>\n          \n          <p style={{\n            fontSize: '16px',\n            color: cardBgColor.includes('rgba') || cardBgColor.includes('0.') ? 'rgba(255, 255, 255, 0.8)' : '#6b7280',\n            marginBottom: '40px',\n            lineHeight: '1.6',\n          }}>\n            Enter your email to join the waitlist\n          </p>\n\n          <input\n            type=\"email\"\n            placeholder={t('waitlist.enterYourEmail')}\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            disabled={isSubmitting}\n            style={{\n              width: '100%',\n              padding: '18px 24px',\n              fontSize: '16px',\n              border: cardBgColor.includes('rgba') ? '2px solid rgba(255, 255, 255, 0.2)' : '2px solid #e5e7eb',\n              borderRadius: '16px',\n              outline: 'none',\n              marginBottom: '20px',\n              boxSizing: 'border-box',\n              fontFamily: 'inherit',\n              fontWeight: '500',\n              backgroundColor: cardBgColor.includes('rgba') ? 'rgba(255, 255, 255, 0.1)' : 'white',\n              color: cardBgColor.includes('rgba') ? 'white' : '#1f2937',\n              transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n            }}\n            onFocus={(e) => {\n              e.currentTarget.style.borderColor = brandColor;\n              e.currentTarget.style.boxShadow = `0 0 0 4px ${brandColor}20`;\n              e.currentTarget.style.transform = 'translateY(-2px)';\n            }}\n            onBlur={(e) => {\n              e.currentTarget.style.borderColor = cardBgColor.includes('rgba') ? 'rgba(255, 255, 255, 0.2)' : '#e5e7eb';\n              e.currentTarget.style.boxShadow = 'none';\n              e.currentTarget.style.transform = 'translateY(0)';\n            }}\n          />\n\n          {error && (\n            <p style={{ \n              color: '#ef4444',\n              marginBottom: '24px',\n              fontSize: '14px',\n              fontWeight: '500',\n              padding: '12px 16px',\n              backgroundColor: 'rgba(239, 68, 68, 0.1)',\n              border: '1px solid rgba(239, 68, 68, 0.3)',\n              borderRadius: '12px',\n              textAlign: 'center',\n            }}>\n              {error}\n            </p>\n          )}\n\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            style={{\n              width: '100%',\n              padding: '20px 32px',\n              fontSize: '18px',\n              fontWeight: '700',\n              background: isSubmitting \n                ? 'linear-gradient(135deg, #9ca3af 0%, #6b7280 100%)' \n                : `linear-gradient(135deg, ${brandColor} 0%, ${brandColor}dd 100%)`,\n              color: 'white',\n              border: 'none',\n              borderRadius: '16px',\n              cursor: isSubmitting ? 'not-allowed' : 'pointer',\n              transition: 'all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)',\n              fontFamily: 'inherit',\n              letterSpacing: '0.025em',\n              boxShadow: isSubmitting \n                ? 'none'\n                : `0 10px 30px ${brandColor}40, 0 0 0 1px rgba(255, 255, 255, 0.1) inset`,\n            }}\n            onMouseOver={(e) => {\n              if (!isSubmitting) {\n                e.currentTarget.style.transform = 'translateY(-3px) scale(1.02)';\n                e.currentTarget.style.boxShadow = `0 20px 50px ${brandColor}60, 0 0 0 1px rgba(255, 255, 255, 0.2) inset`;\n              }\n            }}\n            onMouseOut={(e) => {\n              if (!isSubmitting) {\n                e.currentTarget.style.transform = 'translateY(0) scale(1)';\n                e.currentTarget.style.boxShadow = `0 10px 30px ${brandColor}40, 0 0 0 1px rgba(255, 255, 255, 0.1) inset`;\n              }\n            }}\n          >\n            {isSubmitting ? t('waitlist.joining') : t('waitlist.joinWaitlist')}\n          </button>\n\n          <p style={{\n            marginTop: '24px',\n            textAlign: 'center',\n            color: cardBgColor.includes('rgba') || cardBgColor.includes('0.') ? 'rgba(255, 255, 255, 0.6)' : '#6b7280',\n            fontSize: '14px',\n            fontWeight: '500',\n          }}>\n            {t('waitlist.noSpam')}\n          </p>\n        </form>\n\n        {!app?.hideGrowthKitBranding && (\n          <a\n            href=\"https://growth.fenixblack.ai\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style={{\n              marginTop: '48px',\n              paddingTop: '32px',\n              borderTop: cardBgColor.includes('rgba') ? '1px solid rgba(255, 255, 255, 0.1)' : '1px solid #e5e7eb',\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              gap: '12px',\n              textDecoration: 'none',\n              transition: 'opacity 0.2s ease',\n              cursor: 'pointer',\n            }}\n            onMouseOver={(e) => e.currentTarget.style.opacity = '0.8'}\n            onMouseOut={(e) => e.currentTarget.style.opacity = '1'}\n          >\n            <img \n              src={cardBgColor.includes('rgba') || cardBgColor.includes('0.') \n                ? \"https://growth.fenixblack.ai/growthkit-logo-dark-alpha.png\"\n                : \"https://growth.fenixblack.ai/growthkit-logo-alpha.png\"}\n              alt=\"GrowthKit\"\n              style={{\n                height: '24px',\n                width: 'auto',\n              }}\n            />\n            <span style={{\n              color: cardBgColor.includes('rgba') || cardBgColor.includes('0.') ? 'rgba(255, 255, 255, 0.5)' : '#9ca3af',\n              fontSize: '11px',\n              fontWeight: '500',\n            }}>\n              Powered by GrowthKit\n            </span>\n          </a>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderMinimalLayout = () => (\n    <div \n      className={className}\n      style={{\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        minHeight: '100vh',\n        fontFamily: 'Inter, system-ui, -apple-system, sans-serif',\n        background: '#ffffff',\n        ...style\n      }}\n    >\n      <div style={{\n        maxWidth: '400px',\n        width: '100%',\n        padding: '24px',\n      }}>\n        {app?.logoUrl && (\n          <img \n            src={app.logoUrl} \n            alt={app.name}\n            style={{ \n              width: '48px', \n              height: '48px', \n              borderRadius: '12px',\n              marginBottom: '16px',\n              objectFit: 'cover',\n            }}\n          />\n        )}\n        \n        <h1 style={{\n          fontSize: '24px',\n          fontWeight: '700',\n          color: '#1f2937',\n          marginBottom: '8px',\n        }}>\n          {app?.name || 'Join Waitlist'}\n        </h1>\n        \n        {(app?.description || displayMessage) && (\n          <p style={{\n            color: '#6b7280',\n            marginBottom: '24px',\n            fontSize: '14px',\n          }}>\n            {displayMessage || app?.description}\n          </p>\n        )}\n\n        <form onSubmit={handleSubmit}>\n          <input\n            type=\"email\"\n            placeholder={t('waitlist.enterYourEmail')}\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            disabled={isSubmitting}\n            style={{\n              width: '100%',\n              padding: '12px 16px',\n              fontSize: '14px',\n              border: '1px solid #d1d5db',\n              borderRadius: '8px',\n              outline: 'none',\n              marginBottom: '12px',\n              boxSizing: 'border-box',\n              fontFamily: 'inherit',\n            }}\n          />\n\n          {error && (\n            <p style={{ \n              color: '#ef4444',\n              marginBottom: '12px',\n              fontSize: '13px',\n            }}>\n              {error}\n            </p>\n          )}\n\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            style={{\n              width: '100%',\n              padding: '12px 20px',\n              fontSize: '14px',\n              fontWeight: '600',\n              background: brandColor,\n              color: 'white',\n              border: 'none',\n              borderRadius: '8px',\n              cursor: isSubmitting ? 'not-allowed' : 'pointer',\n              opacity: isSubmitting ? 0.6 : 1,\n            }}\n          >\n            {isSubmitting ? t('waitlist.joining') : t('waitlist.joinWaitlist')}\n          </button>\n        </form>\n\n        {!app?.hideGrowthKitBranding && (\n          <a\n            href=\"https://growth.fenixblack.ai\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style={{\n              marginTop: '24px',\n              paddingTop: '16px',\n              borderTop: '1px solid #e5e7eb',\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              gap: '8px',\n              textDecoration: 'none',\n              transition: 'opacity 0.2s ease',\n              cursor: 'pointer',\n            }}\n            onMouseOver={(e) => e.currentTarget.style.opacity = '0.7'}\n            onMouseOut={(e) => e.currentTarget.style.opacity = '1'}\n          >\n            <img \n              src=\"https://growth.fenixblack.ai/growthkit-logo-alpha.png\"\n              alt=\"GrowthKit\"\n              style={{\n                height: '20px',\n                width: 'auto',\n              }}\n            />\n            <span style={{\n              color: '#9ca3af',\n              fontSize: '10px',\n              fontWeight: '500',\n            }}>\n              Powered by GrowthKit\n            </span>\n          </a>\n        )}\n      </div>\n    </div>\n  );\n\n  // Render based on layout\n  switch (layout) {\n    case 'split':\n      return renderSplitLayout();\n    case 'minimal':\n      return renderMinimalLayout();\n    case 'centered':\n    default:\n      return renderCenteredLayout();\n  }\n}\n","'use client';\n\nimport React, { useState, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport { useGrowthKit } from '../useGrowthKit';\nimport { useGrowthKitConfig } from './GrowthKitProvider';\nimport { useTranslation } from '../localization';\n\ninterface CreditExhaustionModalProps {\n  // No props needed - modal manages its own state\n}\n\nexport interface CreditExhaustionModalRef {\n  open: () => void;\n  close: () => void;\n  isOpen: () => boolean;\n}\n\nexport const CreditExhaustionModal = forwardRef<CreditExhaustionModalRef, CreditExhaustionModalProps>((props, ref) => {\n  const { \n    claimName, \n    claimEmail, \n    getReferralLink,\n    share,\n    hasClaimedName,\n    hasClaimedEmail,\n    hasVerifiedEmail,\n    credits,\n    creditsPaused,\n    policy\n  } = useGrowthKit();\n  \n  const { themeColors } = useGrowthKitConfig();\n  const { t } = useTranslation();\n  \n  const [isOpen, setIsOpen] = useState(false);\n  const [activeTab, setActiveTab] = useState(\n    !hasClaimedName ? 'name' : \n    !hasClaimedEmail ? 'email' : \n    'share'\n  );\n  const [loading, setLoading] = useState(false);\n\n  // Helper function to get available tabs\n  const getAvailableTabs = () => {\n    const tabs = [];\n    if (!hasClaimedName) tabs.push('name');\n    if (!hasClaimedEmail) tabs.push('email');\n    if (hasClaimedEmail && !hasVerifiedEmail) tabs.push('verify');\n    tabs.push('share'); // Always available\n    return tabs;\n  };\n\n  // Helper function to get next available tab\n  const getNextAvailableTab = (currentTab: string) => {\n    const availableTabs = getAvailableTabs();\n    const currentIndex = availableTabs.indexOf(currentTab);\n    \n    // If current tab is still available, keep it\n    if (currentIndex !== -1) return currentTab;\n    \n    // Otherwise return the first available tab\n    return availableTabs[0] || 'share';\n  };\n\n  // Expose imperative API\n  useImperativeHandle(ref, () => ({\n    open: () => setIsOpen(true),\n    close: () => setIsOpen(false),\n    isOpen: () => isOpen,\n  }));\n\n  // Update active tab when claims change\n  useEffect(() => {\n    setActiveTab(getNextAvailableTab(activeTab));\n  }, [hasClaimedName, hasClaimedEmail, hasVerifiedEmail]);\n\n  // Handle ESC key to close modal\n  useEffect(() => {\n    if (!isOpen) return;\n    \n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('keydown', handleEsc);\n    return () => document.removeEventListener('keydown', handleEsc);\n  }, [isOpen]);\n\n  // Handle click outside to close modal\n  const handleOverlayClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      setIsOpen(false);\n    }\n  };\n\n  // Don't render if not open\n  if (!isOpen) {\n    return null;\n  }\n\n  return (\n    <div style={{ ...styles.overlay, backgroundColor: themeColors.overlay }} onClick={handleOverlayClick}>\n      <div style={{ \n        ...styles.modal, \n        backgroundColor: themeColors.background, \n        boxShadow: themeColors.shadowLg,\n        border: `1px solid ${themeColors.borderLight}`\n      }}>\n        <h2 style={{ \n          ...styles.title, \n          background: themeColors.primaryGradient,\n          WebkitBackgroundClip: 'text',\n          WebkitTextFillColor: 'transparent',\n          backgroundClip: 'text',\n        }}>{t('modal.earnCredits')}</h2>\n        <p style={{ ...styles.subtitle, color: themeColors.textSecondary }}>\n          {creditsPaused \n            ? t('modal.creditsPausedMessage')\n            : t('modal.completeTasks')}\n        </p>\n\n        <div style={{ ...styles.tabs, borderBottomColor: themeColors.border }}>\n          {!hasClaimedName && (\n            <button \n              style={{\n                ...styles.tab, \n                color: activeTab === 'name' ? themeColors.primary : themeColors.textSecondary,\n                ...(activeTab === 'name' ? { \n                  ...styles.activeTab, \n                  borderBottomColor: themeColors.primary, \n                  background: `${themeColors.primary}10` \n                } : {})\n              }}\n              onClick={() => setActiveTab('name')}\n            >\n              {t('modal.nameTab')} {!creditsPaused && `(+${policy?.nameClaimCredits || 2})`}\n            </button>\n          )}\n          {!hasClaimedEmail && (\n            <button \n              style={{\n                ...styles.tab, \n                color: activeTab === 'email' ? themeColors.primary : themeColors.textSecondary,\n                ...(activeTab === 'email' ? { \n                  ...styles.activeTab, \n                  borderBottomColor: themeColors.primary, \n                  background: `${themeColors.primary}10` \n                } : {})\n              }}\n              onClick={() => setActiveTab('email')}\n            >\n              {t('modal.emailTab')} {!creditsPaused && `(+${policy?.emailClaimCredits || 2})`}\n            </button>\n          )}\n          {hasClaimedEmail && !hasVerifiedEmail && (\n            <button \n              style={{\n                ...styles.tab, \n                color: activeTab === 'verify' ? themeColors.primary : themeColors.textSecondary,\n                ...(activeTab === 'verify' ? { \n                  ...styles.activeTab, \n                  borderBottomColor: themeColors.primary, \n                  background: `${themeColors.primary}10` \n                } : {})\n              }}\n              onClick={() => setActiveTab('verify')}\n            >\n              {t('modal.verifyTab')} {!creditsPaused && `(+${policy?.emailVerifyCredits || 5})`}\n            </button>\n          )}\n          {!creditsPaused && (\n            <button \n              style={{\n                ...styles.tab, \n                color: activeTab === 'share' ? themeColors.primary : themeColors.textSecondary,\n                ...(activeTab === 'share' ? { \n                  ...styles.activeTab, \n                  borderBottomColor: themeColors.primary, \n                  background: `${themeColors.primary}10` \n                } : {})\n              }}\n              onClick={() => setActiveTab('share')}\n            >\n              {t('modal.shareTab')}\n            </button>\n          )}\n        </div>\n\n        <div style={styles.content}>\n          {activeTab === 'name' && !hasClaimedName && (\n            <NameTab \n              onClaim={claimName} \n              loading={loading} \n              setLoading={setLoading} \n              credits={policy?.nameClaimCredits || 2}\n              creditsPaused={creditsPaused}\n              onSuccess={() => setActiveTab(getNextAvailableTab('name'))}\n            />\n          )}\n          {activeTab === 'email' && !hasClaimedEmail && (\n            <EmailTab \n              onClaim={claimEmail} \n              loading={loading} \n              setLoading={setLoading} \n              credits={policy?.emailClaimCredits || 2}\n              creditsPaused={creditsPaused}\n              onSuccess={() => setActiveTab(getNextAvailableTab('email'))}\n            />\n          )}\n          {activeTab === 'verify' && hasClaimedEmail && !hasVerifiedEmail && (\n            <VerifyTab credits={policy?.emailVerifyCredits || 5} creditsPaused={creditsPaused} />\n          )}\n          {activeTab === 'share' && !creditsPaused && (\n            <ShareTab referralLink={getReferralLink()} onShare={share} referralCredits={policy?.referralCredits || 5} />\n          )}\n          {activeTab === 'share' && creditsPaused && (\n            <div style={{ textAlign: 'center', padding: '20px' }}>\n              <p>{t('modal.referralUnavailable')}</p>\n              <p style={{ fontSize: '14px', color: '#666', marginTop: '10px' }}>\n                {t('modal.newCreditsPaused')}\n              </p>\n            </div>\n          )}\n        </div>\n\n        <div style={{ ...styles.footer, borderTopColor: themeColors.border }}>\n          <div style={{ \n            backgroundColor: `${themeColors.primary}20`, \n            padding: '12px 16px',\n            borderRadius: '10px',\n            border: `2px solid ${themeColors.primary}40`,\n          }}>\n            <p style={{ \n              margin: 0, \n              fontSize: '14px', \n              fontWeight: '600', \n              color: themeColors.textSecondary \n            }}>\n              {t('modal.currentCredits')} <span style={{ color: themeColors.primary, fontWeight: '700' }}>{credits}</span>\n            </p>\n          </div>\n          <button \n            onClick={() => setIsOpen(false)} \n            style={{\n              ...styles.primaryButton,\n              background: themeColors.primaryGradient,\n              boxShadow: themeColors.shadow,\n              width: 'auto',\n              minWidth: '100px',\n              marginTop: 0,\n            }}\n            onMouseOver={(e) => {\n              e.currentTarget.style.transform = 'translateY(-1px)';\n              e.currentTarget.style.boxShadow = `0 20px 40px -5px ${themeColors.primary}80, 0 8px 16px -4px ${themeColors.primary}40`;\n            }}\n            onMouseOut={(e) => {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = themeColors.shadow;\n            }}\n          >\n            {t('modal.done')}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nCreditExhaustionModal.displayName = 'CreditExhaustionModal';\n\n// Tab Components\nfunction NameTab({ onClaim, loading, setLoading, credits, creditsPaused, onSuccess }: any) {\n  const { t } = useTranslation();\n  const { themeColors } = useGrowthKitConfig();\n  const [name, setName] = useState('');\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!name.trim()) return;\n    \n    setLoading(true);\n    const success = await onClaim(name);\n    setLoading(false);\n    \n    if (success) {\n      onSuccess();\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <h3 style={{ color: themeColors.text, fontSize: '20px', fontWeight: '700', marginBottom: '8px' }}>{t('modal.enterYourName')}</h3>\n      <p style={{ color: themeColors.textSecondary, fontSize: '15px', fontWeight: '500', lineHeight: '1.5' }}>\n        {creditsPaused ? t('modal.tellUsName') : t('modal.earnCreditsName', { credits })}\n      </p>\n      <input \n        type=\"text\"\n        value={name}\n        onChange={(e) => setName(e.target.value)}\n        placeholder={t('modal.yourName')}\n        style={{ \n          ...styles.input, \n          backgroundColor: themeColors.inputBackground,\n          borderColor: themeColors.inputBorder,\n          color: themeColors.text\n        }}\n        disabled={loading}\n        onFocus={(e) => {\n          e.currentTarget.style.borderColor = themeColors.borderFocus;\n          e.currentTarget.style.boxShadow = `0 0 0 3px ${themeColors.inputFocus}`;\n          e.currentTarget.style.backgroundColor = themeColors.background;\n        }}\n        onBlur={(e) => {\n          e.currentTarget.style.borderColor = themeColors.inputBorder;\n          e.currentTarget.style.boxShadow = 'none';\n          e.currentTarget.style.backgroundColor = themeColors.inputBackground;\n        }}\n      />\n      <button \n        type=\"submit\" \n        disabled={loading || !name.trim()}\n        style={{ ...styles.primaryButton, background: themeColors.primaryGradient, boxShadow: themeColors.shadow }}\n      >\n        {loading ? t('modal.claiming') : t('modal.claimCredits', { credits })}\n      </button>\n    </form>\n  );\n}\n\nfunction EmailTab({ onClaim, loading, setLoading, credits, creditsPaused, onSuccess }: any) {\n  const { t } = useTranslation();\n  const { themeColors } = useGrowthKitConfig();\n  const [email, setEmail] = useState('');\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!email.trim()) return;\n    \n    setLoading(true);\n    const success = await onClaim(email);\n    setLoading(false);\n    \n    if (success) {\n      onSuccess();\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <h3 style={{ color: themeColors.text, fontSize: '20px', fontWeight: '700', marginBottom: '8px' }}>{t('modal.enterYourEmail')}</h3>\n      <p style={{ color: themeColors.textSecondary, fontSize: '15px', fontWeight: '500', lineHeight: '1.5' }}>\n        {creditsPaused ? t('modal.provideEmail') : t('modal.earnCreditsEmail', { credits })}\n      </p>\n      <input \n        type=\"email\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n        placeholder={t('modal.yourEmail')}\n        style={{ \n          ...styles.input, \n          backgroundColor: themeColors.inputBackground,\n          borderColor: themeColors.inputBorder,\n          color: themeColors.text\n        }}\n        disabled={loading}\n        onFocus={(e) => {\n          e.currentTarget.style.borderColor = themeColors.borderFocus;\n          e.currentTarget.style.boxShadow = `0 0 0 3px ${themeColors.inputFocus}`;\n          e.currentTarget.style.backgroundColor = themeColors.background;\n        }}\n        onBlur={(e) => {\n          e.currentTarget.style.borderColor = themeColors.inputBorder;\n          e.currentTarget.style.boxShadow = 'none';\n          e.currentTarget.style.backgroundColor = themeColors.inputBackground;\n        }}\n      />\n      <button \n        type=\"submit\" \n        disabled={loading || !email.trim()}\n        style={{ ...styles.primaryButton, background: themeColors.primaryGradient, boxShadow: themeColors.shadow }}\n      >\n        {loading ? t('modal.claiming') : t('modal.claimCredits', { credits })}\n      </button>\n    </form>\n  );\n}\n\nfunction VerifyTab({ credits, creditsPaused }: any) {\n  const { t } = useTranslation();\n  const { themeColors } = useGrowthKitConfig();\n  \n  return (\n    <div>\n      <h3 style={{ color: themeColors.text, fontSize: '20px', fontWeight: '700', marginBottom: '12px' }}>{t('modal.verifyYourEmail')}</h3>\n      <p style={{ color: themeColors.textSecondary, fontSize: '16px', fontWeight: '500', lineHeight: '1.6', marginBottom: '16px' }}>{t('modal.checkInbox')}</p>\n      <div style={{ \n        backgroundColor: `${themeColors.primary}20`, \n        border: `2px solid ${themeColors.primary}40`, \n        borderRadius: '12px', \n        padding: '16px',\n        marginTop: '20px'\n      }}>\n        <p style={{ marginTop: 0, marginBottom: 0, fontSize: '14px', color: themeColors.textSecondary, fontWeight: '500' }}>\n          {creditsPaused \n            ? `✉️ ${t('modal.clickVerificationLink')}` \n            : `🎉 ${t('modal.earnVerificationCredits', { credits })}`}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nfunction ShareTab({ referralLink, onShare, referralCredits }: any) {\n  const { t } = useTranslation();\n  const { themeColors } = useGrowthKitConfig();\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(referralLink);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const handleShare = async () => {\n    await onShare({\n      title: 'Check out this app!',\n      text: 'Get free credits with my referral link!'\n    });\n  };\n\n  return (\n    <div>\n      <h3 style={{ color: themeColors.text, fontSize: '20px', fontWeight: '700', marginBottom: '12px' }}>{t('modal.shareAndEarn')}</h3>\n      <p style={{ color: themeColors.textSecondary, fontSize: '16px', fontWeight: '500', lineHeight: '1.6', marginBottom: '20px' }}>{t('modal.earnCreditsEachFriend')}</p>\n      \n      <div style={styles.referralBox}>\n        <input \n          type=\"text\" \n          value={referralLink} \n          readOnly \n          style={{\n            ...styles.input,\n            marginTop: 0,\n            marginBottom: 0,\n            flexGrow: 1,\n            cursor: 'pointer',\n            backgroundColor: themeColors.inputBackground,\n            borderColor: themeColors.inputBorder,\n            color: themeColors.text,\n          }}\n          onClick={(e) => (e.target as HTMLInputElement).select()}\n          onFocus={(e) => {\n            e.currentTarget.style.borderColor = themeColors.magenta;\n            e.currentTarget.style.boxShadow = `0 0 0 3px ${themeColors.magenta}20`;\n          }}\n          onBlur={(e) => {\n            e.currentTarget.style.borderColor = themeColors.inputBorder;\n            e.currentTarget.style.boxShadow = 'none';\n          }}\n        />\n        <button \n          onClick={handleCopy} \n          style={{\n            ...styles.secondaryButton,\n            backgroundColor: copied ? themeColors.success : themeColors.backgroundSecondary,\n            color: copied ? 'white' : themeColors.textSecondary,\n            borderColor: copied ? themeColors.success : themeColors.border,\n          }}\n        >\n          {copied ? t('modal.copied') : t('modal.copy')}\n        </button>\n      </div>\n      \n      {typeof navigator !== 'undefined' && 'share' in navigator && (\n        <button onClick={handleShare} style={{ ...styles.primaryButton, background: themeColors.primaryGradient, boxShadow: themeColors.shadow }}>\n          {t('modal.shareNow')}\n        </button>\n      )}\n      \n      <div style={{ \n        backgroundColor: `${themeColors.magenta}20`, \n        border: `2px solid ${themeColors.magenta}40`, \n        borderRadius: '12px', \n        padding: '16px',\n        marginTop: '20px'\n      }}>\n        <p style={{ marginTop: 0, marginBottom: 0, fontSize: '14px', color: themeColors.textSecondary, fontWeight: '600' }}>\n          💫 {t('modal.earnCreditsPerReferral', { credits: referralCredits })}\n        </p>\n      </div>\n    </div>\n  );\n}\n\n// Styles\nconst styles: Record<string, React.CSSProperties> = {\n  overlay: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backdropFilter: 'blur(8px)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 1000,\n    padding: '20px',\n  },\n  modal: {\n    padding: '32px',\n    borderRadius: '20px',\n    maxWidth: '520px',\n    width: '100%',\n    maxHeight: '90vh',\n    overflow: 'auto',\n    border: '1px solid', // Will be overridden by inline styles\n    fontFamily: 'Inter, system-ui, -apple-system, sans-serif',\n  },\n  title: {\n    margin: '0 0 8px 0',\n    fontSize: '28px',\n    fontWeight: '800',\n    letterSpacing: '-0.025em',\n  },\n  subtitle: {\n    margin: '0 0 24px 0',\n    fontSize: '16px',\n    fontWeight: '500',\n    lineHeight: '1.6',\n  },\n  tabs: {\n    display: 'flex',\n    gap: '8px',\n    marginBottom: '24px',\n    borderBottom: '2px solid',\n    padding: '0 4px',\n  },\n  tab: {\n    padding: '12px 16px',\n    border: 'none',\n    background: 'none',\n    cursor: 'pointer',\n    fontSize: '14px',\n    fontWeight: '600',\n    borderBottomWidth: '2px',\n    borderBottomStyle: 'solid',\n    borderBottomColor: 'transparent',\n    marginBottom: '-2px',\n    borderRadius: '8px 8px 0 0',\n    transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n  },\n  activeTab: {\n    borderBottomColor: 'inherit', // Will be overridden by inline styles\n  },\n  content: {\n    minHeight: '220px',\n    padding: '8px 4px',\n  },\n  input: {\n    width: '100%',\n    padding: '16px 20px',\n    border: '2px solid',\n    borderRadius: '12px',\n    marginTop: '16px',\n    marginBottom: '16px',\n    fontSize: '16px',\n    fontFamily: 'inherit',\n    fontWeight: '500',\n    transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n    outline: 'none',\n    boxSizing: 'border-box',\n  },\n  primaryButton: {\n    width: '100%',\n    padding: '16px 24px',\n    color: 'white',\n    border: 'none',\n    borderRadius: '12px',\n    fontSize: '16px',\n    fontWeight: '700',\n    cursor: 'pointer',\n    marginTop: '8px',\n    transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n    fontFamily: 'inherit',\n    letterSpacing: '0.025em',\n  },\n  secondaryButton: {\n    padding: '12px 24px',\n    border: '2px solid',\n    borderRadius: '10px',\n    fontSize: '15px',\n    fontWeight: '600',\n    cursor: 'pointer',\n    transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n    fontFamily: 'inherit',\n  },\n  footer: {\n    marginTop: '32px',\n    paddingTop: '20px',\n    borderTop: '2px solid',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    gap: '16px',\n  },\n  referralBox: {\n    display: 'flex',\n    gap: '8px',\n    marginTop: '16px',\n    marginBottom: '16px',\n  },\n};\n","'use client';\n\nimport React, { useState, useEffect, forwardRef, useImperativeHandle, useRef } from 'react';\nimport { GrowthKitProvider, useGrowthKitConfig } from './GrowthKitProvider';\nimport { useGrowthKit } from '../useGrowthKit';\nimport { WaitlistForm } from './WaitlistForm';\nimport { CreditExhaustionModal } from './CreditExhaustionModal';\nimport type { CreditExhaustionModalRef } from './CreditExhaustionModal';\nimport type { GrowthKitConfig, GrowthKitTheme } from '../types';\nimport { useTranslation } from '../localization';\nimport { GROWTHKIT_LOGO_ICON_BASE64 } from '../assets';\n\n// Helper function to get footer logo URL from config with theme support\nconst getFooterLogoUrl = (apiUrl?: string, isDark?: boolean, customUrl?: string): string => {\n  if (customUrl) return customUrl;\n  \n  const logoFileName = isDark ? 'growthkit-logo-dark-alpha-120px.png' : 'growthkit-logo-alpha-120px.png';\n  \n  if (apiUrl) {\n    // Remove /v1 or /api suffix and add logo file\n    const baseUrl = apiUrl.replace(/\\/v1$|\\/api$/, '');\n    return `${baseUrl}/${logoFileName}`;\n  }\n  \n  // Fallback for development or when no apiUrl is provided\n  return `https://growth.fenixblack.ai/${logoFileName}`;\n};\n\ninterface GrowthKitAccountWidgetProps {\n  config: GrowthKitConfig;\n  children: React.ReactNode;\n  position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right' | 'inline';\n  theme?: GrowthKitTheme;\n  slim?: boolean;\n  slim_labels?: boolean;\n  showName?: boolean;\n  showEmail?: boolean;\n  showCredits?: boolean;\n  showLogo?: boolean;\n  footerLogoUrl?: string;\n  autoOpenCreditModal?: boolean;\n  onCreditsChange?: (credits: number) => void;\n  onProfileChange?: (profile: { name?: string; email?: string; verified?: boolean }) => void;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nexport interface GrowthKitAccountWidgetRef {\n  openEarnCreditsModal: () => void;\n  refresh: () => Promise<void>;\n  getCurrentBalance: () => number;\n  getProfile: () => { name?: string; email?: string; verified?: boolean };\n  setLanguage: (language: 'en' | 'es') => void;\n}\n\n// Internal widget component that uses the context\nconst AccountWidgetInternal = forwardRef<\n  GrowthKitAccountWidgetRef,\n  Omit<GrowthKitAccountWidgetProps, 'config' | 'theme'>\n>(({\n  children,\n  position = 'top-right',\n  slim = false,\n  slim_labels = true,\n  showName = true,\n  showEmail = true,\n  showCredits = true,\n  showLogo = true,\n  footerLogoUrl,\n  autoOpenCreditModal = true,\n  onCreditsChange,\n  onProfileChange,\n  className,\n  style,\n}, ref) => {\n  const {\n    loading,\n    initialized,\n    error,\n    credits,\n    creditsPaused,\n    shouldShowWaitlist,\n    waitlistEnabled,\n    name,\n    email,\n    hasClaimedName,\n    hasClaimedEmail,\n    hasVerifiedEmail,\n    refresh,\n  } = useGrowthKit();\n\n  const { t } = useTranslation();\n  const { config, setLanguage, themeColors, effectiveTheme } = useGrowthKitConfig();\n\n  // Generate footer logo URL from config with theme support\n  const finalFooterLogoUrl = getFooterLogoUrl(config.apiUrl, effectiveTheme === 'dark', footerLogoUrl);\n\n  const creditModalRef = useRef<CreditExhaustionModalRef>(null);\n  const [showProfileExpanded, setShowProfileExpanded] = useState(false);\n  const [prevCredits, setPrevCredits] = useState(credits);\n  const [notification, setNotification] = useState<{message: string, type: 'success' | 'error'} | null>(null);\n\n  // Track credits changes\n  useEffect(() => {\n    if (credits !== prevCredits) {\n      onCreditsChange?.(credits);\n      setPrevCredits(credits);\n    }\n  }, [credits, prevCredits, onCreditsChange]);\n\n  // Track profile changes\n  useEffect(() => {\n    onProfileChange?.({\n      name: name || undefined,\n      email: email || undefined,\n      verified: hasVerifiedEmail,\n    });\n  }, [name, email, hasVerifiedEmail, onProfileChange]);\n\n  // Auto-open credit modal when needed\n  useEffect(() => {\n    if (autoOpenCreditModal && credits === 0 && !loading && !waitlistEnabled) {\n      creditModalRef.current?.open();\n    }\n  }, [credits, loading, waitlistEnabled, autoOpenCreditModal]);\n\n  // Handle email verification feedback from URL\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    \n    if (params.get('verified') === 'true') {\n      showNotification(t('widget.emailVerifiedSuccess'), 'success');\n      refresh();\n      cleanupUrl();\n    } else if (params.get('verified') === 'false') {\n      const error = params.get('error');\n      const message = error === 'missing-token' \n        ? t('widget.noVerificationToken')\n        : t('widget.verificationFailed');\n      showNotification(message, 'error');\n      cleanupUrl();\n    }\n  }, [refresh]);\n\n  // Show notification helper\n  const showNotification = (message: string, type: 'success' | 'error') => {\n    setNotification({ message, type });\n    setTimeout(() => setNotification(null), 4000);\n  };\n\n  // Clean up URL parameters\n  const cleanupUrl = () => {\n    if (typeof window !== 'undefined' && window.history?.replaceState) {\n      window.history.replaceState({}, '', window.location.pathname);\n    }\n  };\n\n  // Expose imperative API\n  useImperativeHandle(ref, () => ({\n    openEarnCreditsModal: () => creditModalRef.current?.open(),\n    refresh,\n    getCurrentBalance: () => credits,\n    getProfile: () => ({\n      name: name || undefined,\n      email: email || undefined,\n      verified: hasVerifiedEmail,\n    }),\n    setLanguage: setLanguage || (() => {}),\n  }));\n\n  // Use centralized theme colors from context\n\n  // Show loading state\n  if (loading || !initialized) {\n    const loadingWidget = (\n      <div style={{ ...getWidgetStyles(themeColors, slim), ...style }} className={className}>\n        <div style={styles.loading}>\n          <div style={{ ...styles.spinner, borderTopColor: themeColors.primary }} />\n          <span style={{ ...styles.loadingText, color: themeColors.textSecondary }}>{t('widget.loading')}</span>\n        </div>\n      </div>\n    );\n\n    return (\n      <>\n        {position !== 'inline' ? (\n          <div style={getPositionStyles(position, slim)}>\n            {loadingWidget}\n          </div>\n        ) : loadingWidget}\n      </>\n    );\n  }\n\n  // Show error state with minimal widget (when initialized but with error)\n  if (error && initialized) {\n    const errorWidget = (\n      <div style={{ ...getWidgetStyles(themeColors, slim), ...style }} className={className}>\n        <div style={styles.errorState}>\n          <div style={{\n            ...styles.errorIcon,\n            backgroundColor: themeColors.warning + '20',\n            color: themeColors.warning,\n          }}>⚠</div>\n          <span style={{ ...styles.errorText, color: themeColors.textSecondary }}>\n            {slim ? t('widget.errorMinimal') : t('widget.errorOffline')}\n          </span>\n          {!slim && (\n            <button\n              style={{\n                ...styles.retryButton,\n                background: themeColors.primaryGradient,\n                boxShadow: themeColors.shadowSm,\n              }}\n              onClick={async (e) => {\n                e.stopPropagation();\n                await refresh();\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.transform = 'translateY(-1px)';\n                e.currentTarget.style.boxShadow = themeColors.shadow;\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.transform = 'translateY(0)';\n                e.currentTarget.style.boxShadow = themeColors.shadowSm;\n              }}\n            >\n              {t('widget.retry')}\n            </button>\n          )}\n        </div>\n      </div>\n    );\n\n    return (\n      <>\n        {children}\n        {position !== 'inline' ? (\n          <div style={getPositionStyles(position, slim)}>\n            {errorWidget}\n          </div>\n        ) : errorWidget}\n      </>\n    );\n  }\n\n  // Show waitlist if required\n  if (shouldShowWaitlist) {\n    const waitlistWidget = (\n      <div style={{ ...getWidgetStyles(themeColors, slim), ...style }} className={className}>\n        <div style={styles.waitlistWidget}>\n          <span style={{ ...styles.waitlistIcon, backgroundColor: `${themeColors.warning}20`, color: themeColors.warning }}>⏳</span>\n          <span style={{ ...styles.waitlistText, color: themeColors.text }}>{t('widget.waitlistActive')}</span>\n        </div>\n      </div>\n    );\n\n    return (\n      <>\n        <WaitlistForm />\n        {position !== 'inline' ? (\n          <div style={getPositionStyles(position, slim)}>\n            {waitlistWidget}\n          </div>\n        ) : waitlistWidget}\n      </>\n    );\n  }\n\n  // Main widget content\n  const mainWidget = (\n    <div \n      style={{ \n        ...getWidgetStyles(themeColors, slim), \n        ...style,\n        cursor: slim ? 'pointer' : 'default',\n        position: position === 'inline' ? 'relative' : 'relative',\n      }} \n      className={className}\n      onClick={() => slim && setShowProfileExpanded(!showProfileExpanded)}\n      onMouseEnter={() => setShowProfileExpanded(true)}\n      onMouseLeave={() => setShowProfileExpanded(false)}\n    >\n      {/* Compact View */}\n      <div style={slim ? styles.slimContent : styles.compactContent}>\n        {/* GrowthKit Logo - only show in non-slim mode when showLogo is true */}\n        {!slim && showLogo && (\n          <img \n            src={GROWTHKIT_LOGO_ICON_BASE64}\n            alt=\"GrowthKit\"\n            style={styles.logo}\n          />\n        )}\n        \n        {showCredits && (\n          <div style={slim ? styles.slimCreditsSection : styles.creditsSection}>\n            <div style={{\n              ...(slim ? styles.slimCreditsIcon : styles.creditsIcon),\n              background: themeColors.primaryGradient,\n              WebkitBackgroundClip: 'text',\n              WebkitTextFillColor: 'transparent',\n              backgroundClip: 'text',\n            }}>●</div>\n            <span style={{ ...(slim ? styles.slimCreditsValue : styles.creditsValue), color: themeColors.text }}>{credits}</span>\n            {(!slim || slim_labels) && <span style={{ ...styles.creditsLabel, color: themeColors.textSecondary }}>{t('widget.credits')}</span>}\n            {creditsPaused && (\n              <div \n                style={{\n                  ...(slim ? styles.slimPausedIcon : styles.pausedIcon),\n                  backgroundColor: themeColors.warning + '20',\n                  color: themeColors.warning,\n                }} \n                title={t('widget.creditsPausedTooltip')}\n              >\n                ⏸\n              </div>\n            )}\n          </div>\n        )}\n        \n{(showName || showEmail) && (!slim || slim_labels) && (\n          <div style={styles.profileSection}>\n            <div style={{\n              ...styles.profileIcon,\n              backgroundColor: themeColors.accent + '20',\n              color: themeColors.accent,\n            }}>●</div>\n            {showName && name && (\n              <span style={{ ...styles.profileText, color: themeColors.textSecondary }}>{name}</span>\n            )}\n            {showEmail && hasClaimedEmail && (\n              <>\n                {hasVerifiedEmail ? (\n                  <div style={{\n                    ...styles.verifiedBadge,\n                    backgroundColor: themeColors.success + '20',\n                    color: themeColors.success,\n                  }}>✓</div>\n                ) : (\n                  <div style={{\n                    ...styles.unverifiedBadge,\n                    backgroundColor: themeColors.warning + '20',\n                    color: themeColors.warning,\n                  }}>!</div>\n                )}\n              </>\n            )}\n          </div>\n        )}\n        \n        {/* Show verification badge in slim mode when labels are hidden, but only next to credits */}\n        {slim && !slim_labels && showEmail && hasClaimedEmail && hasVerifiedEmail && (\n          <div style={{\n            ...styles.slimVerifiedBadge,\n            backgroundColor: themeColors.success + '20',\n            color: themeColors.success,\n          }}>✓</div>\n        )}\n\n{credits === 0 && (!slim || slim_labels) && (\n          <button\n            style={{ \n              ...styles.earnButton, \n              background: themeColors.primaryGradient,\n              boxShadow: themeColors.shadowSm,\n            }}\n            onClick={(e) => {\n              e.stopPropagation();\n              creditModalRef.current?.open();\n            }}\n            onMouseOver={(e) => {\n              e.currentTarget.style.transform = 'translateY(-1px)';\n              e.currentTarget.style.boxShadow = themeColors.shadow;\n            }}\n            onMouseOut={(e) => {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = themeColors.shadowSm;\n            }}\n          >\n            {t('widget.earnCredits')}\n          </button>\n        )}\n        \n        {/* Slim mode: show a tiny earn button when credits are 0 and labels are hidden */}\n        {credits === 0 && slim && !slim_labels && (\n          <button\n            style={{ \n              ...styles.slimEarnButton, \n              background: themeColors.primaryGradient,\n              boxShadow: themeColors.shadowSm,\n            }}\n            onClick={(e) => {\n              e.stopPropagation();\n              creditModalRef.current?.open();\n            }}\n            onMouseOver={(e) => {\n              e.currentTarget.style.transform = 'translateY(-1px)';\n              e.currentTarget.style.boxShadow = themeColors.shadow;\n            }}\n            onMouseOut={(e) => {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = themeColors.shadowSm;\n            }}\n            title={t('widget.earnCredits')}\n          >\n            +\n          </button>\n        )}\n      </div>\n\n      {/* Expanded View (on hover/click) */}\n      {showProfileExpanded && (\n        <div style={{ \n          ...getExpandedContentStyles(position, slim), \n          backgroundColor: themeColors.background,\n          borderColor: themeColors.border,\n          boxShadow: themeColors.shadow,\n        }}>\n          <div style={styles.expandedSection}>\n            <h4 style={{ ...styles.expandedTitle, color: themeColors.textSecondary }}>{t('widget.account')}</h4>\n            \n            {showName && (name || !slim) && (\n              <div style={styles.expandedRow}>\n                <span style={{ ...styles.expandedLabel, color: themeColors.textSecondary }}>{t('widget.name')}</span>\n                <span style={{ ...styles.expandedValue, color: themeColors.text }}>\n                  {name || t('widget.notSet')}\n                </span>\n              </div>\n            )}\n            \n            {showEmail && (email || !slim) && (\n              <div style={styles.expandedRow}>\n                <span style={{ ...styles.expandedLabel, color: themeColors.textSecondary }}>{t('widget.email')}</span>\n                <span style={{ ...styles.expandedValue, color: themeColors.text }}>\n                  {email ? (\n                    <span style={styles.expandedEmailStatus}>\n                      {email} {hasVerifiedEmail && <span style={styles.verifiedBadge}>✅</span>}\n                    </span>\n                  ) : (\n                    t('widget.notSet')\n                  )}\n                </span>\n              </div>\n            )}\n            \n            <div style={styles.expandedRow}>\n              <span style={{ ...styles.expandedLabel, color: themeColors.textSecondary }}>{t('widget.creditsLabel')}</span>\n              <span style={{ ...styles.expandedValue, color: themeColors.text }}>{credits}</span>\n            </div>\n          </div>\n\n          <button\n            style={{ \n              ...styles.expandedEarnButton, \n              background: themeColors.primaryGradient,\n              boxShadow: themeColors.shadowSm,\n            }}\n            onClick={(e) => {\n              e.stopPropagation();\n              creditModalRef.current?.open();\n              setShowProfileExpanded(false);\n            }}\n            onMouseOver={(e) => {\n              e.currentTarget.style.transform = 'translateY(-1px)';\n              e.currentTarget.style.boxShadow = themeColors.shadow;\n            }}\n            onMouseOut={(e) => {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = themeColors.shadowSm;\n            }}\n          >\n            {t('widget.earnMoreCredits')}\n          </button>\n\n          {/* Branded Footer */}\n          <div style={{\n            ...styles.brandedFooter,\n            borderTopColor: themeColors.border,\n          }}>\n            <a\n              href=\"https://growth.fenixblack.ai\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              style={styles.footerLink}\n              onClick={(e) => {\n                e.stopPropagation();\n              }}\n              onMouseOver={(e) => {\n                // Add subtle hover effect to the text\n                const text = e.currentTarget.querySelector('span');\n                if (text) {\n                  text.style.color = themeColors.text;\n                  text.style.opacity = '1';\n                }\n              }}\n              onMouseOut={(e) => {\n                // Reset text color\n                const text = e.currentTarget.querySelector('span');\n                if (text) {\n                  text.style.color = themeColors.textSecondary;\n                  text.style.opacity = '0.8';\n                }\n              }}\n            >\n              <img \n                src={finalFooterLogoUrl}\n                alt=\"Powered by GrowthKit\"\n                style={styles.footerLogo}\n                onMouseOver={(e) => {\n                  e.currentTarget.style.opacity = '1';\n                  e.currentTarget.style.transform = 'scale(1.05)';\n                }}\n                onMouseOut={(e) => {\n                  e.currentTarget.style.opacity = '0.8';\n                  e.currentTarget.style.transform = 'scale(1)';\n                }}\n                onError={(e) => {\n                  // Fallback to a simple text if image fails to load\n                  e.currentTarget.style.display = 'none';\n                }}\n              />\n              <span style={{ ...styles.footerText, color: themeColors.textSecondary }}>\n                Powered by GrowthKit\n              </span>\n            </a>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  return (\n    <>\n      {/* Render widget */}\n      {position === 'inline' ? (\n        mainWidget\n      ) : (\n        <div style={getPositionStyles(position, slim)}>\n          {mainWidget}\n        </div>\n      )}\n\n      {/* Render children (app content) */}\n      {children}\n\n      {/* Credit modal */}\n      <CreditExhaustionModal ref={creditModalRef} />\n\n      {/* Internal notifications */}\n      {notification && (\n        <div style={{\n          ...getPositionStyles(position === 'inline' ? 'top-right' : position),\n          ...getNotificationStyles(themeColors, notification.type),\n          ...(position === 'inline' ? { position: 'absolute', top: '-60px' } : { marginTop: '10px' })\n        }}>\n          <span>{notification.message}</span>\n          <button \n            onClick={() => setNotification(null)}\n            style={styles.notificationClose}\n          >\n            ×\n          </button>\n        </div>\n      )}\n    </>\n  );\n});\n\nAccountWidgetInternal.displayName = 'AccountWidgetInternal';\n\n// Main exported component with Provider wrapper\nexport const GrowthKitAccountWidget = forwardRef<\n  GrowthKitAccountWidgetRef,\n  GrowthKitAccountWidgetProps\n>(({ config, theme, children, ...props }, ref) => {\n  // If theme prop is provided, it overrides config.theme\n  const effectiveConfig = theme ? { ...config, theme } : config;\n  \n  return (\n    <GrowthKitProvider config={effectiveConfig}>\n      <AccountWidgetInternal {...props} ref={ref}>\n        {children}\n      </AccountWidgetInternal>\n    </GrowthKitProvider>\n  );\n});\n\nGrowthKitAccountWidget.displayName = 'GrowthKitAccountWidget';\n\n// Helper functions\nfunction getPositionStyles(position: string, slim: boolean = false): React.CSSProperties {\n  const baseStyles: React.CSSProperties = {\n    position: 'fixed',\n    zIndex: 1000,\n  };\n\n  const margin = slim ? 10 : 20;\n\n  switch (position) {\n    case 'top-left':\n      return { ...baseStyles, top: margin, left: margin };\n    case 'top-right':\n      return { ...baseStyles, top: margin, right: margin };\n    case 'bottom-left':\n      return { ...baseStyles, bottom: margin, left: margin };\n    case 'bottom-right':\n      return { ...baseStyles, bottom: margin, right: margin };\n    default:\n      return baseStyles;\n  }\n}\n\n\nfunction getWidgetStyles(themeColors: any, slim: boolean): React.CSSProperties {\n  return {\n    backgroundColor: themeColors.background,\n    color: themeColors.text,\n    border: `1px solid ${themeColors.border}`,\n    borderRadius: slim ? '20px' : '16px',\n    padding: slim ? '4px 8px' : '16px 20px',\n    boxShadow: slim ? themeColors.shadowSm : themeColors.shadow,\n    fontSize: slim ? '12px' : '16px',\n    fontFamily: 'Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n    fontWeight: '500',\n    transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n    minWidth: slim ? 'auto' : '200px',\n    backdropFilter: 'blur(8px)',\n  };\n}\n\nfunction getNotificationStyles(themeColors: any, type: 'success' | 'error'): React.CSSProperties {\n  return {\n    background: type === 'success' \n      ? 'linear-gradient(135deg, #10b981 0%, #14b8a6 100%)' \n      : 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',\n    color: 'white',\n    padding: '12px 16px',\n    borderRadius: '12px',\n    fontSize: '14px',\n    fontWeight: '500',\n    boxShadow: themeColors.shadow,\n    display: 'flex',\n    alignItems: 'center',\n    gap: '10px',\n    zIndex: 1002,\n    border: 'none',\n    backdropFilter: 'blur(8px)',\n  };\n}\n\nfunction getExpandedContentStyles(position: string, slim: boolean): React.CSSProperties {\n  const baseStyles: React.CSSProperties = {\n    position: 'absolute',\n    borderTop: 'none',\n    borderRadius: '0 0 16px 16px',\n    padding: '16px 20px',\n    marginTop: '2px',\n    zIndex: 1001,\n    backdropFilter: 'blur(8px)',\n    minWidth: '200px',\n  };\n\n  // In slim mode, adjust positioning to prevent going off-screen\n  if (slim) {\n    const isRightSide = position.includes('right');\n    const isBottomSide = position.includes('bottom');\n    \n    if (isRightSide) {\n      // For right-side positions, make sure content doesn't overflow right\n      return {\n        ...baseStyles,\n        left: 'auto',\n        right: 0,\n        top: isBottomSide ? 'auto' : '100%',\n        bottom: isBottomSide ? '100%' : 'auto',\n        borderRadius: isBottomSide ? '16px 16px 0 0' : '0 0 16px 16px',\n        marginTop: isBottomSide ? 0 : '2px',\n        marginBottom: isBottomSide ? '2px' : 0,\n      };\n    } else {\n      // For left-side positions, anchor to left\n      return {\n        ...baseStyles,\n        left: 0,\n        right: 'auto',\n        top: isBottomSide ? 'auto' : '100%',\n        bottom: isBottomSide ? '100%' : 'auto',\n        borderRadius: isBottomSide ? '16px 16px 0 0' : '0 0 16px 16px',\n        marginTop: isBottomSide ? 0 : '2px',\n        marginBottom: isBottomSide ? '2px' : 0,\n      };\n    }\n  }\n\n  // Normal mode - dropdown below\n  return {\n    ...baseStyles,\n    top: '100%',\n    left: 0,\n    right: 0,\n  };\n}\n\n// Styles object\nconst styles: Record<string, React.CSSProperties> = {\n  loading: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '12px',\n  },\n  spinner: {\n    width: '20px',\n    height: '20px',\n    border: '2px solid #e2e8f0',\n    borderTop: '2px solid #10b981',\n    borderRadius: '50%',\n    animation: 'spin 1s linear infinite',\n  },\n  loadingText: {\n    fontSize: '14px',\n    fontWeight: '500',\n  },\n  errorState: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '12px',\n    flexWrap: 'wrap',\n  },\n  errorIcon: {\n    fontSize: '16px',\n    width: '24px',\n    height: '24px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: '6px',\n    fontWeight: '600',\n  },\n  errorText: {\n    fontSize: '14px',\n    fontWeight: '500',\n    flex: 1,\n    minWidth: '120px',\n  },\n  retryButton: {\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    padding: '6px 12px',\n    fontSize: '12px',\n    fontWeight: '600',\n    cursor: 'pointer',\n    transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n    letterSpacing: '0.025em',\n  },\n  waitlistWidget: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '12px',\n  },\n  waitlistIcon: {\n    fontSize: '20px',\n    width: '24px',\n    height: '24px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: '6px',\n  },\n  waitlistText: {\n    fontSize: '14px',\n    fontWeight: '600',\n  },\n  compactContent: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '16px',\n    flexWrap: 'wrap',\n  },\n  slimContent: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '6px',\n    flexWrap: 'nowrap',\n  },\n  logo: {\n    width: '40px',\n    height: '40px',\n    flexShrink: 0,\n    opacity: 0.8,\n    transition: 'opacity 0.2s ease',\n  },\n  creditsSection: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '8px',\n  },\n  slimCreditsSection: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '4px',\n  },\n  creditsIcon: {\n    fontSize: '12px',\n    fontWeight: '900',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  slimCreditsIcon: {\n    fontSize: '8px',\n    fontWeight: '900',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  creditsValue: {\n    fontWeight: '700',\n    fontSize: '18px',\n  },\n  slimCreditsValue: {\n    fontWeight: '700',\n    fontSize: '14px',\n  },\n  creditsLabel: {\n    fontSize: '13px',\n    fontWeight: '500',\n  },\n  pausedIcon: {\n    fontSize: '12px',\n    width: '20px',\n    height: '20px',\n    borderRadius: '4px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    cursor: 'help',\n    fontWeight: '600',\n  },\n  slimPausedIcon: {\n    fontSize: '8px',\n    width: '14px',\n    height: '14px',\n    borderRadius: '3px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    cursor: 'help',\n    fontWeight: '600',\n  },\n  profileSection: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '8px',\n  },\n  profileIcon: {\n    fontSize: '8px',\n    width: '16px',\n    height: '16px',\n    borderRadius: '50%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontWeight: '900',\n  },\n  profileText: {\n    fontSize: '14px',\n    fontWeight: '500',\n  },\n  verifiedBadge: {\n    fontSize: '10px',\n    fontWeight: '700',\n    width: '16px',\n    height: '16px',\n    borderRadius: '50%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  unverifiedBadge: {\n    fontSize: '10px',\n    fontWeight: '700',\n    width: '16px',\n    height: '16px',\n    borderRadius: '50%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  slimVerifiedBadge: {\n    fontSize: '8px',\n    fontWeight: '700',\n    width: '12px',\n    height: '12px',\n    borderRadius: '50%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  earnButton: {\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    padding: '8px 16px',\n    fontSize: '13px',\n    fontWeight: '600',\n    cursor: 'pointer',\n    transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n    letterSpacing: '0.025em',\n  },\n  slimEarnButton: {\n    color: 'white',\n    border: 'none',\n    borderRadius: '50%',\n    width: '20px',\n    height: '20px',\n    fontSize: '12px',\n    fontWeight: '700',\n    cursor: 'pointer',\n    transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: '0',\n  },\n  expandedContent: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    borderTop: 'none',\n    borderRadius: '0 0 16px 16px',\n    padding: '16px 20px',\n    marginTop: '2px',\n    zIndex: 1001,\n    backdropFilter: 'blur(8px)',\n  },\n  expandedSection: {\n    marginBottom: '12px',\n  },\n  expandedTitle: {\n    margin: '0 0 8px 0',\n    fontSize: '14px',\n    fontWeight: '600',\n  },\n  expandedRow: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: '6px',\n  },\n  expandedLabel: {\n    fontSize: '14px',\n  },\n  expandedValue: {\n    fontSize: '14px',\n    fontWeight: '500',\n  },\n  expandedEmailStatus: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '4px',\n  },\n  expandedEarnButton: {\n    width: '100%',\n    color: 'white',\n    border: 'none',\n    borderRadius: '10px',\n    padding: '12px 20px',\n    fontSize: '14px',\n    fontWeight: '600',\n    cursor: 'pointer',\n    transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n    letterSpacing: '0.025em',\n  },\n  notificationClose: {\n    background: 'rgba(255, 255, 255, 0.2)',\n    border: 'none',\n    color: 'white',\n    width: '20px',\n    height: '20px',\n    borderRadius: '50%',\n    cursor: 'pointer',\n    fontSize: '14px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  brandedFooter: {\n    borderTop: '1px solid',\n    paddingTop: '12px',\n    marginTop: '16px',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    gap: '6px',\n  },\n  footerLink: {\n    textDecoration: 'none',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    gap: '6px',\n    cursor: 'pointer',\n    transition: 'all 0.2s ease',\n  },\n  footerLogo: {\n    height: '28px',\n    width: 'auto',\n    opacity: 0.8,\n    transition: 'opacity 0.2s ease, transform 0.2s ease',\n    maxWidth: '120px',\n  },\n  footerText: {\n    fontSize: '11px',\n    fontWeight: '400',\n    textAlign: 'center',\n    opacity: 0.8,\n  },\n};\n\n// Add CSS animation for spinner (only in browser)\nif (typeof document !== 'undefined' && !document.getElementById('growthkit-spinner-styles')) {\n  const spinnerStyle = document.createElement('style');\n  spinnerStyle.id = 'growthkit-spinner-styles';\n  spinnerStyle.textContent = `\n    @keyframes spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n  `;\n  document.head.appendChild(spinnerStyle);\n}","/**\n * Static assets for GrowthKit SDK\n * Embedded as base64 to ensure they're always available\n */\n\nexport const GROWTHKIT_LOGO_ICON_BASE64 = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAACDElEQVRIDe1Qz2sTQRR+M/szm2yVloKgELyUxranBq0eRb0rTUFQKNpb/wHRSxC8iAqCHioIgmgxKnoRT1It4qmWFq1YFRGhYhqr2TRNZvNmZ0wPgWXoJpF6UTqXed+8733fmw9g6/yzCZzzxoYyMqO1+oDeiqD2c3XRqeLui2Uhh5P57Xvq/TWVE8Z/ZJCRWfNegU50uPYo98Sy7kvz7xlIICtf3UuOGxsteRTMmvzuFmg5vO1Gdds/OPDhRpqZ2rj4qYF04oA19mAyfRI3Eg2/0TBoVle5O4Cyi/rQCaUiXajXV9f5Bz8/Sw7OzBhRs5EG++dyOwfnn+xrDAbc+YboAmPWMgZWZrUqtL2L05crnD61E8xu8NQ7MqI1Ht/FNXu6b/b5Q8r88526+bJQhiWC5BSTHTHdMV7pZqJXrJbe9AwsVVThBo40ENz6EvhmhSYSxwMdj+R/1MYtIxjh6P4ShvECUe8OyhoQZjy6T0aChqB6R0b0duhQvj78WFRtEMzqEsS9jSWHc988AWRbt6w5IFZqU7ZHr6iiYRxpsE4iqJ+VRT4HQRwkOgYG9gXwjX7JTJAe3oqje/T14bQXFlRroj6ouC+3sAMteh202DHpV4oawifQyeT74VTTzVWdpjgLWdp7d/FMz52Pfv/N+dNNyZtppibejaWuzSY3o9HGrGwZaxsiW5T/KYHfjWfJJrEJnEEAAAAASUVORK5CYII=\";\n\n/**\n * Logo component as React element\n * @param size - Size in pixels (both width and height)\n * @param className - Optional CSS class\n * @param style - Optional CSS styles\n */\nexport interface LogoProps {\n  size?: number;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\n","// This file is Edge Runtime compatible - no React imports\nimport type { NextRequest, NextFetchEvent } from 'next/server';\n\n// We need to use dynamic imports to avoid importing Next.js at module evaluation time\nlet NextResponse: any;\n\nexport interface GrowthKitMiddlewareConfig {\n  apiKey: string;\n  apiUrl: string;\n  referralPath?: string;\n  redirectTo?: string;\n  debug?: boolean;\n}\n\nexport function createGrowthKitMiddleware(config: GrowthKitMiddlewareConfig) {\n  const referralPath = config.referralPath || '/r';\n  const redirectTo = config.redirectTo || '/';\n  \n  return async function growthKitMiddleware(\n    request: NextRequest,\n    event?: NextFetchEvent\n  ): Promise<any> {\n    // Dynamically import NextResponse to avoid module evaluation issues\n    if (!NextResponse) {\n      const nextServer = await import('next/server');\n      NextResponse = nextServer.NextResponse;\n    }\n    \n    const pathname = request.nextUrl.pathname;\n    \n    // Handle API proxy requests\n    if (pathname.startsWith('/api/growthkit/')) {\n      const apiPath = pathname.replace('/api/growthkit', '');\n      \n      if (config.debug) {\n        console.log('[GrowthKit] Proxying API request to:', apiPath);\n      }\n\n      try {\n        // Build the target URL\n        const targetUrl = `${config.apiUrl}${apiPath}`;\n        \n        // Prepare headers for the proxied request\n        const headers: Record<string, string> = {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${config.apiKey}`,\n        };\n\n        // Forward specific headers from the original request\n        const forwardHeaders = ['X-Fingerprint', 'User-Agent', 'Accept-Language'];\n        forwardHeaders.forEach(headerName => {\n          const value = request.headers.get(headerName);\n          if (value) {\n            headers[headerName] = value;\n          }\n        });\n\n        // Prepare the request body\n        let body: string | undefined;\n        if (request.method !== 'GET' && request.method !== 'HEAD') {\n          body = await request.text();\n        }\n\n        // Make the proxied request\n        const response = await fetch(targetUrl, {\n          method: request.method,\n          headers,\n          body,\n        });\n\n        // Get the response data\n        const data = await response.text();\n        \n        if (config.debug) {\n          console.log('[GrowthKit] Proxy response status:', response.status);\n        }\n\n        // Create the response with the same status and headers\n        const proxyResponse = NextResponse.next();\n        \n        // Clear the response and set new content\n        const finalResponse = new NextResponse(data, {\n          status: response.status,\n          statusText: response.statusText,\n        });\n\n        // Forward relevant response headers\n        const responseHeaders = ['Content-Type'];\n        responseHeaders.forEach(headerName => {\n          const value = response.headers.get(headerName);\n          if (value) {\n            finalResponse.headers.set(headerName, value);\n          }\n        });\n\n        // Add CORS headers for browser requests\n        finalResponse.headers.set('Access-Control-Allow-Origin', '*');\n        finalResponse.headers.set('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\n        finalResponse.headers.set('Access-Control-Allow-Headers', 'Content-Type, Authorization, X-Fingerprint');\n\n        return finalResponse;\n\n      } catch (error) {\n        if (config.debug) {\n          console.error('[GrowthKit] Proxy error:', error);\n        }\n        \n        return new NextResponse(\n          JSON.stringify({ \n            error: 'Proxy request failed',\n            message: error instanceof Error ? error.message : 'Unknown error'\n          }),\n          { \n            status: 500,\n            headers: { 'Content-Type': 'application/json' }\n          }\n        );\n      }\n    }\n    \n    // Handle email verification\n    if (pathname === '/verify') {\n      const token = request.nextUrl.searchParams.get('token');\n      \n      if (!token) {\n        if (config.debug) {\n          console.warn('[GrowthKit] Missing verification token');\n        }\n        const redirectUrl = new URL(redirectTo, request.url);\n        redirectUrl.searchParams.set('verified', 'false');\n        redirectUrl.searchParams.set('error', 'missing-token');\n        return NextResponse.redirect(redirectUrl);\n      }\n      \n      if (config.debug) {\n        console.log('[GrowthKit] Processing email verification with token');\n      }\n      \n      try {\n        // Verify the email token via GrowthKit API (using email + token mode)\n        const verifyResponse = await fetch(`${config.apiUrl}/v1/verify/email`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${config.apiKey}`,\n          },\n          body: JSON.stringify({ \n            token\n          }),\n        });\n        \n        const redirectUrl = new URL(redirectTo, request.url);\n        \n        if (verifyResponse.ok) {\n          if (config.debug) {\n            console.log('[GrowthKit] Email verified successfully');\n          }\n          redirectUrl.searchParams.set('verified', 'true');\n        } else {\n          if (config.debug) {\n            console.error('[GrowthKit] Email verification failed:', verifyResponse.status);\n          }\n          redirectUrl.searchParams.set('verified', 'false');\n        }\n        \n        return NextResponse.redirect(redirectUrl);\n        \n      } catch (error) {\n        if (config.debug) {\n          console.error('[GrowthKit] Error verifying email:', error);\n        }\n        const redirectUrl = new URL(redirectTo, request.url);\n        redirectUrl.searchParams.set('verified', 'false');\n        redirectUrl.searchParams.set('error', 'verification-failed');\n        return NextResponse.redirect(redirectUrl);\n      }\n    }\n    \n    // Check if this is an invitation link\n    if (pathname.startsWith('/invite/')) {\n      const inviteCode = pathname.slice('/invite/'.length).split('/')[0];\n      \n      if (!inviteCode) {\n        if (config.debug) {\n          console.warn('[GrowthKit] No invitation code found in path:', pathname);\n        }\n        return NextResponse.redirect(new URL(redirectTo, request.url));\n      }\n      \n      if (config.debug) {\n        console.log('[GrowthKit] Processing invitation code:', inviteCode);\n      }\n      \n      // Redirect with invitation code as ref parameter (same as referral flow)\n      const redirectUrl = new URL(redirectTo, request.url);\n      redirectUrl.searchParams.set('ref', inviteCode);\n      \n      if (config.debug) {\n        console.log('[GrowthKit] Redirecting with invitation code to:', redirectUrl.toString());\n      }\n      \n      return NextResponse.redirect(redirectUrl);\n    }\n    \n    // Check if this is a referral link\n    if (!pathname.startsWith(referralPath + '/')) {\n      return NextResponse.next();\n    }\n    \n    // Extract referral code\n    const code = pathname.slice(referralPath.length + 1).split('/')[0];\n    \n    if (!code) {\n      if (config.debug) {\n        console.warn('[GrowthKit] No referral code found in path:', pathname);\n      }\n      return NextResponse.redirect(new URL(redirectTo, request.url));\n    }\n    \n    if (config.debug) {\n      console.log('[GrowthKit] Processing referral code:', code);\n    }\n    \n    try {\n      // Exchange the referral code for a claim token via GrowthKit API\n      const exchangeResponse = await fetch(`${config.apiUrl}/v1/referral/exchange`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${config.apiKey}`,\n        },\n        body: JSON.stringify({ referralCode: code }),\n      });\n      \n      if (!exchangeResponse.ok) {\n        if (config.debug) {\n          console.error('[GrowthKit] Failed to exchange referral code:', exchangeResponse.status);\n        }\n        // Invalid code, redirect without claim\n        return NextResponse.redirect(new URL(redirectTo, request.url));\n      }\n      \n      const data = await exchangeResponse.json();\n      const claimToken = data.data?.claim;\n      \n      if (!claimToken) {\n        if (config.debug) {\n          console.error('[GrowthKit] No claim token received from exchange');\n        }\n        return NextResponse.redirect(new URL(redirectTo, request.url));\n      }\n      \n      // Redirect to app with claim token as URL parameter\n      // The useGrowthKit hook will detect this and process it\n      const redirectUrl = new URL(redirectTo, request.url);\n      redirectUrl.searchParams.set('ref', claimToken);\n      \n      if (config.debug) {\n        console.log('[GrowthKit] Redirecting with claim token to:', redirectUrl.toString());\n      }\n      \n      return NextResponse.redirect(redirectUrl);\n      \n    } catch (error) {\n      if (config.debug) {\n        console.error('[GrowthKit] Error processing referral:', error);\n      }\n      // On error, redirect without claim\n      return NextResponse.redirect(new URL(redirectTo, request.url));\n    }\n  };\n}\n\nexport async function growthKitMiddleware(\n  request: NextRequest,\n  event?: NextFetchEvent\n): Promise<any> {\n  const apiKey = process.env.GROWTHKIT_API_KEY;\n  const apiUrl = process.env.GROWTHKIT_API_URL;\n  \n  if (!apiKey || !apiUrl) {\n    console.error('[GrowthKit] GROWTHKIT_API_KEY and GROWTHKIT_API_URL environment variables are required');\n    if (!NextResponse) {\n      const nextServer = await import('next/server');\n      NextResponse = nextServer.NextResponse;\n    }\n    return NextResponse.next();\n  }\n  \n  const handler = createGrowthKitMiddleware({\n    apiKey,\n    apiUrl,\n    debug: process.env.NODE_ENV === 'development'\n  });\n  \n  return handler(request, event);\n}","/**\n * Server-side utilities for GrowthKit\n * These utilities are meant to be used in API routes and server components\n */\n\nimport type { NextRequest } from 'next/server';\n\nexport interface GrowthKitServerConfig {\n  apiKey: string;\n  apiUrl?: string;\n}\n\n/**\n * Server-side API client for GrowthKit\n * Use this in API routes and server components\n */\nexport class GrowthKitServer {\n  private apiKey: string;\n  private apiUrl: string;\n\n  constructor(config: GrowthKitServerConfig) {\n    this.apiKey = config.apiKey;\n    this.apiUrl = config.apiUrl || process.env.GROWTHKIT_API_URL || 'http://localhost:3000/api';\n  }\n\n  /**\n   * Get user data by fingerprint\n   */\n  async getUser(fingerprint: string) {\n    const response = await fetch(`${this.apiUrl}/v1/me`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${this.apiKey}`,\n      },\n      body: JSON.stringify({ fingerprint }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to get user: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Complete an action for a user\n   */\n  async completeAction(fingerprint: string, action: string = 'default', metadata?: any) {\n    const response = await fetch(`${this.apiUrl}/v1/complete`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${this.apiKey}`,\n      },\n      body: JSON.stringify({\n        fingerprint,\n        action,\n        metadata,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to complete action: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Add email to waitlist\n   */\n  async addToWaitlist(email: string, fingerprint?: string, metadata?: any) {\n    const response = await fetch(`${this.apiUrl}/v1/waitlist`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${this.apiKey}`,\n      },\n      body: JSON.stringify({\n        email,\n        fingerprint,\n        metadata,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to add to waitlist: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Exchange referral code for claim token\n   */\n  async exchangeReferralCode(code: string) {\n    const response = await fetch(`${this.apiUrl}/v1/referral/exchange`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${this.apiKey}`,\n      },\n      body: JSON.stringify({ code }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to exchange referral code: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n}\n\n/**\n * Extract fingerprint from request headers (if using custom header)\n */\nexport function getFingerprintFromRequest(request: NextRequest): string | null {\n  return request.headers.get('x-fingerprint');\n}\n\n/**\n * Extract referral claim from request cookies\n */\nexport function getReferralClaimFromRequest(request: NextRequest): string | null {\n  return request.cookies.get('ref_claim')?.value || null;\n}\n\n/**\n * Create a server instance with environment variables\n */\nexport function createGrowthKitServer(): GrowthKitServer {\n  const apiKey = process.env.GROWTHKIT_API_KEY;\n  \n  if (!apiKey) {\n    throw new Error('GROWTHKIT_API_KEY environment variable is required');\n  }\n  \n  return new GrowthKitServer({\n    apiKey,\n    apiUrl: process.env.GROWTHKIT_API_URL,\n  });\n}\n","// Main hook export\nexport { useGrowthKit } from './useGrowthKit';\n\n// Type exports for TypeScript users\nexport type {\n  GrowthKitConfig,\n  GrowthKitState,\n  GrowthKitActions,\n  GrowthKitHook,\n  GrowthKitPolicy,\n  GrowthKitTheme,\n  ShareOptions,\n  CompleteActionOptions,\n  TrackedEvent,\n  TrackContext,\n  APIResponse,\n  MeResponse,\n  CompleteResponse,\n  ClaimResponse,\n  VerifyResponse,\n  WaitlistResponse,\n  WaitlistData,\n  AppBranding,\n} from './types';\n\n// Theme system exports\nexport type { ThemeColors } from './theme';\nexport {\n  getEffectiveTheme,\n  getThemeColors,\n  createThemeVariables,\n  onSystemThemeChange,\n  getFocusStyles,\n  getButtonHoverStyles,\n  lightTheme,\n  darkTheme,\n} from './theme';\n\n// Component exports\nexport {\n  GrowthKitProvider,\n  GrowthKitGate,\n  WaitlistForm,\n  CreditExhaustionModal,\n  GrowthKitAccountWidget,\n} from './components';\nexport type {\n  WaitlistFormProps,\n  CreditExhaustionModalRef,\n  GrowthKitAccountWidgetRef,\n} from './components';\n\n// Middleware exports for Next.js\nexport {\n  createGrowthKitMiddleware,\n  growthKitMiddleware,\n} from './middleware';\nexport type { GrowthKitMiddlewareConfig } from './middleware';\n\n// Server-side utilities\nexport {\n  GrowthKitServer,\n  createGrowthKitServer,\n  getFingerprintFromRequest,\n  getReferralClaimFromRequest,\n} from './server';\nexport type { GrowthKitServerConfig } from './server';\n\n// Client-side utilities\nexport { getFingerprint, clearFingerprintCache } from './fingerprint';\n\n// Assets exports\nexport { GROWTHKIT_LOGO_ICON_BASE64 } from './assets';\nexport type { LogoProps } from './assets';\n\n// API client export (for advanced users)\nexport { GrowthKitAPI } from './api';\n\n// Localization exports\nexport { useLocalization, useTranslation } from './localization';\nexport type { Language, Translations } from './localization';\n\n// Version\nexport const VERSION = '0.6.1';\n"],"mappings":"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","names":["detectDomainLocale","domainItems","hostname","detectedLocale","toLowerCase","item","domainHostname","domain","split","defaultLocale","locales","some","locale","require_remove_trailing_slash","__commonJSMin","exports","removeTrailingSlash","route","replace","require_parse_path","__commonJSMin","exports","parsePath","path","hashIndex","indexOf","queryIndex","hasQuery","pathname","substring","query","undefined","hash","slice","addPathPrefix","path","prefix","startsWith","pathname","query","hash","parsePath","addPathSuffix","path","suffix","startsWith","pathname","query","hash","parsePath","pathHasPrefix","path","prefix","pathname","parsePath","startsWith","addLocale","path","locale","defaultLocale","ignorePrefix","lower","toLowerCase","pathHasPrefix","addPathPrefix","formatNextPathnameInfo","info","pathname","addLocale","locale","buildId","undefined","defaultLocale","ignorePrefix","trailingSlash","removeTrailingSlash","addPathSuffix","addPathPrefix","basePath","endsWith","getHostname","parsed","headers","hostname","host","Array","isArray","toString","split","toLowerCase","normalizeLocalePath","cache","WeakMap","pathname","locales","lowercasedLocales","get","map","locale","toLowerCase","set","detectedLocale","segments","split","segment","index","indexOf","slice","length","removePathPrefix","path","prefix","pathHasPrefix","withoutPrefix","slice","length","startsWith","getNextPathnameInfo","pathname","options","basePath","i18n","trailingSlash","nextConfig","info","endsWith","pathHasPrefix","removePathPrefix","pathnameNoDataPrefix","startsWith","paths","replace","split","buildId","slice","join","parseData","result","i18nProvider","analyze","normalizeLocalePath","locales","locale","detectedLocale","NextURL","REGEX_LOCALHOST_HOSTNAME","parseURL","url","base","URL","String","replace","Internal","Symbol","constructor","input","baseOrOpts","opts","options","basePath","analyze","_this_Internal_options_nextConfig_i18n","_this_Internal_options_nextConfig","_this_Internal_domainLocale","_this_Internal_options_nextConfig_i18n1","_this_Internal_options_nextConfig1","info","getNextPathnameInfo","pathname","nextConfig","parseData","process","env","__NEXT_NO_MIDDLEWARE_URL_NORMALIZE","i18nProvider","hostname","getHostname","headers","domainLocale","detectDomainLocale","i18n","domains","defaultLocale","buildId","locale","trailingSlash","formatPathname","formatNextPathnameInfo","forceLocale","undefined","formatSearch","search","locales","includes","TypeError","searchParams","host","value","port","protocol","href","hash","origin","password","username","startsWith","toString","toJSON","for","clone","ACTION_SUFFIX","APP_DIR_ALIAS","CACHE_ONE_YEAR","DOT_NEXT_ALIAS","ESLINT_DEFAULT_DIRS","GSP_NO_RETURNED_VALUE","GSSP_COMPONENT_MEMBER_ERROR","GSSP_NO_RETURNED_VALUE","HTML_CONTENT_TYPE_HEADER","INFINITE_CACHE","INSTRUMENTATION_HOOK_FILENAME","JSON_CONTENT_TYPE_HEADER","MATCHED_PATH_HEADER","MIDDLEWARE_FILENAME","MIDDLEWARE_LOCATION_REGEXP","NEXT_BODY_SUFFIX","NEXT_CACHE_IMPLICIT_TAG_ID","NEXT_CACHE_REVALIDATED_TAGS_HEADER","NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER","NEXT_CACHE_SOFT_TAG_MAX_LENGTH","NEXT_CACHE_TAGS_HEADER","NEXT_CACHE_TAG_MAX_ITEMS","NEXT_CACHE_TAG_MAX_LENGTH","NEXT_DATA_SUFFIX","NEXT_INTERCEPTION_MARKER_PREFIX","NEXT_META_SUFFIX","NEXT_QUERY_PARAM_PREFIX","NEXT_RESUME_HEADER","NON_STANDARD_NODE_ENV","PAGES_DIR_ALIAS","PRERENDER_REVALIDATE_HEADER","PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER","PUBLIC_DIR_MIDDLEWARE_CONFLICT","ROOT_DIR_ALIAS","RSC_ACTION_CLIENT_WRAPPER_ALIAS","RSC_ACTION_ENCRYPTION_ALIAS","RSC_ACTION_PROXY_ALIAS","RSC_ACTION_VALIDATE_ALIAS","RSC_CACHE_WRAPPER_ALIAS","RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS","RSC_MOD_REF_PROXY_ALIAS","RSC_PREFETCH_SUFFIX","RSC_SEGMENTS_DIR_SUFFIX","RSC_SEGMENT_SUFFIX","RSC_SUFFIX","SERVER_PROPS_EXPORT_ERROR","SERVER_PROPS_GET_INIT_PROPS_CONFLICT","SERVER_PROPS_SSG_CONFLICT","SERVER_RUNTIME","SSG_FALLBACK_EXPORT_ERROR","SSG_GET_INITIAL_PROPS_CONFLICT","STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR","TEXT_PLAIN_CONTENT_TYPE_HEADER","UNSTABLE_REVALIDATE_RENAME_ERROR","WEBPACK_LAYERS","WEBPACK_RESOURCE_QUERIES","edge","experimentalEdge","nodejs","WEBPACK_LAYERS_NAMES","shared","reactServerComponents","serverSideRendering","actionBrowser","apiNode","apiEdge","middleware","instrument","edgeAsset","appPagesBrowser","pagesDirBrowser","pagesDirEdge","pagesDirNode","GROUP","builtinReact","serverOnly","neutralTarget","clientOnly","bundled","appPages","edgeSSREntry","metadata","metadataRoute","metadataImageMeta","fromNodeOutgoingHttpHeaders","normalizeNextQueryParam","splitCookiesString","toNodeOutgoingHttpHeaders","validateURL","nodeHeaders","headers","Headers","key","value","Object","entries","values","Array","isArray","v","toString","append","cookiesString","cookiesStrings","pos","start","ch","lastComma","nextStart","cookiesSeparatorFound","skipWhitespace","length","test","charAt","notSpecialChar","push","substring","cookies","toLowerCase","url","String","URL","error","Error","cause","prefixes","NEXT_QUERY_PARAM_PREFIX","NEXT_INTERCEPTION_MARKER_PREFIX","prefix","startsWith","PageSignatureError","RemovedPageError","RemovedUAError","Error","constructor","page","require_cookies","__commonJSMin","exports","module","__defProp","__getOwnPropDesc","__getOwnPropNames","__hasOwnProp","__export","target","all","name","__copyProps","to","from","except","desc","key","__toCommonJS","mod","src_exports","RequestCookies","ResponseCookies","parseCookie","parseSetCookie","stringifyCookie","c","_a","attrs","stringified","cookie","map","pair","splitAt","value","setCookie","attributes","domain","expires","httponly","maxage","path","samesite","secure","partitioned","priority","value2","parseSameSite","parsePriority","compact","t","newT","SAME_SITE","string","PRIORITY","splitCookiesString","cookiesString","cookiesStrings","pos","start","ch","lastComma","nextStart","cookiesSeparatorFound","skipWhitespace","notSpecialChar","requestHeaders","header","parsed","args","_","n","names","result","v","responseHeaders","_b","_c","cookieStrings","cookieString","normalizeCookie","replace","options","bag","headers","serialized","RequestCookies","ResponseCookies","stringifyCookie","INTERNALS","NextRequest","Symbol","Request","constructor","input","init","url","String","validateURL","process","env","NEXT_RUNTIME","body","duplex","nextUrl","NextURL","headers","toNodeOutgoingHttpHeaders","nextConfig","cookies","RequestCookies","__NEXT_NO_MIDDLEWARE_URL_NORMALIZE","toString","for","bodyUsed","cache","credentials","destination","Object","fromEntries","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","page","RemovedPageError","ua","RemovedUAError","ReflectAdapter","get","target","prop","receiver","value","Reflect","bind","set","has","deleteProperty","NextResponse","INTERNALS","Symbol","REDIRECTS","Set","handleMiddlewareField","init","headers","request","Headers","Error","keys","key","value","set","push","join","Response","constructor","body","cookies","ResponseCookies","cookiesProxy","Proxy","get","target","prop","receiver","args","result","Reflect","apply","newHeaders","getAll","map","cookie","stringifyCookie","ReflectAdapter","url","NextURL","toNodeOutgoingHttpHeaders","nextConfig","undefined","for","bodyUsed","Object","fromEntries","ok","redirected","status","statusText","type","json","response","redirect","has","RangeError","initObj","validateURL","rewrite","destination","next","require_image_response","__commonJSMin","exports","ImageResponse","Error","require_ua_parser","__commonJSMin","exports","module","i","e","a","r","t","n","s","b","w","l","d","c","u","p","m","f","h","v","g","k","x","_","y","q","T","S","z","N","A","C","E","O","U","j","P","R","M","B","V","D","I","W","F","G","H","L","Z","extend","o","enumerize","has","lowerize","majorize","trim","rgxMapper","strMapper","$","X","K","UAParser","Q","Y","__nccwpck_require__","isBot","userAgent","userAgentFromString","input","test","parseua","undefined","headers","get","URLPattern","GlobalURLPattern","undefined","bindSnapshot","createAsyncLocalStorage","createSnapshot","sharedAsyncLocalStorageNotAvailableError","Error","FakeAsyncLocalStorage","disable","getStore","run","exit","enterWith","bind","fn","maybeGlobalAsyncLocalStorage","globalThis","AsyncLocalStorage","snapshot","args","workAsyncStorageInstance","createAsyncLocalStorage","workAsyncStorage","workAsyncStorageInstance","after","task","workStore","workAsyncStorage","getStore","Error","afterContext","exports","workUnitAsyncStorageInstance","createAsyncLocalStorage","ACTION_HEADER","FLIGHT_HEADERS","NEXT_ACTION_NOT_FOUND_HEADER","NEXT_DID_POSTPONE_HEADER","NEXT_HMR_REFRESH_HASH_COOKIE","NEXT_HMR_REFRESH_HEADER","NEXT_IS_PRERENDER_HEADER","NEXT_REWRITTEN_PATH_HEADER","NEXT_REWRITTEN_QUERY_HEADER","NEXT_ROUTER_PREFETCH_HEADER","NEXT_ROUTER_SEGMENT_PREFETCH_HEADER","NEXT_ROUTER_STALE_TIME_HEADER","NEXT_ROUTER_STATE_TREE_HEADER","NEXT_RSC_UNION_QUERY","NEXT_URL","RSC_CONTENT_TYPE_HEADER","RSC_HEADER","InvariantError","Error","constructor","message","options","endsWith","name","getCacheSignal","getDraftModeProviderForCacheScope","getHmrRefreshHash","getPrerenderResumeDataCache","getRenderResumeDataCache","getRuntimeStagePromise","getServerComponentsHmrCache","isHmrRefresh","throwForMissingRequestStore","throwInvariantForMissingStore","workUnitAsyncStorage","workUnitAsyncStorageInstance","callingExpression","Error","InvariantError","workUnitStore","type","prerenderResumeDataCache","renderResumeDataCache","workStore","dev","hmrRefreshHash","cookies","get","NEXT_HMR_REFRESH_HASH_COOKIE","value","serverComponentsHmrCache","isDraftMode","draftMode","cacheSignal","runtimeStagePromise","DynamicServerError","isDynamicServerError","DYNAMIC_ERROR_CODE","Error","constructor","description","digest","err","StaticGenBailoutError","isStaticGenBailoutError","NEXT_STATIC_GEN_BAILOUT","Error","args","code","error","isHangingPromiseRejectionError","makeDevtoolsIOAwarePromise","makeHangingPromise","err","digest","HANGING_PROMISE_REJECTION","HangingPromiseRejectionError","Error","constructor","route","expression","abortListenersBySignal","WeakMap","signal","aborted","Promise","reject","hangingPromise","_","boundRejection","bind","currentListeners","get","push","listeners","set","addEventListener","i","length","once","catch","ignoreReject","underlying","resolve","setTimeout","METADATA_BOUNDARY_NAME","OUTLET_BOUNDARY_NAME","ROOT_LAYOUT_BOUNDARY_NAME","VIEWPORT_BOUNDARY_NAME","atLeastOneTask","scheduleImmediate","scheduleOnNextTick","waitAtLeastOneReactRenderTask","cb","Promise","resolve","then","process","env","NEXT_RUNTIME","setTimeout","nextTick","setImmediate","r","require_bailout_to_csr","__commonJSMin","exports","BailoutToCSRError","isBailoutToCSRError","BAILOUT_TO_CSR","Error","constructor","reason","digest","err","require_dynamic_rendering","__commonJSMin","exports","Postpone","PreludeState","abortAndThrowOnSynchronousRequestDataAccess","abortOnSynchronousPlatformIOAccess","accessedDynamicData","annotateDynamicAccess","consumeDynamicAccess","createDynamicTrackingState","createDynamicValidationState","createHangingInputAbortSignal","createRenderInBrowserAbortSignal","delayUntilRuntimeStage","formatDynamicAPIAccesses","getFirstDynamicReason","isDynamicPostpone","isPrerenderInterruptedError","logDisallowedDynamicError","markCurrentScopeAsDynamic","postponeWithTracking","throwIfDisallowedDynamic","throwToInterruptStaticGeneration","trackAllowedDynamicAccess","trackDynamicDataInDynamicRender","trackSynchronousPlatformIOAccessInDev","trackSynchronousRequestDataAccessInDev","useDynamicRouteParams","warnOnSyncDynamicError","hasPostpone","React","unstable_postpone","isDebugDynamicAccesses","dynamicAccesses","syncDynamicErrorWithStack","hasSuspenseAboveBody","hasDynamicMetadata","hasDynamicViewport","hasAllowedDynamic","dynamicErrors","trackingState","expression","store","workUnitStore","type","forceDynamic","forceStatic","dynamicShouldError","StaticGenBailoutError","route","dynamicTracking","revalidate","err","DynamicServerError","dynamicUsageDescription","dynamicUsageStack","stack","process","env","NODE_ENV","usedDynamic","prerenderStore","abortOnSynchronousDynamicDataAccess","reason","error","createPrerenderInterruptedError","controller","abort","push","Error","undefined","errorWithStack","requestStore","prerenderPhase","signal","aborted","console","workUnitAsyncStorage","getStore","assertPostpone","createPostponeReason","message","isDynamicPostponeReason","includes","NEXT_PRERENDER_INTERRUPTED","digest","length","serverDynamic","clientDynamic","filter","access","map","split","slice","line","join","AbortController","BailoutToCSRError","cacheSignal","inputReady","then","runtimeStagePromise","getRuntimeStagePromise","scheduleOnNextTick","workStore","workAsyncStorage","fallbackParams","fallbackRouteParams","size","use","makeHangingPromise","renderSignal","InvariantError","hasSuspenseRegex","bodyAndImplicitTags","hasSuspenseBeforeRootLayoutWithoutBodyOrImplicitBodyRegex","RegExp","ROOT_LAYOUT_BOUNDARY_NAME","hasMetadataRegex","METADATA_BOUNDARY_NAME","hasViewportRegex","VIEWPORT_BOUNDARY_NAME","hasOutletRegex","OUTLET_BOUNDARY_NAME","componentStack","dynamicValidation","test","createErrorWithComponentOrOwnerStack","ownerStack","captureOwnerStack","name","dev","hasReadableErrorStacks","prelude","i","result","afterTaskAsyncStorageInstance","createAsyncLocalStorage","afterTaskAsyncStorage","isRequestAPICallableInsideAfter","throwForSearchParamsAccessInUseCache","throwWithStaticGenerationBailoutError","throwWithStaticGenerationBailoutErrorWithDynamicError","route","expression","StaticGenBailoutError","workStore","constructorOpt","error","Error","captureStackTrace","invalidDynamicUsageError","afterTaskStore","afterTaskAsyncStorage","getStore","rootTaskSpawnPhase","connection","callingExpression","workStore","workAsyncStorage","getStore","workUnitStore","workUnitAsyncStorage","phase","isRequestAPICallableInsideAfter","Error","route","forceStatic","Promise","resolve","undefined","dynamicShouldError","StaticGenBailoutError","type","error","captureStackTrace","invalidDynamicUsageError","makeHangingPromise","renderSignal","postponeWithTracking","dynamicTracking","throwToInterruptStaticGeneration","trackDynamicDataInDynamicRender","process","env","NODE_ENV","makeDevtoolsIOAwarePromise","throwForMissingRequestStore","require_reflect_utils","__commonJSMin","exports","describeHasCheckingStringProperty","describeStringPropertyAccess","wellKnownProperties","isDefinitelyAValidIdentifier","target","prop","test","JSON","stringify","stringifiedProp","Set","actionAsyncStorageInstance","createAsyncLocalStorage","actionAsyncStorage","actionAsyncStorageInstance","require_picocolors","__commonJSMin","exports","bgBlack","bgBlue","bgCyan","bgGreen","bgMagenta","bgRed","bgWhite","bgYellow","black","blue","bold","cyan","dim","gray","green","hidden","inverse","italic","magenta","purple","red","reset","strikethrough","underline","white","yellow","globalThis","env","stdout","process","enabled","NO_COLOR","FORCE_COLOR","isTTY","CI","TERM","replaceClose","str","close","replace","index","start","substring","end","length","nextIndex","indexOf","formatter","open","input","string","String","s","require_lru_cache","__commonJSMin","exports","LRUCache","LRUNode","constructor","key","data","size","prev","next","SentinelNode","maxSize","calculateSize","cache","Map","totalSize","head","tail","addToHead","node","removeNode","moveToHead","removeTail","lastNode","set","value","console","warn","existing","get","newNode","delete","has","Symbol","iterator","current","remove","currentSize","bootstrap","error","event","info","prefixes","ready","trace","wait","warn","warnOnce","white","bold","red","yellow","green","magenta","LOGGING_METHOD","log","prefixedLog","prefixType","message","undefined","length","shift","consoleMethod","prefix","console","join","warnOnceCache","LRUCache","value","key","has","set","getRootParam","unstable_rootParams","CachedParams","WeakMap","warnOnce","workStore","workAsyncStorage","getStore","InvariantError","workUnitStore","workUnitAsyncStorage","Error","route","type","createPrerenderRootParams","rootParams","Promise","resolve","underlyingParams","prerenderStore","exportName","fallbackParams","fallbackRouteParams","key","has","cachedParams","get","promise","makeHangingPromise","renderSignal","set","makeErroringRootParams","augmentedUnderlying","Object","keys","forEach","prop","wellKnownProperties","defineProperty","expression","describeStringPropertyAccess","postponeWithTracking","dynamicTracking","throwToInterruptStaticGeneration","enumerable","paramName","apiName","actionStore","actionAsyncStorage","isAppRoute","isAction","phase","createPrerenderRootParamPromise","makeErroringRootParamPromise","require_server","__commonJSMin","exports","module","serverExports","useEffect","useCallback","useRef","getBrowserContext","ua","browser","detectBrowser","os","detectOS","device","detectDevice","isMobile","generateSessionId","GrowthKitAPI","apiKey","publicKey","apiUrl","debug","hostname","protocol","host","fingerprint","stored","parsed","expiry","token","expiresAt","error","url","context","getBrowserContext","response","data","tokenData","endpoint","options","finalEndpoint","headers","additionalHeaders","startTime","responseTime","result","claim","bodyData","action","creditsRequired","usdValue","metadata","name","email","events","sessionId","referralCode","invitationCode","FingerprintJS","cachedFingerprint","fpAgent","FINGERPRINT_STORAGE_KEY","getFingerprint","stored","error","resolve","fingerprint","fallback","generateFallbackFingerprint","components","str","hash","i","char","clearFingerprintCache","React","createContext","useContext","useState","useEffect","React","createContext","useContext","useState","useRef","initialState","GrowthKitStateContext","GrowthKitStateProvider","children","state","setState","apiRef","initRef","useGrowthKitState","context","createContext","useContext","enTranslations","esTranslations","translations","LocalizationContext","useLocalization","getTranslations","language","interpolate","template","values","match","key","useTranslation","t","keys","value","k","lightTheme","darkTheme","getEffectiveTheme","theme","getThemeColors","createThemeVariables","colors","onSystemThemeChange","callback","mediaQuery","handler","e","getFocusStyles","getButtonHoverStyles","GrowthKitContext","createContext","GrowthKitProvider","children","config","currentLanguage","setCurrentLanguage","useState","currentTheme","setCurrentTheme","effectiveTheme","setEffectiveTheme","getEffectiveTheme","useEffect","onSystemThemeChange","isDark","setLanguage","language","setTheme","theme","translations","getTranslations","themeColors","getThemeColors","React","LocalizationContext","GrowthKitStateProvider","useGrowthKitConfig","context","useContext","BATCH_SIZE","BATCH_INTERVAL","useGrowthKit","config","setTheme","useGrowthKitConfig","state","setState","apiRef","initRef","useGrowthKitState","configRef","useRef","eventQueueRef","batchTimerRef","sessionIdRef","generateSessionId","contextRef","getBrowserContext","useEffect","GrowthKitAPI","initialize","useCallback","prev","fingerprint","getFingerprint","urlParams","refClaim","invitation","verifyToken","referralResponse","error","invitationResponse","verifyResponse","cleanUrl","response","data","waitlistData","waitlistEnabled","waitlistStatus","waitlistPosition","waitlistMessage","shouldShowWaitlist","refresh","completeAction","action","optionsOrMetadata","creditsRequired","usdValue","metadata","claimName","name","claimEmail","email","verifyEmail","token","joinWaitlist","getReferralLink","share","options","referralLink","shareTitle","shareText","fullMessage","tweetText","tweetUrl","shouldShowSoftPaywall","canPerformAction","acceptInvitation","sendEvents","eventsToSend","currentContext","track","eventName","properties","handleUnload","headers","blob","React","useEffect","useRef","React","useState","WaitlistForm","message","onSuccess","className","style","growthKit","useGrowthKit","themeColors","useGrowthKitConfig","t","useTranslation","email","setEmail","useState","isSubmitting","setIsSubmitting","position","setPosition","error","setError","app","layout","brandColor","bgColor","cardBgColor","displayMessage","messages","randomIndex","handleSubmit","e","newPosition","getLogoFallback","w","displayPosition","React","getWaitlistMessage","waitlistCount","renderCenteredLayout","renderSplitLayout","renderMinimalLayout","React","useState","useEffect","forwardRef","useImperativeHandle","CreditExhaustionModal","forwardRef","props","ref","claimName","claimEmail","getReferralLink","share","hasClaimedName","hasClaimedEmail","hasVerifiedEmail","credits","creditsPaused","policy","useGrowthKit","themeColors","useGrowthKitConfig","t","useTranslation","isOpen","setIsOpen","useState","activeTab","setActiveTab","loading","setLoading","getAvailableTabs","tabs","getNextAvailableTab","currentTab","availableTabs","useImperativeHandle","useEffect","handleEsc","e","handleOverlayClick","React","styles","NameTab","EmailTab","VerifyTab","ShareTab","onClaim","onSuccess","name","setName","success","email","setEmail","referralLink","onShare","referralCredits","copied","setCopied","handleCopy","handleShare","GrowthKitGate","children","loadingComponent","loading","initialized","error","shouldShowWaitlist","credits","waitlistEnabled","useGrowthKit","themeColors","useGrowthKitConfig","t","useTranslation","creditModalRef","useRef","useEffect","React","WaitlistForm","CreditExhaustionModal","React","useState","useEffect","forwardRef","useImperativeHandle","useRef","GROWTHKIT_LOGO_ICON_BASE64","getFooterLogoUrl","apiUrl","isDark","customUrl","logoFileName","AccountWidgetInternal","forwardRef","children","position","slim","slim_labels","showName","showEmail","showCredits","showLogo","footerLogoUrl","autoOpenCreditModal","onCreditsChange","onProfileChange","className","style","ref","loading","initialized","error","credits","creditsPaused","shouldShowWaitlist","waitlistEnabled","name","email","hasClaimedName","hasClaimedEmail","hasVerifiedEmail","refresh","useGrowthKit","t","useTranslation","config","setLanguage","themeColors","effectiveTheme","useGrowthKitConfig","finalFooterLogoUrl","creditModalRef","useRef","showProfileExpanded","setShowProfileExpanded","useState","prevCredits","setPrevCredits","notification","setNotification","useEffect","params","showNotification","cleanupUrl","message","type","useImperativeHandle","loadingWidget","React","getWidgetStyles","styles","getPositionStyles","errorWidget","e","waitlistWidget","WaitlistForm","mainWidget","GROWTHKIT_LOGO_ICON_BASE64","getExpandedContentStyles","text","CreditExhaustionModal","getNotificationStyles","GrowthKitAccountWidget","theme","props","effectiveConfig","GrowthKitProvider","baseStyles","margin","isRightSide","isBottomSide","spinnerStyle","NextResponse","createGrowthKitMiddleware","config","referralPath","redirectTo","request","event","pathname","apiPath","targetUrl","headers","headerName","value","body","response","data","proxyResponse","finalResponse","error","token","redirectUrl","verifyResponse","inviteCode","code","exchangeResponse","claimToken","growthKitMiddleware","apiKey","apiUrl","GrowthKitServer","config","fingerprint","response","action","metadata","email","code","getFingerprintFromRequest","request","getReferralClaimFromRequest","createGrowthKitServer","apiKey","VERSION"]}