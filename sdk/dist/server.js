"use strict";var a=Object.defineProperty;var s=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var l=(r,e)=>{for(var t in e)a(r,t,{get:e[t],enumerable:!0})},c=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of p(e))!h.call(r,i)&&i!==t&&a(r,i,{get:()=>e[i],enumerable:!(n=s(e,i))||n.enumerable});return r};var u=r=>c(a({},"__esModule",{value:!0}),r);var d={};l(d,{GrowthKitServer:()=>o,createGrowthKitServer:()=>f,getFingerprintFromRequest:()=>g,getReferralClaimFromRequest:()=>y});module.exports=u(d);var o=class{constructor(e){this.apiKey=e.apiKey,this.apiUrl=e.apiUrl||process.env.GROWTHKIT_API_URL||"https://growth.fenixblack.ai/api"}async getUser(e){let t=await fetch(`${this.apiUrl}/v1/me`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({fingerprint:e})});if(!t.ok)throw new Error(`Failed to get user: ${t.statusText}`);return t.json()}async completeAction(e,t="default",n){let i=await fetch(`${this.apiUrl}/v1/complete`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({fingerprint:e,action:t,metadata:n})});if(!i.ok)throw new Error(`Failed to complete action: ${i.statusText}`);return i.json()}async addToWaitlist(e,t,n){let i=await fetch(`${this.apiUrl}/v1/waitlist`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({email:e,fingerprint:t,metadata:n})});if(!i.ok)throw new Error(`Failed to add to waitlist: ${i.statusText}`);return i.json()}async exchangeReferralCode(e){let t=await fetch(`${this.apiUrl}/v1/referral/exchange`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({code:e})});if(!t.ok)throw new Error(`Failed to exchange referral code: ${t.statusText}`);return t.json()}};function g(r){return r.headers.get("x-fingerprint")}function y(r){return r.cookies.get("ref_claim")?.value||null}function f(){let r=process.env.GROWTHKIT_API_KEY;if(!r)throw new Error("GROWTHKIT_API_KEY environment variable is required");return new o({apiKey:r,apiUrl:process.env.GROWTHKIT_API_URL})}0&&(module.exports={GrowthKitServer,createGrowthKitServer,getFingerprintFromRequest,getReferralClaimFromRequest});
//# sourceMappingURL=server.js.map